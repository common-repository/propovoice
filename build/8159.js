"use strict";(globalThis.webpackChunkpropovoice=globalThis.webpackChunkpropovoice||[]).push([[8159],{31528:(e,t,a)=>{a.d(t,{H:()=>n,W:()=>i});var s=a(37577);function n(e,t){(0,s.h)((()=>{!function(e,t){var a={name:e.name,mimeType:"image/*"},s=new FormData;s.append("metadata",new Blob([JSON.stringify(a)],{type:"application/json"})),s.append("file",e),o("post","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id",s,l,[t])}(e,t)}))}async function i(e){await(0,s.h)((async()=>{var t=await window.gapi.auth.getToken().access_token;await fetch(`https://www.googleapis.com/drive/v2/files/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}}).then((e=>console.log(e)))}))}function o(e,t,a,s,n=[]){var i=window.gapi.auth.getToken().access_token,o=new XMLHttpRequest;o.open(e,t),o.setRequestHeader("Authorization","Bearer "+i),o.responseType="json",o.onload=e=>{n.push(e),s.apply(this,n)},o.send(a)}function l(e,t){const a=t.target.response.id;e((e=>({...e,url:`https://drive.google.com/uc?export=view&id=${a}`}))),console.log("File uploaded successfully"),o("post",`https://www.googleapis.com/drive/v3/files/${a}/permissions`,new Blob([JSON.stringify({role:"reader",type:"anyone"})],{type:"application/json"}),r,[a])}function r(e){console.log(`The file id ${e} is public now!!!`)}},37577:(e,t,a)=>{a.d(t,{O:()=>c,h:()=>u});var s=a(56303),n=a(21241);let i,o=!1,l=!1;const r=(e,t,a)=>{const s=document.createElement("script");s.async=!0,s.defer=!0,s.src=t,s.id=e,s.onload=a,document.body.appendChild(s)},c=async()=>s.A.get("settings","tab=google_api_oauth2").then((e=>{if(!e.data.success||""===e.data.data.client_id||""===e.data.data.api_key)throw n.oR.error("Please setup Google Client ID and Api key in Settings!"),new Error("Please setup Google Client ID and Api key in Settings!");localStorage.setItem("g_client_id",e.data.data.client_id),localStorage.setItem("g_api_key",e.data.data.api_key)}));function d(){window.gapi.load("client:auth2",h)}async function h(){const e=localStorage.getItem("g_api_key");await window.gapi.client.init({apiKey:e,discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"]}),o=!0}function p(){const e=localStorage.getItem("g_client_id");i=google.accounts.oauth2.initTokenClient({client_id:e,scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file",callback:""}),l=!0}const m=e=>new Promise((t=>setTimeout(t,e)));async function u(e){await c(),r("gapi","https://apis.google.com/js/api.js",d),r("gsi","https://accounts.google.com/gsi/client",p),await m(500),i.callback=async t=>{if(void 0!==t.error)throw t;await e()},null===window.gapi.client.getToken()?await i.requestAccessToken({prompt:"consent"}):await i.requestAccessToken({prompt:""})}},74335:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(51609),n=a(7834),i=a(43065),o=a(21241),l=a(56303);const r=e=>{const t=(0,s.useRef)(),[a,r]=(0,s.useState)(!1),c=(0,s.useCallback)((()=>r(!1)),[]);(0,n.A)(t,c);const{row:d,project:h,boardView:p}=e,{i18n:m,caps:u}=ndpv,g=u.includes("ndpv_client_role");let v=!0;return h&&g&&p&&(v=!1),(0,s.createElement)("div",{className:"pv-action-content"},(0,s.createElement)("button",{className:a?"pv-active":"",onClick:()=>r((e=>!e)),style:{padding:"0 5px"}},(0,s.createElement)(i.ff,null)),a&&(0,s.createElement)("div",{className:"pv-dropdown-content pv-show",ref:t},v&&e.handleOverview&&(0,s.createElement)("a",{onClick:()=>{r(!1),e.handleOverview(d.id)}},m.ov),!g&&e.editEntry&&(0,s.createElement)("a",{onClick:()=>{r(!1),e.editEntry("edit",d)}},m.edit),!g&&(0,s.createElement)("a",{onClick:()=>{if(r(!1),d.file&&d.url){const t=new URL(d.url),a=new URLSearchParams(t.search).get("id");e.deleteEntry("singleDrive",[d.id,a])}else e.deleteEntry("single",d.id)}},m.del),e.resendPassword&&e.resendPassword.show&&(0,s.createElement)("a",{onClick:()=>{r(!1),((e,t)=>{let a={id:e,from:t,type:"resend-password"};l.A.add("actions",a,"pro").then((e=>{e.data.success?o.oR.success("Password resent"):e.data.data.forEach((function(e){o.oR.error(e)}))}))})(d.id,e.resendPassword.from)}},"Resend Password")))}},7280:(e,t,a)=>{a.d(t,{A:()=>o});var s=a(51609),n=a(49764),i=a.n(n);const o=e=>(0,s.createElement)("div",{className:"pv-pagination-content"},(0,s.createElement)(i(),{previousClassName:"pv-previous",nextClassName:"pv-next",disabledClassName:"pv-disabled",previousLabel:(0,s.createElement)("svg",{width:9,height:14,viewBox:"0 0 9 14",fill:"none"},(0,s.createElement)("path",{d:"M7.5 12.833L1.667 7 7.5 1.167",stroke:"#4C6FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),nextLabel:(0,s.createElement)("svg",{width:9,height:14,viewBox:"0 0 9 14",fill:"none"},(0,s.createElement)("path",{d:"M1.5 12.833L7.333 7 1.5 1.167",stroke:"#4C6FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),breakLabel:(0,s.createElement)("svg",{width:15,height:15,viewBox:"0 0 24 24",fill:"none"},(0,s.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 12a2 2 0 10-4 0 2 2 0 004 0zM14 12a2 2 0 10-4 0 2 2 0 004 0zM21 12a2 2 0 10-4 0 2 2 0 004 0z",fill:"#718096"})),breakClassName:"break",forcePage:e.forcePage,pageCount:e.pageCount,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:e.onPageChange,containerClassName:"pv-pagination",activeClassName:"pv-active"}))},9519:(e,t,a)=>{a.d(t,{A:()=>i});var s=a(51609),n=a(43516);const i=e=>{const{rows:t=5}=e;return(0,s.createElement)(n.Ay,{viewBox:"0 0 1500 "+60*t,...e},new Array(t).fill(" ").map(((e,a)=>{const n=e=>t>1?e+60*a:e;return(0,s.createElement)(s.Fragment,{key:a},(0,s.createElement)("rect",{x:"20",y:`${n(20)}`,rx:"4",ry:"4",width:"40",height:"20"}),(0,s.createElement)("rect",{x:"100",y:`${n(20)}`,rx:"10",ry:"4",width:"600",height:"20"}),(0,s.createElement)("rect",{x:"750",y:`${n(20)}`,rx:"10",ry:"4",width:"600",height:"20"}),(0,s.createElement)("rect",{x:"1450",y:`${n(20)}`,rx:"4",ry:"4",width:"20",height:"20"}),(0,s.createElement)("rect",{y:`${n(59)}`,x:"10",ry:"10",width:"1500",height:"1"}))})))}},8159:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var s=a(51609),n=a(9519),i=a(7280);class o extends s.Component{constructor(e){super(e),this.initialState={id:null,tab_id:this.props.tab_id,text:"",desc:"",priority:"",date:!1},this.state={form:this.initialState}}handleChange=e=>{const t=e.target,a=t.name,s="checkbox"===t.type?t.checked:t.value;this.setState({form:{...this.state.form,[a]:s}})};handleSubmit=e=>{e.preventDefault(),this.props.handleSubmit(this.state.form,"new"),this.setState({form:this.initialState})};render(){const e=ndpv.i18n;return(0,s.createElement)("form",{onSubmit:this.handleSubmit,className:""},(0,s.createElement)("div",{className:"pv-tab-buttons-group pv-text-right"},(0,s.createElement)("div",{className:"pv-activity-field"},(0,s.createElement)("input",{id:"field-text",type:"text",required:!0,name:"text",value:this.state.form.text,placeholder:"Write your note",onChange:this.handleChange})),(0,s.createElement)("button",{className:"pv-btn pv-btn-medium pv-bg-blue pv-bg-hover-blue pv-bg-shadow"},e.save)))}}const l=o;var r=a(43065),c=a(17604);class d extends s.Component{constructor(e){super(e),this.initialState={id:null,tab_id:this.props.tab_id,text:""},this.state={form:this.initialState}}handleChange=e=>{const{name:t,value:a}=e.target;this.setState({form:{...this.state.form,[t]:a}})};componentDidMount(){this.editData()}componentDidUpdate(){this.editData()}editData=()=>{"edit"==this.props.modalType?this.state.form.id!=this.props.data.id&&this.setState({form:this.props.data}):null!=this.state.form.id&&this.setState({form:this.initialState})};handleSubmit=e=>{e.preventDefault();let t={...this.state.form};this.props.handleSubmit(t),this.setState({form:this.initialState})};render(){const e=this.state.form,t=ndpv.i18n,a="new"==this.props.modalType?t.add_new:t.edit;return(0,s.createElement)("div",{className:"pv-overlay pv-show"},(0,s.createElement)("div",{className:"pv-modal-content"},(0,s.createElement)("div",{className:"pv-modal-header pv-gradient"},(0,s.createElement)("span",{className:"pv-close",onClick:()=>this.props.close()},(0,s.createElement)(r.OM,null)),(0,s.createElement)("h2",{className:"pv-modal-title"},a," ",t.note," "),(0,s.createElement)("p",null,(0,c.sprintf)(t.formDesc,a,t.note))),(0,s.createElement)("form",{onSubmit:this.handleSubmit},(0,s.createElement)("div",{className:"pv-content"},(0,s.createElement)("div",{className:"pv-form-style-one"},(0,s.createElement)("div",{className:"row"},(0,s.createElement)("div",{className:"col"},(0,s.createElement)("label",{htmlFor:"form-text"},t.note),(0,s.createElement)("textarea",{id:"form-text",required:!0,name:"text",value:e.text,onChange:this.handleChange}))))),(0,s.createElement)("div",{className:"pv-modal-footer"},(0,s.createElement)("div",{className:"row"},(0,s.createElement)("div",{className:"col"},(0,s.createElement)("button",{type:"reset",className:"pv-btn pv-text-hover-blue",onClick:()=>this.props.close()},t.cancel)),(0,s.createElement)("div",{className:"col"},(0,s.createElement)("button",{type:"submit",className:"pv-btn pv-bg-blue pv-bg-hover-blue pv-btn-big pv-float-right pv-color-white"},t.save)))))))}}const h=d;var p=a(74335);const m=e=>{let t=e.tableData.map(((t,a)=>(0,s.createElement)("div",{className:"pv-note",key:a},(0,s.createElement)(p.A,{row:t,editEntry:e.editEntry,deleteEntry:e.deleteEntry}),(0,s.createElement)("div",{className:"pv-avater"},(0,s.createElement)("img",{src:ndpv.assetImgUri+"avatar.png",alt:"avatar"})),(0,s.createElement)("div",{className:"pv-note-text"},(0,s.createElement)("h4",null,t.by," ",(0,s.createElement)("span",null,t.date)),(0,s.createElement)("p",null,t.text)))));return(0,s.createElement)("div",{className:"pv-note-content"},t)},u=e=>{const{tableData:t,editEntry:a,checkedBoxes:n,deleteEntry:i}=e;return(0,s.createElement)(s.Fragment,null,t.length>0&&(0,s.createElement)(m,{tableData:t,editEntry:a,checkedBoxes:n,deleteEntry:i}))},g=(0,a(9435).A)((e=>{(0,s.useEffect)((()=>{e.getLists()}),[]);const{lists:t,checkedBoxes:a,searchVal:o}=e.state;return(0,s.createElement)("div",{className:""},(0,s.createElement)(l,{handleSubmit:e.handleSubmit,tab_id:e.tab_id}),e.state.formModal&&(0,s.createElement)(h,{tab_id:e.tab_id,handleSubmit:e.handleSubmit,modalType:e.state.formModalType,data:e.state.list,close:e.closeForm}),(0,s.createElement)("h3",{className:"pv-title-small"},ndpv.i18n.my," ",ndpv.i18n.note),e.state.preloader?(0,s.createElement)(n.A,null):(0,s.createElement)(u,{tableData:t,searchVal:o,editEntry:e.openForm,checkedBoxes:{data:a,handle:e.handleCheckbox},deleteEntry:e.deleteEntry}),(0,s.createElement)("div",{className:"pv-pagination-content-two"},e.state.totalPage>1&&(0,s.createElement)(i.A,{forcePage:e.state.currentPage-1,pageCount:e.state.totalPage,onPageChange:e.handlePageClick})))}),"note")},9435:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(51609),n=a(21241),i=a(31528),o=a(57536),l=a(60235);const r=(e,t,a,r="",c=!1)=>{r||(r=t+"s");const d=(c?l.BB:l.y0)+r;return class extends s.Component{constructor(e){super(e),this.state={title:a,empty:!1,submitPreloader:!1,preloader:!0,formModal:!1,searchModal:!1,formModalType:"new",list:{id:null},extra:{},lists:[],checkedBoxes:[],offset:0,perPage:10,total:1,totalPage:1,currentPage:1,searchVal:""},this.timeout=0}componentDidMount(){}getLists=(e=null)=>{let t={page:this.state.currentPage,per_page:this.state.perPage};this.props.tab_id&&(t.tab_id=this.props.tab_id),this.props.dashboard&&(t.dashboard=this.props.dashboard),this.props.module_id&&(t.module_id=this.props.module_id),e&&(e=Object.entries(e).reduce(((e,[t,a])=>a?(e[t]=a,e):e),{}),t={...t,...e});let a=new URLSearchParams(t).toString();const s=o.A.get(`${d}/?${a}`,l.Sh);return s.then((e=>{let t=e.data.data.result,a=e.data.data.total,s=!t.length,n={};e.data.data.hasOwnProperty("extra")&&(n=e.data.data.extra),this.setState({lists:t,extra:n,preloader:!1,empty:s,total:a,totalPage:Math.ceil(a/this.state.perPage)})})),s};handleSearch=e=>{const{value:t}=e.target;this.setState({searchVal:t},(()=>{this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.getLists({s:this.state.searchVal})}),300)}))};showItem=(e,t=null)=>{const{value:a}=e.target;this.setState({perPage:a},(()=>{this.getLists(t)}))};handleSubmit=(e,t=null,a=null)=>{let s=this.state.formModalType;t&&(s=t),this.setState({submitPreloader:!0}),"new"==s?o.A.post(d,e,l.Sh).then((e=>{e.data.success?(this.setState({formModal:!1,submitPreloader:!1}),n.oR.success(ndpv.i18n.aAdd),this.getLists(a)):(this.setState({submitPreloader:!1}),e.data.data.forEach((e=>{n.oR.error(e)})))})):o.A.put(`${d}/${e.id}`,e,l.Sh).then((e=>{e.data.success?(this.setState({formModal:!1,submitPreloader:!1}),n.oR.success(ndpv.i18n.aUpd),this.getLists(a)):(this.setState({submitPreloader:!1}),e.data.data.forEach((e=>{n.oR.error(e)})))}))};deleteEntry=async(e,t,a=null,s=null)=>{if(confirm(ndpv.i18n.aConf)){"singleDrive"==e&&(await(0,i.W)(t[1]),t=t[0]);let a="single"==e||"singleDrive"==e?t:this.state.checkedBoxes.toString();o.A.delete(`${d}/${a}`,l.Sh).then((t=>{t.data.success?(n.oR.success(ndpv.i18n.aDel),"single"!=e&&this.setState({checkedBoxes:[]}),this.getLists(s)):t.data.data.forEach((e=>{n.oR.error(e)}))}))}};openForm=(e="new",t=null)=>{"new"==e?this.setState({formModal:!0,formModalType:"new"}):(t.hasOwnProperty("start_date")&&t.start_date&&(t.start_date=new Date(t.start_date)),t.hasOwnProperty("due_date")&&t.due_date&&(t.due_date=new Date(t.due_date)),this.setState({formModal:!0,formModalType:"edit",list:t}))};closeForm=(e="new")=>{"new"==e?this.setState({formModal:!1}):this.setState({searchModal:!1})};handleCheckbox=(e,t,a=null)=>{let s=this.state.checkedBoxes;if("single"==t)e.target.checked?(s.push(a),this.setState({checkedBoxes:s})):(s.splice(s.indexOf(a),1),this.setState({checkedBoxes:s}));else if(e.target.checked){let e=[];this.state.lists.map((t=>{e.push(t.id)})),this.setState({checkedBoxes:e})}else this.setState({checkedBoxes:[]})};handlePageClick=(e,t=null)=>{const a=e.selected+1,s=a*this.state.perPage;this.setState({currentPage:a,offset:s},(()=>{this.getLists(t)}))};render(){return(0,s.createElement)(e,{...this.props,state:this.state,openForm:this.openForm,closeForm:this.closeForm,showItem:this.showItem,getLists:this.getLists,handleCheckbox:this.handleCheckbox,uncheckAll:()=>this.setState({checkedBoxes:[]}),handleSubmit:this.handleSubmit,handleSearch:this.handleSearch,handlePageClick:this.handlePageClick,deleteEntry:this.deleteEntry})}}}}}]);