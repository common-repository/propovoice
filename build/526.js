"use strict";(globalThis.webpackChunkpropovoice=globalThis.webpackChunkpropovoice||[]).push([[526,8145],{60235:(e,t,n)=>{n.d(t,{BB:()=>s,Sh:()=>a,y0:()=>r});const r=`${ndpv.apiUrl}ndpv/v1/`,s=`${ndpv.apiUrl}ndpvp/v1/`,a={headers:{"content-type":"application/json","X-WP-NONCE":ndpv.nonce,"Cache-Control":"no-cache"}}},88477:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(57536),s=n(60235);const a=s.y0+"payment-process",c={getAll:(e="")=>r.A.get(`${a}/?${e}`,s.Sh),create:e=>r.A.post(a,e,s.Sh)}},60526:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(51609),s=n(56303),a=n(73986),c=n(21241),i=n(88477);const o={layout:"vertical"},l=({type:e,invoice:t,currency:n,showSpinner:l})=>{const p=t.total,u=t.id,d=!!t.recurring&&t.recurring.subscription,[{options:m,isPending:v},h]=(0,a.Gi)(),[y,g]=(0,r.useState)(null);(0,r.useEffect)((()=>{h({type:"resetOptions",value:{...m,currency:n,...d&&{intent:"subscription"}}})}),[n,l]);const E=ndpv.i18n;return(0,r.createElement)(r.Fragment,null,l&&v&&(0,r.createElement)("div",{className:"pv-preloader"}),y?function(e,t){return(0,r.createElement)("div",{className:"Result"},(0,r.createElement)("div",{className:"ResultTitle",role:"alert"},t.payment," successful"),(0,r.createElement)("div",{className:"ResultMessage"},"Thanks for trying paypal payment.",(0,r.createElement)("div",{style:{marginTop:"7px",color:"#000"}},(0,r.createElement)("b",null,t.txn," ",t.id,":")," ",e.id)))}(y,E):d?function(e,t){return(0,r.createElement)(a.JV,{createSubscription:(t,n)=>function(e,t,n){return s.A.get("invoices/"+n+"/paypal-subscriptions","","pro").then((e=>t.subscription.create({plan_id:e.data}).then((e=>e))))}(0,n,e),onApprove:(t,n)=>function(e,t,n,r){s.A.get("invoices/"+n+"/paypal-subscriptions/"+e.subscriptionID,"","pro").then((()=>{})),alert("You have successfully created subscription "+e.subscriptionID)}(t,0,e),style:{label:"subscribe"}})}(u):function(e,t,n,s,o,l){return(0,r.createElement)(a.JV,{style:s,disabled:!1,forceReRender:[t,n,s],fundingSource:void 0,createOrder:(e,r)=>function(e,t,n,r){return t.order.create({purchase_units:[{amount:{currency_code:n,value:r}}]}).then((e=>e))}(0,r,n,t),onApprove:(t,n)=>function(e,t,n,r,s){return t.order.capture().then((e=>{let t={invoice_id:n,payment_method:"paypal",payment_info:{id:e.id,billing_address:e.payer,created:e.create_time}};s&&"package"==s&&(t.type="package"),i.A.create(t).then((t=>{t.data.success?r(e):c.oR.error("Invalid submission!!!")}))}))}(0,n,e,o,l)})}(u,p,n,o,g,e))};class p extends r.Component{constructor(e){super(e)}render(){const e=!!this.props.invoice.recurring&&this.props.invoice.recurring.subscription,t=this.props.invoice.payment_methods.paypal.client_id,n=this.props.invoice.currency,s={"client-id":t,currency:n,...e&&{intent:"subscription",vault:!0}};return(0,r.createElement)(r.Fragment,null,this.props.show&&(0,r.createElement)("div",{className:"pv-overlay pv-show"},(0,r.createElement)("div",{className:"pv-modal-content pv-modal-style-two pv-modal-small"},(0,r.createElement)("div",{className:"pv-modal-header"},(0,r.createElement)("span",{className:"pv-close",onClick:()=>this.props.close()},(0,r.createElement)("svg",{width:25,height:25,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)("path",{d:"M12.5 3.5L3.5 12.5",stroke:"#718096",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.createElement)("path",{d:"M12.5 12.5L3.5 3.5",stroke:"#718096",strokeLinecap:"round",strokeLinejoin:"round"}))),(0,r.createElement)("h2",{className:"pv-modal-title"},ndpv.i18n.pay," ",ndpv.i18n.with," Paypal")),(0,r.createElement)("div",{className:"pv-content"},(0,r.createElement)("div",{className:"pv-form-style-one"},(0,r.createElement)("div",{className:"row"},(0,r.createElement)("div",{className:"col-lg"},(0,r.createElement)(a.ag,{options:s},(0,r.createElement)(l,{type:this.props.type,invoice:this.props.invoice,currency:n,showSpinner:!0})))))))))}}const u=p}}]);