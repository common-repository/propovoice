(globalThis.webpackChunkpropovoice=globalThis.webpackChunkpropovoice||[]).push([[4424],{60235:(e,t,a)=>{"use strict";a.d(t,{BB:()=>n,Sh:()=>s,y0:()=>l});const l=`${ndpv.apiUrl}ndpv/v1/`,n=`${ndpv.apiUrl}ndpvp/v1/`,s={headers:{"content-type":"application/json","X-WP-NONCE":ndpv.nonce,"Cache-Control":"no-cache"}}},74263:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var l=a(57536),n=a(60235);const s=n.y0+"media",r={...n.Sh,"Content-Type":"multipart/form-data","Cache-Control":"no-cache"},o={getAll:(e="")=>l.A.get(`${s}/?${e}`,n.Sh),getAttachment:e=>l.A.get(`${s}/attachment/${e}`,n.Sh),getDefaultAttachment:e=>l.A.get(`${s}/attachment/${e}/default/get`,n.Sh),setDefaultAttachment:(e,t)=>l.A.get(`${s}/attachment/${e}/default/set/${t}`,n.Sh),get:e=>l.A.get(`${s}/${e}`,n.Sh),create:e=>l.A.post(s,e,{headers:r}),update:(e,t)=>l.A.put(`${s}/${e}`,t,{headers:r}),remove:e=>l.A.delete(`${s}/${e}`,n.Sh),findByArg:e=>l.A.get(`${s}?title=${e}`,n.Sh)}},46412:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var l=a(51609),n=a(7612),s=a(7834);const r=({color:e,onChange:t})=>{const a=(0,l.useRef)(),[r,o]=(0,l.useState)(!1),i=(0,l.useCallback)((()=>o(!1)),[]);return(0,s.A)(a,i),(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"pv-field-color-picker"},(0,l.createElement)("span",{style:{background:"#edf2f7"},onClick:()=>t("")},(0,l.createElement)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},(0,l.createElement)("path",{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z",stroke:"#718096",strokeWidth:"1.5",strokeMiterlimit:10}),(0,l.createElement)("path",{d:"M17.5452 5.88672L6.29517 17.8867",stroke:"#718096",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))),(0,l.createElement)("span",{style:{backgroundColor:"#f16063"},onClick:()=>t("#f16063")}),(0,l.createElement)("span",{style:{backgroundColor:"#f7936f"},onClick:()=>t("#f7936f")}),(0,l.createElement)("span",{style:{backgroundColor:"#4c6fff"},onClick:()=>t("#4c6fff")}),(0,l.createElement)("span",{style:{backgroundColor:"#18954d"},onClick:()=>t("#18954d")}),(0,l.createElement)("span",{style:{backgroundColor:e||"#edf2f7"},onClick:()=>o(!0)},(0,l.createElement)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},(0,l.createElement)("path",{d:"M16.8562 10.8556L17.3155 11.315C17.5938 11.5974 17.7498 11.9779 17.7498 12.3744C17.7498 12.7708 17.5938 13.1513 17.3155 13.4337L16.6593 14.09C16.5895 14.1609 16.5063 14.2171 16.4146 14.2555C16.3228 14.294 16.2244 14.3137 16.1249 14.3137C16.0255 14.3137 15.927 14.294 15.8353 14.2555C15.7435 14.2171 15.6603 14.1609 15.5905 14.09L9.90929 8.40874C9.83843 8.33895 9.78215 8.25577 9.74374 8.16403C9.70533 8.07229 9.68555 7.97382 9.68555 7.87437C9.68555 7.77491 9.70533 7.67644 9.74374 7.5847C9.78215 7.49296 9.83843 7.40978 9.90929 7.33999L10.5655 6.68374C10.8479 6.40549 11.2285 6.24951 11.6249 6.24951C12.0214 6.24951 12.4019 6.40549 12.6843 6.68374L13.1437 7.14312L15.7312 4.55562C16.7437 3.54312 18.3937 3.48687 19.4249 4.47124C19.6795 4.71202 19.8833 5.00134 20.0243 5.32213C20.1653 5.64292 20.2406 5.9887 20.2458 6.33907C20.2511 6.68943 20.1861 7.03731 20.0548 7.36217C19.9235 7.68704 19.7284 7.98232 19.4812 8.23062L16.8562 10.8556Z",stroke:"#718096",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.createElement)("path",{d:"M14.8684 13.3684L9.61835 18.6184C9.24788 18.9933 8.78434 19.263 8.27529 19.3997C7.76623 19.5365 7.22996 19.5353 6.72148 19.3965L4.52773 20.3527C4.39091 20.4127 4.23929 20.4305 4.0923 20.4038C3.94532 20.3771 3.80966 20.3071 3.70273 20.2027V20.2027C3.62495 20.1262 3.57248 20.0276 3.55237 19.9204C3.53225 19.8131 3.54547 19.7023 3.59023 19.6027L4.60273 17.2777C4.46387 16.7692 4.46276 16.233 4.5995 15.7239C4.73623 15.2149 5.0059 14.7513 5.38085 14.3809L10.6309 9.13086",stroke:"#718096",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})))),r&&(0,l.createElement)("div",{className:"pv-popover",ref:a},(0,l.createElement)(n.jI,{color:e,onChange:t}),(0,l.createElement)("span",{style:{marginRight:"2px",width:"auto"}},"#"),(0,l.createElement)(n.HC,{color:e,onChange:t})))}},46129:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var l=a(51609),n=a(56303),s=a(7834),r=a(36478),o=a(53417);const i=e=>{const{nameLabel:t=ndpv.i18n.name}=e,a=(0,l.useRef)(),i=(0,l.useRef)(),{form:c,setForm:m,setErrorFields:d}=(0,l.useContext)(r.cK),[p,h]=(0,l.useState)([]),[u,g]=(0,l.useState)([]),[v,E]=(0,l.useState)(!1),[b,f]=(0,l.useState)(!1),y=(0,l.useCallback)((()=>E(!1)),[]);(0,s.A)(a,y);const C=(0,l.useCallback)((()=>f(!1)),[]);(0,s.A)(i,C);let _=0;(0,l.useEffect)((()=>{}),[]);const N=t=>{const{name:a,value:l}=t.target;if(l.length<1)return E(!1),h([]),void("first_name"==a?e.onChange("","person"):e.onChange("","org"));"first_name"==a?e.onChange(l,"person"):e.onChange(l,"org"),_&&clearTimeout(_),_=setTimeout((()=>{"first_name"==a?n.A.get("persons","first_name="+l).then((e=>{let t=e.data.data.result;E(!0),h(t)})):n.A.get("organizations","name="+l).then((e=>{let t=e.data.data.result;f(!0),g(t)}))}),300)},w=(t,a,l)=>{t.preventDefault(),e.onSelect(a,l),"person"==l?(E(!1),h([])):(f(!1),g([]))},S=ndpv.i18n,k=(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{style:{position:"relative"},className:"col-lg"},(0,l.createElement)(o.EY,{id:"first_name",wrapperClassName:"",label:t,type:"text",name:"first_name",autoComplete:"off",disabled:e.fromClient,value:e.first_name,onChange:N,validation:{required:{value:!0,message:"Name field is required"}}}),(0,l.createElement)("div",{style:{position:"absolute",bottom:0,left:"15px",zIndex:9999},className:"pv-field-search",ref:a},(0,l.createElement)("div",{className:"pv-action-content"},v&&(0,l.createElement)("div",{className:"pv-dropdown-content pv-show"},(0,l.createElement)("button",{style:{color:"#4c6fff"},onClick:e=>w(e,null,"person")},"+ ",S.add," '",e.first_name,"' ",S.as," ",S.new," ",S.ct),p.map(((e,t)=>(0,l.createElement)("a",{key:t,onClick:t=>w(t,e,"person")},e.first_name)))))))),x=(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{style:{position:"relative"},className:"col-lg"},(0,l.createElement)(o.EY,{wrapperClassName:"",label:S.org,id:"org_name",type:"text",name:"org_name",autoComplete:"off",disabled:e.fromClient,value:e.org_name,onChange:N,validation:{},group:"contact"}),(0,l.createElement)("div",{style:{position:"absolute",bottom:0,left:"15px",zIndex:9999},className:"pv-field-search",ref:i},(0,l.createElement)("div",{className:"pv-action-content"},b&&(0,l.createElement)("div",{className:"pv-dropdown-content pv-show"},(0,l.createElement)("button",{style:{color:"#4c6fff"},onClick:e=>w(e,null,"org")},"+ ",S.add," '",e.org_name,"' ",S.as," ",S.new," ",S.org),u.map(((e,t)=>(0,l.createElement)("a",{key:t,onClick:t=>w(t,e,"org")},e.name))))))));return(0,l.createElement)("div",{className:"row"},!e.personLast&&k,x,e.personLast&&k)}},58322:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var l=a(51609),n=a(29328),s=a.n(n),r=a(54043);const o=e=>{const[t,a]=(0,l.useState)([]),[n,o]=(0,l.useState)(null);return(0,l.useEffect)((()=>{const t=s();let l=[];Object.keys(t).map((e=>{l.push({id:e,label:e+" ("+t[e]+")"})})),a(l),e.value&&o({id:e.value,label:e.value+" ("+t[e.value]+")"})}),[]),(0,l.createElement)(l.Fragment,null,t.length>0&&(0,l.createElement)(r.A,{search:!0,className:"pv-field-select",value:n,onChange:t=>{o(t),e.onChange(t.id)},options:t,form:e.form}))}},57505:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var l=a(51609),n=a(56303),s=a(55800),r=a(76531);const o=(0,l.lazy)((()=>Promise.all([a.e(1294),a.e(3566)]).then(a.bind(a,38043)))),i=e=>{const[t,a]=(0,l.useState)(!1),[i,c]=(0,l.useState)(!0),[m,d]=(0,l.useState)([]);(0,l.useEffect)((()=>{wage.length||0===m.length&&(a(!0),p())}),[]);const p=()=>{n.A.get("custom-fields","mod="+e.mod).then((e=>{e.data.success&&(d(e.data.data),a(!1))}))},h=t=>{c(!1),e.onChange(t)},u=e.form,{i18n:g}=ndpv;return(0,l.createElement)(l.Fragment,null,t?(0,l.createElement)(s.A,null):(0,l.createElement)(l.Fragment,null,m.length>0&&(0,l.createElement)("div",{className:"pv-hl"},(0,l.createElement)("hr",null),(0,l.createElement)("span",{className:"pv-hl-text"},g.cus_fields)),m.map(((t,a)=>("date"===t.type&&u[t.slug]&&"new"!=e.type&&(u[t.slug]=new Date(u[t.slug])),"new"==e.type&&i&&t.value&&(u[t.slug]=t.value),(0,l.createElement)("div",{key:a,className:"row"},(0,l.createElement)("div",{className:"col"},(0,l.createElement)("label",{htmlFor:"custom-field-"+a,style:{display:"block"}},t.label),("text"===t.type||"email"===t.type||"number"===t.type)&&(0,l.createElement)("input",{id:"custom-field-"+a,type:t.type,name:t.slug,value:u[t.slug],onChange:h}),"select"===t.type&&(0,l.createElement)("select",{id:"custom-field-"+a,name:t.slug,value:u[t.slug],onChange:h},(0,l.createElement)("option",{value:""},g.select),t.options.map(((e,t)=>(0,l.createElement)("option",{key:t,value:e},e)))),"multi-select"==t.type&&(0,l.createElement)("div",{className:"pi-field-multi"},(0,l.createElement)(r.A,{onChange:a=>((t,a)=>{const l={target:{name:a,value:t}};e.onChange(l)})(a,t.slug),options:t.options,value:u[t.slug],title:t.label})),"date"===t.type&&(0,l.createElement)("div",{className:"pv-field-date"},(0,l.createElement)(l.Suspense,{fallback:(0,l.createElement)(s.A,null)},(0,l.createElement)(o,{key:u[t.slug],id:"custom-field-"+a,date:u[t.slug],type:"date",name:t.slug,onDateChange:a=>((t,a)=>{const l={target:{name:a,value:t}};e.onChange(l)})(a,t.slug)}))),t.desc&&(0,l.createElement)("p",{className:"pv-field-desc"},t.desc))))))))}},76531:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var l=a(51609),n=a(7834);const s=e=>{const t=(0,l.useRef)(),[a,s]=(0,l.useState)([]),[r,o]=(0,l.useState)([]),[i,c]=(0,l.useState)(!1),m=(0,l.useCallback)((()=>c(!1)),[]);(0,n.A)(t,m),(0,l.useEffect)((()=>{e.options&&(o(e.value),s(e.options))}),[e.options]);const{i18n:d}=ndpv;return(0,l.createElement)(l.Fragment,null,r&&Array.isArray(r)&&r.map(((t,a)=>(0,l.createElement)("span",{key:a,className:"pv-badge"},t," ",(0,l.createElement)("b",{onClick:()=>(t=>{if(confirm(ndpv.i18n.aConf)){const a=r.filter((e=>e!==t));o(a),e.onChange&&e.onChange(a)}})(t)},"X")))),(0,l.createElement)("div",{className:"pv-action-content",ref:t},(0,l.createElement)("button",{className:e.small?"pv-btn pv-btn-small pv-bg-stroke pv-bg-hover-shadow":"pv-btn pv-btn-medium pv-bg-stroke pv-bg-hover-shadow",onClick:e=>(e=>{e.preventDefault(),c(!i)})(e)},"+ ",d.add," ",e.setting?d.def:e.title),i&&(0,l.createElement)("div",{className:"pv-dropdown-content pv-show"},a&&a.map(((t,a)=>(0,l.createElement)("a",{key:a,onClick:()=>(t=>{c(!1),r.includes(t)||(o([...r,t]),e.onChange&&e.onChange([...r,t]))})(t)},t))))))}},54043:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var l=a(51609),n=a(7834);const s=e=>{const t=(0,l.useRef)(),[a,s]=(0,l.useState)([]),[r,o]=(0,l.useState)(""),[i,c]=(0,l.useState)([]),[m,d]=(0,l.useState)(!1),p=(0,l.useCallback)((()=>d(!1)),[]);(0,n.A)(t,p),(0,l.useEffect)((()=>{e.options&&s(e.options)}),[]);const h=ndpv.i18n,u=i.length?i:a;return(0,l.createElement)("div",{className:"pv-action-content",ref:t},(0,l.createElement)("button",{className:"pv-btn pv-btn-medium",style:{width:"100%",backgroundColor:"#fff",border:"1px solid #E2E8F0",color:"#4A5568",fontWeight:"400",textAlign:"left"},ref:t=>{t&&e.form&&t.style.setProperty("padding","13px 15px","important")},onClick:e=>{e.preventDefault(),d((e=>!e))}},e.value?e.value.label:h.select,(0,l.createElement)("svg",{width:12,height:6,style:{position:"absolute",right:"8px"},viewBox:"0 0 12 6",fill:"none"},(0,l.createElement)("path",{d:"M5.00001 3.78145L8.30001 0.481445L9.24268 1.42411L5.00001 5.66678L0.757342 1.42411L1.70001 0.481445L5.00001 3.78145Z",fill:"#4A5568"}))),m&&(0,l.createElement)("div",{className:"pv-dropdown-content pv-show"},e.search&&(0,l.createElement)("div",{className:"pv-search-field"},(0,l.createElement)("input",{type:"text",value:r,onChange:e=>{const t=e.target.value;o(t);const l=(n=t,a.filter((e=>{const t=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"i");return e=>{for(let a in e)if(e.hasOwnProperty(a)&&t.test(e[a]))return!0;return!1}})(n)));var n;c(l||[])},placeholder:h.search})),(0,l.createElement)("div",{style:{maxHeight:250,overflowY:"scroll"}},u&&u.map(((t,a)=>(0,l.createElement)("a",{key:a,onClick:()=>(t=>{d(!1),e.onChange&&e.onChange(t)})(t)},t.label))))))}},19642:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var l=a(51609),n=a(46412),s=a(21241),r=a(92536),o=a(56303),i=a(43065),c=a(53417),m=a(36478);class d extends l.Component{constructor(e){super(e),this.initialState={id:null,label:"",color:"",bg_color:"",url:"",icon:null,val_type:"fixed",tax_cal:"",fee_cal:"",show:!0},this.state={submitPreloader:!1,form:this.initialState}}handleChange=e=>{const t=e.target,{name:a}=t,l="checkbox"==t.type?t.checked:t.value;this.setState({form:{...this.state.form,[a]:l}})};handleColorChange=(e,t)=>{let a={...this.state.form};"bg_color"==t?(a.bg_color=e,a.color=this.lightenDarkenColor(e,-80)):a.color=e,this.setState({form:a})};lightenDarkenColor=(e,t)=>{let a=parseInt(e.substring(1,3),16),l=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return a=parseInt(a*(100+t)/100),l=parseInt(l*(100+t)/100),n=parseInt(n*(100+t)/100),a=a<255?a:255,l=l<255?l:255,n=n<255?n:255,"#"+(1==a.toString(16).length?"0"+a.toString(16):a.toString(16))+(1==l.toString(16).length?"0"+l.toString(16):l.toString(16))+(1==n.toString(16).length?"0"+n.toString(16):n.toString(16))};componentDidMount(){this.editData()}componentDidUpdate(){}editData=()=>{if("edit"==this.props.modalType)this.state.form.id!=this.props.data.id&&this.setState({form:this.props.data});else{let e={...this.initialState};if("extra_amount"==this.props.taxonomy){let t=this.props.extra_amount_type;"discount"==t&&(e.tax_cal="1",e.fee_cal="1"),"fee"==t&&(e.tax_cal="1")}null==this.state.form.id&&this.setState({form:e})}};handleSubmit=e=>{if(e.preventDefault(),ndpv.isDemo)return void s.oR.error(ndpv.demoMsg);let t={...this.state.form};t.taxonomy=this.props.taxonomy,this.setState({submitPreloader:!0}),"new"==this.props.modalType?(this.props.extra_amount_type&&(t.extra_amount_type=this.props.extra_amount_type),o.A.add("taxonomies",t).then((e=>{this.setState({submitPreloader:!1}),e.data.success?(s.oR.success(ndpv.i18n.aAdd),t.id=e.data.data,this.props.close(),this.props.reload(t)):e.data.data.forEach((function(e){s.oR.error(e)}))}))):o.A.edit("taxonomies",t.id,t).then((e=>{this.setState({submitPreloader:!1}),e.data.success?(s.oR.success(ndpv.i18n.aUpd),this.props.close(),this.props.reload()):e.data.data.forEach((function(e){s.oR.error(e)}))}))};handleLogoChange=e=>{let t={...this.state.form};t.icon=e,this.setState({form:t})};render(){const e=ndpv.i18n,t=this.props.extra_amount_type,{submitPreloader:a,form:s}=this.state;return(0,l.createElement)("div",{className:"pv-overlay pv-show"},(0,l.createElement)("div",{className:"pv-modal-content pv-modal-style-two pv-modal-small"},(0,l.createElement)("div",{className:"pv-modal-header"},(0,l.createElement)("span",{className:"pv-close",onClick:()=>this.props.close()},(0,l.createElement)(i.OM,null)),(0,l.createElement)("h2",{className:"pv-modal-title"},"new"==this.props.modalType?e.new:e.edit," ",this.props.title)),(0,l.createElement)(m._H,{submitPreloader:a,submitHandler:this.handleSubmit,close:this.props.close,formTag:this.props.formTag},(0,l.createElement)(m.sf,{formStyleClass:"pv-form-style-one"},(0,l.createElement)("div",{className:"row"},(0,l.createElement)(c.EY,{label:e.name,id:"field-label",type:"text",name:"label",wrapperClassName:"col-md",value:s.label,onChange:e=>this.handleChange(e),validation:{required:{value:!0}}})),this.props.color&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-bg_color"},e.bg," ",e.color),(0,l.createElement)(n.A,{color:s.bg_color,onChange:e=>this.handleColorChange(e,"bg_color")}))),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-color"},e.text," ",e.color),(0,l.createElement)(n.A,{color:s.color,onChange:e=>this.handleColorChange(e,"color")}))),!1),this.props.url&&(0,l.createElement)("div",{className:"row"},(0,l.createElement)(c.EY,{label:e.url,id:"field-url",type:"url",name:"url",wrapperClassName:"col-md",value:s.url,onChange:e=>this.handleChange(e),validation:{required:{value:!0}}})),this.props.icon&&(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-icon"},e.icon),(0,l.createElement)(r.A,{data:s.icon,small:!0,changeHandler:this.handleLogoChange}))),this.props.fee_cal&&(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-label"},e.fee," ",e.cal),(0,l.createElement)("select",{name:"fee_cal",value:s.fee_cal,onChange:this.handleChange},(0,l.createElement)("option",{value:""},e.with," ",e.fee),(0,l.createElement)("option",{value:"1"},e.witho," ",e.fee)))),this.props.tax_cal&&(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-label"},e.tax," ",e.cal),(0,l.createElement)("select",{name:"tax_cal",value:s.tax_cal,onChange:this.handleChange},(0,l.createElement)("option",{value:""},e.with," ","tax"==t?e.item:""," ",e.tax),(0,l.createElement)("option",{value:"1"},e.witho," ","tax"==t?e.item:""," ",e.tax)))),this.props.show&&(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col"},(0,l.createElement)("label",{id:"form-show"},e.def),(0,l.createElement)("div",{className:"pv-field-switch pv-mt-3 pv-ml-10"},(0,l.createElement)("label",{className:"pv-switch"},(0,l.createElement)("input",{type:"checkbox",id:"form-show",name:"show",checked:s.show?"checked":"",onChange:this.handleChange}),(0,l.createElement)("span",{className:"pv-switch-slider pv-round"}))))),t&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-label"},e.rate," ",e.type),(0,l.createElement)("select",{name:"val_type",value:s.val_type,onChange:this.handleChange},(0,l.createElement)("option",{value:"percent"},e.pct),(0,l.createElement)("option",{value:"fixed"},e.fix)))),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col"},(0,l.createElement)("label",{id:"form-show"},e.alw," ",e.show),(0,l.createElement)("div",{className:"pv-field-switch pv-mt-3 pv-ml-10"},(0,l.createElement)("label",{className:"pv-switch"},(0,l.createElement)("input",{type:"checkbox",id:"form-show",name:"show",checked:s.show?"checked":"",onChange:this.handleChange}),(0,l.createElement)("span",{className:"pv-switch-slider pv-round"}))))))))))}}},24706:(e,t,a)=>{"use strict";a.d(t,{A:()=>m});var l=a(51609),n=a(21241),s=a(7834),r=a(19642),o=a(56303),i=a(25928),c=a(394);const m=e=>{const t=(0,l.useRef)(),[a,m]=(0,l.useState)([]),[d,p]=(0,l.useState)([]),[h,u]=(0,l.useState)(!1),[g,v]=(0,l.useState)(!1),[E,b]=(0,l.useState)("new"),f={label:"",color:"",bg_color:""},[y,C]=(0,l.useState)(f),_=(0,l.useCallback)((()=>u(!1)),[]);(0,s.A)(t,_),(0,l.useEffect)((()=>{e.data?(e.multi?p(e.data):p([e.data]),N()):w()}),[e.data]);const N=(t=null)=>{if(t&&k(t),e.list)return void m(e.list);let a="";e.hide_bg&&(a="&hide_bg=true"),o.A.get("taxonomies","taxonomy="+e.taxonomy+a).then((t=>{t.data.success&&m(t.data.data[e.taxonomy])}))},w=()=>{let t="";e.hide_bg&&(t="&hide_bg=true"),o.A.get("taxonomies","taxonomy="+e.taxonomy+"&id="+e.id+t).then((t=>{t.data.success&&(m(t.data.data[e.taxonomy]),e.data||!e.modalType||"new"!=e.modalType&&"move"!=e.modalType||!e.selectedFirst||k(t.data.data[e.taxonomy][0]),e.id&&p(t.data.data["single_"+e.taxonomy]))}))},S=e=>{e.preventDefault(),u(!h)},k=t=>{let a={};if(a.taxonomy=e.taxonomy,a.add=!0,a.append=!!e.multi,e.id&&(a.post_id=parseInt(e.id)),a.id=parseInt(t.id),u(!1),e.multi)d.some((e=>e.id==t.id))||(p([...d,t]),e.onChange&&e.onChange([...d,t]));else if("request_status"===e.taxonomy&&"accepted"!==t.type||p([t]),e.onChange&&e.onChange(t),"request_status"===e.taxonomy&&"accepted"===t.type)return;e.id&&o.A.edit("taxonomies",a.id,a).then((t=>{t.data.success?(e.onDone&&e.onDone(),N()):t.data.data.forEach((function(e){n.oR.error(e)}))}))},{i18n:x,caps:F}=ndpv,A=F.includes("ndpv_client_role");return(0,l.createElement)(l.Fragment,null,e.multi&&d&&d.map(((t,a)=>(0,l.createElement)("span",{key:a,className:"pv-badge"},t.label," ",(0,l.createElement)("b",{onClick:()=>(t=>{if(confirm(ndpv.i18n.aConf)){let a={};a.taxonomy=e.taxonomy,a.delete=!0,a.post_id=parseInt(e.id),a.id=parseInt(t);const l=d.filter((e=>e.id!==t));if(p(l),e.onChange&&e.onChange(l),!e.id)return;o.A.edit("taxonomies",a.id,a).then((e=>{e.data.success?(n.oR.success(ndpv.i18n.aDel),N()):e.data.data.forEach((function(e){n.oR.error(e)}))}))}})(t.id)},"X")))),(0,l.createElement)("div",{className:"pv-action-content",ref:t},e.multi&&(0,l.createElement)("button",{className:e.small?"pv-btn pv-btn-small pv-bg-stroke pv-bg-hover-shadow":"pv-btn pv-btn-medium pv-bg-stroke pv-bg-hover-shadow",onClick:e=>S(e)},"+ ",x.add," ",e.title),!e.multi&&d.length>0&&(0,l.createElement)("button",{className:e.small?"pv-btn pv-btn-small":"pv-btn pv-btn-medium",ref:e=>{e&&(e.style.setProperty("background-color",d[0].bg_color?d[0].bg_color:"#E2E8F0","important"),e.style.setProperty("color",d[0].color?d[0].color:"#4a5568","important"))},onClick:e=>S(e)},d[0].label,(0,l.createElement)("svg",{width:10,height:6,style:{marginLeft:e.small?"7px":"10px"},className:"pv-mr-0",viewBox:"0 0 10 6",fill:"none"},(0,l.createElement)("path",{d:"M5.00001 3.78145L8.30001 0.481445L9.24268 1.42411L5.00001 5.66678L0.757342 1.42411L1.70001 0.481445L5.00001 3.78145Z",fill:d[0].color?d[0].color:"#4a5568"}))),!A&&!e.multi&&!d.length&&(0,l.createElement)("button",{ref:e=>{e&&(e.style.setProperty("background-color","#E2E8F0","important"),e.style.setProperty("color","#4a5568","important"))},className:e.small?"pv-btn pv-btn-small pv-bg-stroke pv-bg-hover-shadow":"pv-btn pv-btn-medium pv-bg-hover-shadow",onClick:e=>S(e)},"+ ",x.add," ",e.title),h&&(0,l.createElement)("div",{className:"pv-dropdown-content pv-show"},!A&&(0,l.createElement)("button",{onClick:t=>{((t,a,l="")=>{t.preventDefault(),"new"==a&&wage.length>0&&"tag"!=e.taxonomy&&"lead_level"!=e.taxonomy&&"lead_source"!=e.taxonomy&&"lead_source"!=e.taxonomy&&"task_status"!=e.taxonomy&&"task_type"!=e.taxonomy&&"task_priority"!=e.taxonomy&&"estinv_qty_type"!=e.taxonomy&&"contact_status"!=e.taxonomy?(0,i.A)():(v(!0),"new"==a?(b(a),C(f)):(b(a),C(l)))})(t,"new")}},"+ ",x.add_new," ",e.title,wage.length>0&&"tag"!=e.taxonomy&&"lead_level"!=e.taxonomy&&"lead_source"!=e.taxonomy&&"lead_source"!=e.taxonomy&&"task_status"!=e.taxonomy&&"task_type"!=e.taxonomy&&"task_priority"!=e.taxonomy&&"estinv_qty_type"!=e.taxonomy&&"contact_status"!=e.taxonomy&&(0,l.createElement)(c.A,null)),a&&a.map(((e,t)=>(0,l.createElement)("a",{key:t,onClick:()=>k(e)},e.label))))),g&&(0,l.createElement)(r.A,{...e,taxonomy:e.taxonomy,extra_amount_type:e.extra_amount_type,title:e.title,modalType:E,reload:N,data:y,color:e.color,close:()=>v(!1),formTag:e.formTag}))}},92536:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var l=a(51609),n=a.n(l),s=a(21241),r=a(74263),o=a(51945);function i({label:e=ndpv.i18n.upload,btnClass:t="",imgClass:a="",data:i,multiple:c,clipOnly:m,readOnly:d,...p}){const[h,u]=(0,l.useState)(!1),g=n().createRef(),v=e=>{confirm(ndpv.i18n.aConf)&&(p.multiple?p.changeHandler(e,!0):p.changeHandler(null),r.A.remove(e).then((e=>{e.data.success||e.data.data.forEach((function(e){s.oR.error(e)}))})))},E=e=>{e.preventDefault(),p.library?u(!0):g.current.click()};let b=void 0===p.remove;return(0,l.createElement)("div",{className:"pv-field-logo-wrap "+a},!1,i&&!c&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"pv-field-logo"},"application/pdf"==i.type?(0,l.createElement)("a",{href:i.src,target:"_blank"},i.name):(0,l.createElement)("div",{style:{width:p.small?40:100,display:"inline-block"}},(0,l.createElement)(o.A,{small:i.src,large:i.src})),b&&(0,l.createElement)("span",{className:"pv-field-logo-close",onClick:()=>v(i.id)},"×"))),c&&i.length>0&&(0,l.createElement)(l.Fragment,null,i&&i.map(((e,t)=>(0,l.createElement)("div",{className:"pv-field-logo",key:t,style:{marginRight:10}},"application/pdf"==e.type?e.name:(0,l.createElement)("img",{src:e.src,width:p.small?"40":"100"}),b&&(0,l.createElement)("span",{className:"pv-field-logo-close",onClick:()=>v(e.id)},"×"))))),!p.viewOnly&&(!i||c)&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("input",{type:"file",ref:g,onChange:e=>{(e=>{p.isSelectedFile&&p.selectedFile(e.target.files[0])})(e),(e=>{const t=new FormData;t.append("file",e);const a=p.attach_type||"ndpv";t.append("attach_type",a);let l=void 0!==p.permission;t.append("permission",l),r.A.create(t).then((e=>{e.data.success?p.changeHandler(e.data.data):e.data.data.forEach((function(e){s.oR.error(e)}))}))})(e.target.files[0])},style:{display:"none"}}),!m&&(0,l.createElement)("button",{className:"pv-btn pv-bg-stroke pv-bg-hover-stroke "+t,onClick:e=>E(e),style:{padding:p.padding?p.padding:"10px 20px",border:"1px solid #E2E8F0"},disabled:d},(0,l.createElement)("svg",{width:25,height:25,viewBox:"0 0 14 14",fill:"none"},(0,l.createElement)("path",{d:"M3.66824 10.0907C3.01193 10.0915 2.37842 9.85536 1.88909 9.42768C1.39976 9 1.08901 8.41081 1.01638 7.773C0.943746 7.13518 1.11434 6.49358 1.49547 5.97112C1.87661 5.44866 2.44148 5.08208 3.08188 4.94161C2.89659 4.09662 3.06217 3.21426 3.5422 2.48865C4.02223 1.76304 4.77738 1.25361 5.64153 1.07243C6.50568 0.891248 7.40804 1.05316 8.1501 1.52254C8.89217 1.99193 9.41315 2.73034 9.59844 3.57533H9.66507C10.4913 3.57451 11.2883 3.87392 11.9014 4.41541C12.5146 4.9569 12.9001 5.70185 12.9831 6.50564C13.0662 7.30943 12.8408 8.11472 12.3508 8.76517C11.8608 9.41562 11.1411 9.86483 10.3314 10.0256M8.99875 8.13612L6.99981 6.1815M6.99981 6.1815L5.00087 8.13612M6.99981 6.1815V13",stroke:"#4C6FFF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),(0,l.createElement)("span",null,e)),m&&(0,l.createElement)("span",{className:"pv-paper-clip",onClick:e=>E(e)},(0,l.createElement)("svg",{width:15,height:16,viewBox:"0 0 15 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)("path",{d:"M10.5001 4.24894L3.99228 10.8661C3.77683 11.1039 3.66107 11.4154 3.66897 11.7362C3.67687 12.057 3.80782 12.3624 4.03471 12.5893C4.2616 12.8162 4.56705 12.9472 4.88783 12.9551C5.2086 12.963 5.52013 12.8472 5.75791 12.6318L13.5157 4.76457C13.9466 4.28901 14.1781 3.66595 14.1623 3.0244C14.1465 2.38286 13.8846 1.77195 13.4309 1.31817C12.9771 0.864391 12.3662 0.602491 11.7246 0.586696C11.0831 0.5709 10.46 0.802418 9.98447 1.23332L2.22666 9.10051C1.52425 9.80292 1.12964 10.7556 1.12964 11.7489C1.12964 12.7423 1.52425 13.695 2.22666 14.3974C2.92907 15.0998 3.88174 15.4944 4.8751 15.4944C5.86845 15.4944 6.82112 15.0998 7.52353 14.3974L13.9376 7.99894",stroke:"#2D3748",strokeLinecap:"round",strokeLinejoin:"round"})))))}},36478:(e,t,a)=>{"use strict";a.d(t,{_H:()=>c,cK:()=>i,sf:()=>m});var l=a(51609),n=a(21241),s=a(55800),r=a(394),o=a(29425);const i=(0,l.createContext)({});function c({submitHandler:e,submitPreloader:t=!1,close:a,submitLabel:s,children:r,formTag:c=!0,isMultipart:m=!1,isPro:p=!1,showSubmitButton:h=!0}){const[u,g]=(0,l.useState)({}),[v,E]=(0,l.useState)({}),[b,f]=(0,l.useState)({}),[y,C]=(0,l.useState)(!1),[_,N]=(0,l.useState)();(0,l.useEffect)((()=>{y&&_&&(0===w(v)?e(_):n.oR.error("Invalid submission!!!"),C(!1))}),[y,v]);const w=e=>e&&"object"==typeof e?Object.values(e).reduce((function(e,t){return e+t.length}),0):0,S=e=>{e.preventDefault(),(0,o.hs)(u,g,E),C(!0),N(e)},k=(0,l.createElement)(l.Fragment,null,r,(0,l.createElement)(d,{close:a,submitPreloader:t,submitLabel:s,formTag:c,onSubmit:S,isPro:p,showSubmitButton:h}));return(0,l.createElement)(i.Provider,{value:{form:u,setForm:g,setErrorFields:E,groupFields:b,setGroupFields:f}},c?m?(0,l.createElement)("form",{onSubmit:S,encType:"multipart/form-data"},k):(0,l.createElement)("form",{onSubmit:S},k):(0,l.createElement)("div",null,k))}function m({formStyleClass:e,children:t}){return(0,l.createElement)("div",{className:"pv-content"},(0,l.createElement)("div",{className:e},t))}function d({close:e,submitPreloader:t,submitLabel:a,formTag:n,onSubmit:o,isPro:i,showSubmitButton:c}){const m=ndpv.i18n;return(0,l.createElement)("div",{className:"pv-modal-footer"},(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col"},e&&(0,l.createElement)("button",{type:"reset",className:"pv-btn pv-text-hover-blue",onClick:()=>e()},m.cancel)),c&&(0,l.createElement)("div",{className:"col"},(0,l.createElement)("button",{type:"submit",disabled:t,...n?{}:{onClick:o},className:"pv-btn pv-bg-blue pv-bg-hover-blue  pv-float-right pv-color-white"},t&&(0,l.createElement)(s.A,{submit:!0})," ",a||m.save,i&&(0,l.createElement)(r.A,{blueBtn:!0})))))}},8935:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var l=a(51609),n=a(81083);const s=e=>{const t=ndpv.i18n,{data:a,handleChange:s,selectCountry:r}=e;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md-6"},(0,l.createElement)("label",{htmlFor:"form-country"},t.country),(0,l.createElement)(n.wP,{value:a.country,valueType:"short",onChange:e=>r(e)})),(0,l.createElement)("div",{className:"col-md-6"},(0,l.createElement)("label",{htmlFor:"form-region"},t.state_region),(0,l.createElement)("input",{id:"form-region",type:"text",name:"region",value:a.region,onChange:s}))),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col"},(0,l.createElement)("label",{htmlFor:"form-address"},t.addr),(0,l.createElement)("input",{id:"form-address",type:"text",name:"address",value:a.address,onChange:s}))),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-city"},t.city),(0,l.createElement)("input",{id:"field-city",type:"text",name:"city",value:a.city,onChange:s})),(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-zip"},t.zip),(0,l.createElement)("input",{id:"field-zip",type:"text",name:"zip",value:a.zip,onChange:s}))))}},95231:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var l=a(51609),n=a(43065);const s=({label:e,type:t="button",iconName:a,size:s,cssStyle:r,handleClick:o,buttonStyle:i="default"})=>{const c={white:{button:{css:{},class:"pv-bg-stroke pv-bg-hover-stroke"},icon:"blue"},default:{button:{css:{},class:"pv-bg-blue pv-color-white pv-bg-air-white pv-bg-hover-blue"},icon:"default"}};return(0,l.createElement)("button",{type:t,style:{margin:"5px",...r,...c[i].button.css},className:"pv-btn "+{big:"pv-btn-big",medium:" pv-btn-medium"}[s]+" "+c[i].button.class,onClick:e=>{e.preventDefault(),o()}},(0,l.createElement)(n.BS,{name:a,style:c[i].icon}),e)}},97300:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var l=a(51609);const n=({style:e,id:t,name:a,label:n={},changeHandler:s,isChecked:r})=>{const o=(0,l.createElement)("input",{type:"checkbox",id:t,name:a,checked:r,onChange:s}),i=(0,l.createElement)("div",{className:"pv-field-switch"},(0,l.createElement)("label",{className:"pv-switch"},o,(0,l.createElement)("span",{className:"pv-switch-slider pv-round"}))),c="left"===n?.position?"marginRight":"marginLeft",m=n?.text&&(0,l.createElement)("label",{id:t,style:{[c]:"10px"}},n.text);return(0,l.createElement)(l.Fragment,null,"left"===n?.position&&m,"switch"===e?i:o,"right"===n?.position&&m)}},62926:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var l=a(51609),n=a(36478),s=a(29425);const r=({label:e,wrapperClassName:t="col",validation:a={},onChange:r=(()=>{}),...o})=>{var i;const{form:c,setForm:m,setErrorFields:d,setGroupFields:p}=(0,l.useContext)(n.cK),{name:h,value:u=""}=o,g=c[h]?.validation||{};(0,l.useEffect)((()=>{h in c||m((e=>({...e,[h]:{...e[h],value:u,validation:a}})))}),[]),(0,l.useEffect)((()=>{m((e=>({...e,[h]:{...e[h],value:u}})))}),[u]);const v=null!==(i=c[h]?.validation?.required?.value)&&void 0!==i&&i;return(0,l.createElement)("div",{className:t},(0,l.createElement)("label",{htmlFor:o.id},e," ",v&&(0,l.createElement)("span",{style:{color:"red"},title:"This field is required"},"*")),(0,l.createElement)("input",{onChange:e=>{m((t=>({...t,[h]:{...t[h],value:e.target.value}}))),(0,s.UF)(h,e.target.value,c,m,d),r(e)},...o}),Object.entries(g).map((([e,{error:t=""}])=>(0,l.createElement)("div",{key:e,style:{color:"#fd5870",marginTop:"4px"}},t.charAt(0).toUpperCase()+t.slice(1)))))}},53417:(e,t,a)=>{"use strict";a.d(t,{$n:()=>l.A,EY:()=>s.A,Sc:()=>n.A,pV:()=>r.A});var l=a(95231),n=a(97300),s=a(62926),r=a(8935)},29425:(e,t,a)=>{"use strict";a.d(t,{UF:()=>n,hs:()=>s});const l={required:"field is required",email:"is invalid"},n=(e,t,a,l,n)=>{for(const[s,o]of Object.entries(a[e].validation))r(s,o,e,t,l,n)},s=(e,t,a)=>{for(const[l,{value:n,validation:s}]of Object.entries(e))for(const[e,o]of Object.entries(s))r(e,o,l,n,t,a)},r=(e,t,a,l,n,s)=>{switch(e){case"required":o(e,t,a,l,n,s);break;case"email":i(e,t,a,l,n,s)}},o=(e,t,a,l,n,s)=>{t?.value&&0===l?.length?m(e,t,a,n,s):d(e,a,n,s,!0)},i=(e,t,a,l,n,s)=>{!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,63}$/.test(l)&&l.length>0?m(e,t,a,n,s):d(e,a,n,s,!0)},c=(e,t,a,l,n="default")=>{e((e=>(n="default"!==n?n:e[t].validation[a].value,{...e,[t]:{...e[t],validation:{...e[t].validation,[a]:{...e[t].validation[a],value:n,error:l}}}})))},m=(e,t,a,n,s)=>{var r;const o=null!==(r=t.message)&&void 0!==r?r:a+" "+l[e];c(n,a,e,o),s((t=>{const l=Array.isArray(t[a])?[...t[a],e]:[e];return{...t,[a]:[...new Set(l)]}}))},d=(e,t,a,l,n=!1)=>{c(a,t,e,"",n),l((a=>{if(a[t]&&Array.isArray(a[t])){const l=a[t].indexOf(e);-1!==l&&a[t].splice(l,1)}return a}))}},25928:(e,t,a)=>{"use strict";function l(){document.getElementById("pv-pro-alert").style.display="block"}a.d(t,{A:()=>l})},394:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var l=a(51609);const n=e=>(0,l.createElement)(l.Fragment,null,wage.length>0&&(0,l.createElement)("span",{className:"pv-pro-label",onClick:()=>{document.getElementById("pv-pro-alert").style.display="block"},style:{background:e.blueBtn?"#FFEED9":"auto"}},(0,l.createElement)("svg",{width:13,height:10,viewBox:"0 0 13 10",fill:"none"},(0,l.createElement)("path",{d:"M1.71013 8.87452C1.72412 8.93204 1.7495 8.98616 1.78477 9.0337C1.82003 9.08124 1.86447 9.12123 1.91545 9.15131C1.96643 9.18139 2.02292 9.20094 2.08158 9.20882C2.14025 9.2167 2.19989 9.21274 2.257 9.19718C4.86395 8.47534 7.61803 8.47534 10.225 9.19718C10.2821 9.21274 10.3417 9.2167 10.4004 9.20882C10.4591 9.20094 10.5156 9.18139 10.5665 9.15131C10.6175 9.12123 10.6619 9.08124 10.6972 9.0337C10.7325 8.98616 10.7579 8.93204 10.7718 8.87452L12.1664 2.95187C12.1855 2.87259 12.1821 2.78954 12.1566 2.71209C12.131 2.63464 12.0843 2.56588 12.0218 2.51356C11.9592 2.46123 11.8833 2.42744 11.8025 2.41599C11.7218 2.40454 11.6395 2.41588 11.5648 2.44874L8.79763 3.67921C8.69737 3.72336 8.5843 3.72879 8.48027 3.69445C8.37624 3.6601 8.28863 3.58843 8.23435 3.49327L6.62653 0.594837C6.5887 0.526455 6.53324 0.469456 6.46592 0.429765C6.3986 0.390074 6.32187 0.369141 6.24372 0.369141C6.16557 0.369141 6.08885 0.390074 6.02153 0.429765C5.95421 0.469456 5.89874 0.526455 5.86091 0.594837L4.2531 3.49327C4.19882 3.58843 4.1112 3.6601 4.00717 3.69445C3.90314 3.72879 3.79008 3.72336 3.68982 3.67921L0.922629 2.44874C0.847988 2.41588 0.765648 2.40454 0.684901 2.41599C0.604154 2.42744 0.528216 2.46123 0.465658 2.51356C0.403099 2.56588 0.35641 2.63464 0.330861 2.71209C0.305312 2.78954 0.301919 2.87259 0.321067 2.95187L1.71013 8.87452Z",fill:"#FF6B00"})),"Pro"))},82558:(e,t,a)=>{"use strict";a.d(t,{A:()=>m});var l=a(51609),n=a(92536),s=a(43065),r=(a(17604),a(46129)),o=a(53417),i=a(36478);class c extends l.Component{constructor(e){super(e),this.initialState={id:null,first_name:"",org_name:"",org_id:null,email:"",mobile:"",web:"",country:"",region:"",address:"",city:"",zip:"",img:null,client_portal:!1,date:!1},this.state={form:this.initialState},this.selectCountry=this.selectCountry.bind(this)}handleChange=e=>{const t=e.target,{name:a}=t,l="checkbox"==t.type?t.checked:t.value;this.setState({form:{...this.state.form,[a]:l}})};selectCountry(e){this.setState({form:{...this.state.form,country:e}})}selectRegion(e){this.setState({form:{...this.state.form,region:e}})}componentDidMount(){this.editData()}componentDidUpdate(){this.editData()}editData=()=>{"edit"==this.props.modalType?this.state.form.id!=this.props.data.id&&this.setState({form:this.props.data}):null!=this.state.form.id&&this.setState({form:this.initialState})};handleContactChange=(e,t)=>{let a={...this.state.form};"person"==t?a.first_name=e:a.org_name=e,this.setState({form:a})};handleContactSelect=(e,t)=>{let a={...this.state.form};if(!e)return"person"==t?a.person_id=null:a.org_id=null,void this.setState({form:a});"person"==t?(a.first_name=e.first_name,a.person_id=e?e.id:null,a.email=e?e.email:"",a.web=e?e.web:"",a.mobile=e?e.mobile:"",a.country=e?e.country:"",a.region=e?e.region:"",a.address=e?e.address:"",a.city=e?e.city:"",a.zip=e?e.zip:"",a.img=e?e.img:""):(a.org_name=e.name,a.org_id=e?e.id:null,a.first_name||(a.email=e?e.email:"",a.web=e?e.web:"",a.mobile=e?e.mobile:"",a.country=e?e.country:"",a.region=e?e.region:"",a.address=e?e.address:"",a.city=e?e.city:"",a.zip=e?e.zip:"",a.img=e?e.img:"")),this.setState({form:a})};handleSubmit=e=>{e.preventDefault();let t={...this.state.form};t.img&&(t.img=t.img.id),this.props.handleSubmit(t)};handleImgChange=(e,t=null)=>{let a={...this.state.form};a.img=e,this.setState({form:a})};render(){const e=this.state.form,t=ndpv.i18n,a="new"==this.props.modalType?t.add_new_ct:t.edit_ct;return(0,l.createElement)("div",{className:"pv-overlay pv-show"},(0,l.createElement)("div",{className:"pv-modal-content"},(0,l.createElement)("div",{className:"pv-modal-header pv-gradient"},(0,l.createElement)("span",{className:"pv-close",onClick:()=>this.props.close()},(0,l.createElement)(s.OM,null)),(0,l.createElement)("h2",{className:"pv-modal-title"},a)),(0,l.createElement)(i._H,{submitHandler:this.handleSubmit,close:this.props.close},(0,l.createElement)(i.sf,{formStyleClass:"pv-form-style-one"},(0,l.createElement)(r.A,{first_name:e.first_name,org_name:e.org_name,review:!0,onChange:this.handleContactChange,onSelect:this.handleContactSelect}),(0,l.createElement)("div",{className:"row"},(0,l.createElement)(o.EY,{label:t.email,id:"form-email",type:"email",wrapperClassName:"col-lg",name:"email",value:e.email,onChange:this.handleChange,validation:{required:{value:!0},email:{value:!0}}}),(0,l.createElement)("div",{className:"col-lg"},(0,l.createElement)("label",{htmlFor:"form-mobile"},t.mob),(0,l.createElement)("input",{id:"form-mobile",type:"text",name:"mobile",value:e.mobile,onChange:this.handleChange}))),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-lg"},(0,l.createElement)("label",{htmlFor:"form-web"},t.web),(0,l.createElement)("input",{id:"form-web",type:"text",name:"web",value:e.web,onChange:this.handleChange}))),(0,l.createElement)(o.pV,{data:e,selectCountry:this.selectCountry,handleChange:this.handleChange}),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col"},(0,l.createElement)("label",{htmlFor:"field-img"},t.img),(0,l.createElement)(n.A,{data:e.img,changeHandler:this.handleImgChange}))),!wage.length&&this.props.single&&e.is_client&&(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col"},(0,l.createElement)("label",{id:"form-client_portal"},"Client Portal Access"),(0,l.createElement)("div",{className:"pv-field-switch pv-ml-10"},(0,l.createElement)("label",{className:"pv-switch"},(0,l.createElement)("input",{type:"checkbox",id:"form-client_portal",name:"client_portal",checked:e.client_portal?"checked":"",onChange:this.handleChange}),(0,l.createElement)("span",{className:"pv-switch-slider pv-round"})))))))))}}const m=c},45224:(e,t,a)=>{"use strict";a.d(t,{A:()=>b});var l=a(51609),n=a(21241),s=a(56303),r=a(7364),o=a(92536),i=a(43065),c=a(58322),m=a(24706),d=a(46129),p=a(57505),h=a(17604),u=a(56564),g=a(53417),v=a(36478);class E extends l.Component{constructor(e){if(super(e),this.initialState={id:null,title:"",first_name:"",org_name:"",person_id:null,org_id:null,email:"",mobile:"",lead_id:"",stage_id:"",budget:"",currency:"USD",probability:50,tags:[],desc:"",country:"",region:"",address:"",city:"",zip:"",img:"",date:!1},this.props.parentData){this.fromClient=!0;const{person:e,org:t}=this.props.parentData,a=(0,u.rL)(e,t);Object.keys(a).length>0&&(this.initialState.first_name=a.first_name,this.initialState.email=a.email,this.initialState.mobile=a.mobile,this.initialState.org_name=a.name)}this.state={submitPreloader:!1,form:this.initialState,custom_field:!1,stages:[],tags:[]},this.selectCountry=this.selectCountry.bind(this)}componentDidMount(){if(this.props.custom_field){let e={};this.props.custom_field.map(((t,a)=>{e[t.id]=""}));const t={...this.state.form,...e};this.setState({form:t,custom_field:!0})}this.editData()}componentDidUpdate(){this.editData()}editData=()=>{if("edit"==this.props.modalType||"move"==this.props.modalType){if(this.state.form.id!=this.props.data.id){let e={...this.props.data};"move"==this.props.modalType&&(e.lead_id=e.id,e.probability=50),e.first_name=e.person?e.person.first_name:"",e.person?(e.person_id=e.person?e.person.id:null,e.email=e.person?e.person.email:"",e.mobile=e.person?e.person.mobile:"",e.web=e.person?e.person.web:"",e.country=e.person?e.person.country:"",e.region=e.person?e.person.region:"",e.address=e.person?e.person.address:"",e.city=e.person?e.person.city:"",e.zip=e.person?e.person.zip:"",e.img=e.person?e.person.img:""):(e.email=e.org?e.org.email:"",e.mobile=e.org?e.org.mobile:"",e.web=e.org?e.org.web:"",e.country=e.org?e.org.country:"",e.region=e.org?e.org.region:"",e.address=e.org?e.org.address:"",e.city=e.org?e.org.city:"",e.zip=e.org?e.org.zip:"",e.img=e.org?e.org.img:""),e.org_name=e.org?e.org.name:"",e.org&&(e.org_id=e.org?e.org.id:null),this.setState({form:e})}}else null!=this.state.form.id&&this.setState({form:this.initialState})};handleChange=e=>{const t=e.target,a=t.name,l="checkbox"===t.type?t.checked:t.value;this.setState({form:{...this.state.form,[a]:l}})};handleCFChange=e=>{const{name:t,value:a}=e.target;this.setState({form:{...this.state.form,[t]:a}})};currencyChange=e=>{this.setState({form:{...this.state.form,currency:e}})};handleStageChange=e=>{this.setState({form:{...this.state.form,stage_id:e}})};handleTagChange=e=>{this.setState({form:{...this.state.form,tags:e}})};selectCountry(e){this.setState({form:{...this.state.form,country:e}})}selectRegion(e){this.setState({form:{...this.state.form,region:e}})}handleSubmit=e=>{e.preventDefault();let t={...this.state.form};if(t.stage_id&&(t.stage_id=t.stage_id.id),t.stage_id){if(t.img&&(t.img=t.img.id),t.tags.length){let e=t.tags.map((function(e){return e.id}));t.tags=e}if(this.props.reload)this.setState({submitPreloader:!0}),"move"==this.props.modalType?s.A.add("deals",t).then((e=>{if(this.setState({submitPreloader:!1}),e.data.success){n.oR.success(ndpv.i18n.aDelM);let t=e.data.data;this.props.close(),this.props.navigate(`/deal/${t}`),(0,u.QF)(),this.props.reload()}else e.data.data.forEach((function(e){n.oR.error(e)}))})):s.A.edit("deals",t.id,t).then((e=>{this.setState({submitPreloader:!1}),e.data.success?(this.props.close(),n.oR.success(ndpv.i18n.aUpd),this.props.reload()):e.data.data.forEach((function(e,t,a){n.oR.error(e)}))}));else{let e=null;this.props.boardView||(e={table_view:!0}),this.props.handleSubmit(t,null,e)}}else n.oR.error(ndpv.i18n.stage+" "+ndpv.i18n.isReq)};handleContactChange=(e,t)=>{let a={...this.state.form};"person"==t?a.first_name=e:a.org_name=e,this.setState({form:a})};handleContactSelect=(e,t)=>{let a={...this.state.form};if(!e)return"person"==t?a.person_id=null:a.org_id=null,void this.setState({form:a});"person"==t?(a.first_name=e.first_name,a.person_id=e?e.id:null,a.email=e?e.email:"",a.mobile=e?e.mobile:"",a.web=e?e.web:"",a.country=e?e.country:"",a.region=e?e.region:"",a.address=e?e.address:"",a.img=e?e.img:""):(a.org_name=e.name,a.org_id=e?e.id:null),this.setState({form:a})};handleImgChange=(e,t=null)=>{let a={...this.state.form};a.img=e,this.setState({form:a})};render(){const e=ndpv.i18n,t=this.state.form,a=t.probability/100*100;let n="";const s=this.props.modalType;"new"==s?n=e.new:"edit"==s?n=e.edit:"move"==s&&(n=e.moveto);const r=this.props.reload?this.state.submitPreloader:this.props.submitPreloader;return(0,l.createElement)("div",{className:"pv-overlay pv-show"},(0,l.createElement)("div",{className:"pv-modal-content"},(0,l.createElement)("div",{className:"pv-modal-header pv-gradient"},(0,l.createElement)("span",{className:"pv-close",onClick:()=>this.props.close()},(0,l.createElement)(i.OM,null)),(0,l.createElement)("h2",{className:"pv-modal-title"},n," ",e.deal),(0,l.createElement)("p",null,(0,h.sprintf)(e.formDesc,n,e.deal))),(0,l.createElement)(v._H,{submitPreloader:r,submitHandler:this.handleSubmit,close:this.props.close},(0,l.createElement)(v.sf,{formStyleClass:"pv-form-style-one"},(0,l.createElement)("div",{className:"row"},(0,l.createElement)(g.EY,{label:e.title,id:"field-title",type:"text",name:"title",wrapperClassName:"col-md",value:t.title,onChange:this.handleChange,validation:{required:{value:!0}}})),(0,l.createElement)(d.A,{first_name:t.first_name,nameLabel:e.ct_name,org_name:t.org_name,fromClient:this.fromClient,onChange:this.handleContactChange,onSelect:this.handleContactSelect}),(0,l.createElement)("div",{className:"row"},(0,l.createElement)(g.EY,{label:e.email,id:"form-email",type:"email",name:"email",wrapperClassName:"col-lg",disabled:this.fromClient,value:t.email,onChange:this.handleChange,validation:{required:{value:!0},email:{value:!0}}}),(0,l.createElement)("div",{className:"col-lg"},(0,l.createElement)("label",{htmlFor:"form-mobile"},e.mob),(0,l.createElement)("input",{id:"form-mobile",type:"text",name:"mobile",value:t.mobile,disabled:this.fromClient,onChange:this.handleChange}))),(0,l.createElement)(g.pV,{data:t,selectCountry:this.selectCountry,handleChange:this.handleChange}),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-stage_id"},e.stage),(0,l.createElement)(m.A,{selectedFirst:!0,modalType:s,data:t.stage_id,taxonomy:"deal_stage",title:e.stage,onChange:this.handleStageChange,formTag:!1,color:!0}))),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-budget"},e.budget),(0,l.createElement)("input",{id:"field-budget",type:"number",name:"budget",value:t.budget,onChange:this.handleChange})),(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-currency"},e.cur),(0,l.createElement)(c.A,{key:t.currency,onChange:this.currencyChange,value:t.currency,form:!0}))),!wage.length&&(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-probability"},e.proba," ",(0,l.createElement)("span",{style:{position:"absolute",right:"15px"}},"(",t.probability,"%)")),(0,l.createElement)("input",{id:"field-probability",type:"range",min:"1",max:"100",name:"probability",value:t.probability,style:{background:`linear-gradient(to right, #3264fe ${a}%, #ccd6ff ${a}%)`},onChange:this.handleChange}))),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-tags"},e.tag),(0,l.createElement)("div",{className:"pi-field-multi"},(0,l.createElement)(m.A,{onChange:this.handleTagChange,data:t.tags,taxonomy:"tag",title:e.tag,formTag:!1,multi:!0})))),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col"},(0,l.createElement)("label",{htmlFor:"field-desc"},e.desc),(0,l.createElement)("textarea",{id:"form-desc",rows:2,name:"desc",value:t.desc.replace(/<br \/>/gi,""),onChange:this.handleChange}))),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col"},(0,l.createElement)("label",{htmlFor:"field-img"},e.ct_img),(0,l.createElement)(o.A,{data:t.img,changeHandler:this.handleImgChange}))),this.state.custom_field&&(0,l.createElement)(p.A,{mod:"deal",type:this.props.modalType,form:t,onChange:this.handleCFChange})))))}}const b=(0,r.A)(E)},86184:(e,t,a)=>{"use strict";a.d(t,{A:()=>g});var l=a(51609),n=a(43065),s=a(17604),r=a(21241),o=a(92536),i=a(58322),c=a(24706),m=a(46129),d=a(57505),p=a(56303),h=a(53417),u=a(36478);class g extends l.Component{constructor(e){super(e),this.initialState={id:null,first_name:"",org_name:"",person_id:null,org_id:null,email:"",mobile:"",web:"",source_id:"",level_id:"",tags:[],budget:"",currency:"USD",desc:"",note:"",country:"",region:"",address:"",city:"",zip:"",img:"",date:!1},this.state={submitPreloader:!1,form:this.initialState,custom_field:!1,levels:[],tags:[],personList:[],orgList:[]},this.selectCountry=this.selectCountry.bind(this)}handleChange=(e,t="")=>{const{name:a,value:l}=e.target;if("contact"==t){let e={...this.state.form.contact,[a]:l},t={...this.state.form};t.contact=e,this.setState({form:t})}else this.setState({form:{...this.state.form,[a]:l}})};handleCFChange=e=>{const{name:t,value:a}=e.target;this.setState({form:{...this.state.form,[t]:a}})};componentDidMount(){if(this.props.custom_field){let e={};this.props.custom_field.map(((t,a)=>{e[t.slug]=""}));const t={...this.state.form,...e};this.setState({form:t,custom_field:!0})}let e=new URLSearchParams({page:1,per_page:10}).toString();p.A.get("persons",e).then((e=>{if(e.data.success){let t=e.data.data.result;this.setState({personList:t})}})),p.A.get("organizations",e).then((e=>{if(e.data.success){let t=e.data.data.result;this.setState({orgList:t})}})),this.editData()}componentDidUpdate(){this.editData()}editData=()=>{if("edit"==this.props.modalType){if(this.state.form.id!=this.props.data.id){let e=this.props.data;e.first_name=e.person?e.person.first_name:"",e.person?(e.person_id=e.person?e.person.id:null,e.email=e.person?e.person.email:"",e.web=e.person?e.person.web:"",e.mobile=e.person?e.person.mobile:"",e.country=e.person?e.person.country:"",e.region=e.person?e.person.region:"",e.address=e.person?e.person.address:"",e.city=e.person?e.person.city:"",e.zip=e.person?e.person.zip:"",e.img=e.person?e.person.img:""):(e.email=e.org?e.org.email:"",e.web=e.org?e.org.web:"",e.mobile=e.org?e.org.mobile:"",e.country=e.org?e.org.country:"",e.region=e.org?e.org.region:"",e.address=e.org?e.org.address:"",e.city=e.org?e.org.city:"",e.zip=e.org?e.org.zip:"",e.img=e.org?e.org.img:""),e.org_name=e.org?e.org.name:"",e.org&&(e.org_id=e.org?e.org.id:null),this.setState({form:e})}}else null!=this.state.form.id&&this.setState({form:this.initialState})};currencyChange=e=>{this.setState({form:{...this.state.form,currency:e}})};handleLevelChange=e=>{this.setState({form:{...this.state.form,level_id:e}})};handleTagChange=e=>{this.setState({form:{...this.state.form,tags:e}})};selectCountry(e){this.setState({form:{...this.state.form,country:e}})}handleSubmit=e=>{e.preventDefault();let t={...this.state.form};if(t.level_id&&(t.level_id=t.level_id.id),t.img&&(t.img=t.img.id),t.tags.length){let e=t.tags.map((function(e){return e.id}));t.tags=e}delete t.person,delete t.org,this.props.reload?(this.setState({submitPreloader:!0}),p.A.edit("leads",t.id,t).then((e=>{this.setState({submitPreloader:!1}),e.data.success?(this.props.close(),r.oR.success(ndpv.i18n.aUpd),this.props.reload()):e.data.data.forEach((function(e){r.oR.error(e)}))}))):this.props.handleSubmit(t)};handleContactChange=(e,t)=>{let a={...this.state.form};"person"==t?a.first_name=e:a.org_name=e,this.setState({form:a})};handleContactSelect=(e,t)=>{let a={...this.state.form};if(!e)return"person"==t?a.person_id=null:a.org_id=null,void this.setState({form:a});"person"==t?(a.first_name=e.first_name,a.person_id=e?e.id:null,a.email=e?e.email:"",a.mobile=e?e.mobile:"",a.web=e?e.web:"",a.country=e?e.country:"",a.region=e?e.region:"",a.address=e?e.address:"",a.img=e?e.img:""):(a.org_name=e.name,a.org_id=e?e.id:null),this.setState({form:a})};handleImgChange=e=>{let t={...this.state.form};t.img=e,this.setState({form:t})};render(){const e=this.state.form,t=ndpv.i18n,a="new"==this.props.modalType?t.add_new:t.edit,r=this.props.reload?this.state.submitPreloader:this.props.submitPreloader,p={label:t.email,type:"email",id:"form-email",name:"email",value:e.email,wrapperClassName:"col-lg",onChange:this.handleChange,validation:{required:{value:!0,message:"Email Required"},email:{value:!0}}},g={label:t.mob,id:"form-mobile",type:"text",name:"mobile",value:e.mobile,wrapperClassName:"col-lg",onChange:this.handleChange};return(0,l.createElement)("div",{className:"pv-overlay pv-show"},(0,l.createElement)("div",{className:"pv-modal-content"},(0,l.createElement)("div",{className:"pv-modal-header pv-gradient"},(0,l.createElement)("span",{className:"pv-close",onClick:()=>this.props.close()},(0,l.createElement)(n.OM,null)),(0,l.createElement)("h2",{className:"pv-modal-title"},a," ",t.lead),(0,l.createElement)("p",null,(0,s.sprintf)(t.formDesc,a,t.lead))),(0,l.createElement)(u._H,{submitPreloader:r,submitHandler:this.handleSubmit,close:this.props.close},(0,l.createElement)(u.sf,{formStyleClass:"pv-form-style-one"},(0,l.createElement)(m.A,{first_name:e.first_name,org_name:e.org_name,onChange:this.handleContactChange,onSelect:this.handleContactSelect}),(0,l.createElement)("div",{className:"row"},(0,l.createElement)(h.EY,{...p}),(0,l.createElement)(h.EY,{...g})),(0,l.createElement)(h.pV,{data:e,selectCountry:this.selectCountry,handleChange:this.handleChange}),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-budget"},t.budget),(0,l.createElement)("input",{id:"field-budget",type:"number",name:"budget",value:e.budget,onChange:this.handleChange})),(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-currency"},t.cur),(0,l.createElement)(i.A,{key:e.currency,onChange:this.currencyChange,value:e.currency,form:!0}))),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-level_id"},t.level),(0,l.createElement)(c.A,{data:e.level_id,taxonomy:"lead_level",title:t.level,onChange:this.handleLevelChange,formTag:!1,color:!0})),(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-tags"},t.tag),(0,l.createElement)("div",{className:"pi-field-multi"},(0,l.createElement)(c.A,{onChange:this.handleTagChange,data:e.tags,taxonomy:"tag",title:t.tag,formTag:!1,multi:!0})))),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col"},(0,l.createElement)("label",{htmlFor:"form-desc"},t.desc),(0,l.createElement)("textarea",{id:"form-desc",type:"text",name:"desc",value:e.desc.replace(/<br \/>/gi,""),onChange:this.handleChange}))),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col"},(0,l.createElement)("label",{htmlFor:"field-img"},t.ct_img),(0,l.createElement)(o.A,{data:e.img,changeHandler:this.handleImgChange}))),this.state.custom_field&&(0,l.createElement)(d.A,{mod:"lead",type:this.props.modalType,form:e,onChange:this.handleCFChange})))))}}},84424:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>q});var l=a(51609),n=a.n(l),s=a(56303),r=a(56564),o=a(394),i=a(7834),c=a(43065);const m=e=>{const t=(0,l.useRef)(),[a,n]=(0,l.useState)(!1),s=(0,l.useCallback)((()=>n(!1)),[]);(0,i.A)(t,s),e.row;const r=ndpv.i18n;return(0,l.createElement)("div",{className:"pv-action-content pv-action-btn pv-bg-stroke pv-bg-shadow "+(e.class?e.class:""),style:e.padding?{padding:e.padding}:{}},(0,l.createElement)("button",{className:a?"dpv-active":"",onClick:()=>n((e=>!e))},(0,l.createElement)(c.ff,null)),a&&(0,l.createElement)("div",{className:"pv-dropdown-content pv-show",ref:t},(0,l.createElement)("a",{onClick:()=>{n(!1),e.edit()}},r.edit),(0,l.createElement)("a",{onClick:()=>{n(!1),e.del(e.module,e.id)}},r.del)))};var d=a(24706),p=a(55800),h=a(82558),u=a(92536),g=a(46129),v=a(53417),E=a(36478);class b extends l.Component{constructor(e){super(e),this.initialState={id:null,name:"",first_name:"",person_id:null,email:"",web:"",mobile:"",country:"",region:"",address:"",city:"",zip:"",logo:null,client_portal:!1,date:!1},this.state={form:this.initialState},this.selectCountry=this.selectCountry.bind(this)}handleChange=e=>{const t=e.target,{name:a}=t,l="checkbox"==t.type?t.checked:t.value;this.setState({form:{...this.state.form,[a]:l}})};selectCountry(e){this.setState({form:{...this.state.form,country:e}})}selectRegion(e){this.setState({form:{...this.state.form,region:e}})}componentDidMount(){this.editData()}componentDidUpdate(){this.editData()}editData=()=>{"edit"==this.props.modalType?this.state.form.id!=this.props.data.id&&this.setState({form:this.props.data}):null!=this.state.form.id&&this.setState({form:this.initialState})};handleContactChange=(e,t)=>{let a={...this.state.form};"person"==t?a.first_name=e:a.name=e,this.setState({form:a})};handleContactSelect=(e,t)=>{let a={...this.state.form};if(!e)return"person"==t?a.person_id=null:a.org_id=null,void this.setState({form:a});"person"==t?(a.first_name=e.first_name,a.person_id=e?e.id:null,a.email=e?e.email:"",a.web=e?e.web:"",a.mobile=e?e.mobile:"",a.country=e?e.country:"",a.region=e?e.region:"",a.address=e?e.address:"",a.city=e?e.city:"",a.zip=e?e.zip:"",a.logo=e?e.logo:""):(a.org_name=e.name,a.org_id=e?e.id:null,a.name||(a.email=e?e.email:"",a.web=e?e.web:"",a.mobile=e?e.mobile:"",a.country=e?e.country:"",a.region=e?e.region:"",a.address=e?e.address:"",a.city=e?e.city:"",a.zip=e?e.zip:"",a.logo=e?e.logo:"")),this.setState({form:a})};handleSubmit=e=>{e.preventDefault();let t={...this.state.form};t.logo&&(t.logo=t.logo.id),this.props.handleSubmit(t)};handleLogoChange=(e,t=null)=>{let a={...this.state.form};a.logo=e,this.setState({form:a})};render(){const e=this.state.form,t=ndpv.i18n,a="new"==this.props.modalType?t.add_new:t.edit;return(0,l.createElement)("div",{className:"pv-overlay pv-show"},(0,l.createElement)("div",{className:"pv-modal-content"},(0,l.createElement)("div",{className:"pv-modal-header pv-gradient"},(0,l.createElement)("span",{className:"pv-close",onClick:()=>this.props.close()},(0,l.createElement)(c.OM,null)),(0,l.createElement)("h2",{className:"pv-modal-title"},a," ",t.org),(0,l.createElement)("p",null,sprintf(t.formDesc,a,t.org))),(0,l.createElement)(E._H,{submitHandler:this.handleSubmit,close:this.props.close},(0,l.createElement)(E.sf,{formStyleClass:"pv-form-style-one"},(0,l.createElement)(g.A,{org_name:e.name,first_name:e.first_name,review:!0,personLast:!0,onChange:this.handleContactChange,onSelect:this.handleContactSelect}),(0,l.createElement)("div",{className:"row"},(0,l.createElement)(v.EY,{label:t.email,id:"form-email",type:"email",wrapperClassName:"col-lg",name:"email",value:e.email,onChange:this.handleChange,validation:{required:{value:!0},email:{value:!0}}}),(0,l.createElement)("div",{className:"col-lg"},(0,l.createElement)("label",{htmlFor:"form-mobile"},t.mob),(0,l.createElement)("input",{id:"form-mobile",type:"text",name:"mobile",value:e.mobile,onChange:this.handleChange}))),(0,l.createElement)(v.pV,{data:e,selectCountry:this.selectCountry,handleChange:this.handleChange}),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-lg"},(0,l.createElement)("label",{htmlFor:"form-web"},t.web),(0,l.createElement)("input",{id:"form-web",type:"text",name:"web",value:e.web,onChange:this.handleChange}))),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col"},(0,l.createElement)("label",{htmlFor:"field-logo"},t.logo),(0,l.createElement)(u.A,{data:e.logo,changeHandler:this.handleLogoChange}))),!wage.length&&this.props.single&&(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col"},(0,l.createElement)("label",{id:"form-client_portal"},"Client Portal Access"),(0,l.createElement)("div",{className:"pv-field-switch pv-ml-10"},(0,l.createElement)("label",{className:"pv-switch"},(0,l.createElement)("input",{type:"checkbox",id:"form-client_portal",name:"client_portal",checked:e.client_portal?"checked":"",onChange:this.handleChange}),(0,l.createElement)("span",{className:"pv-switch-slider pv-round"})))))))))}}const f=b;var y=a(45224),C=a(86184),_=a(56323),N=a(93300),w=a.n(N),S=a(84976),k=a(47767),x=a(21241);const F=(0,l.lazy)((()=>a.e(1570).then(a.bind(a,76332)))),A=(0,l.lazy)((()=>a.e(6923).then(a.bind(a,26923)))),L=(0,l.lazy)((()=>Promise.all([a.e(2728),a.e(8159)]).then(a.bind(a,8159)))),D=(0,l.lazy)((()=>Promise.all([a.e(5585),a.e(427)]).then(a.bind(a,60427)))),M=(0,l.lazy)((()=>Promise.all([a.e(347),a.e(155)]).then(a.bind(a,5393)))),T=(0,l.lazy)((()=>Promise.all([a.e(347),a.e(8951),a.e(9185)]).then(a.bind(a,93947)))),P=(0,l.lazy)((()=>Promise.all([a.e(347),a.e(2719),a.e(8782)]).then(a.bind(a,6401)))),R=(0,l.lazy)((()=>Promise.all([a.e(347),a.e(8951),a.e(3705)]).then(a.bind(a,6086)))),j=(0,l.lazy)((()=>a.e(1230).then(a.bind(a,41230)))),B=(0,l.lazy)((()=>a.e(4586).then(a.bind(a,54586)))),{i18n:$,caps:z}=ndpv;class H extends l.Component{constructor(e){super(e),this.state={tabs:[],currentTab:"task",leadModal:!1,dealModal:!1,dealModalType:"edit",projectModal:!1,projectModalType:"edit",orderModal:!1,orderModalType:"edit",contactModal:!1,submitPreloader:!1,tags:[],deal_stage:[],project_status:[],order_status:[],path:"",data:{id:null,person:{first_name:"",country:"",region:""},org:{name:"",country:"",region:""},package:null,level_id:null,stage_id:null,status_id:null,probability:0}},this.timeout=0}componentDidMount(){this.whenRender()}componentDidUpdate(){const e=this.props.path;this.state.path!=e&&this.whenRender()}whenRender=()=>{this.getData();const e=this.props.path;let t=[{id:"task",text:$.task},{id:"note",text:$.note},{id:"file",text:$.file}],a="task";wage.length||"order"!=e||(a="request",t.splice(0,0,{id:"request",text:$.req})),wage.length||"project"!=e||t.splice(1,0,{id:"discussion",text:$.discuss}),"deal"==e&&t.push({id:"estimate",text:$.est}),"project"!=e&&"client"!=e||(t.push({id:"invoice",text:$.inv}),t.push({id:"estimate",text:$.est})),"client"!=e&&"contact"!=e||t.push({id:"project",text:$.project}),"contact"==e&&t.push({id:"deal",text:$.deal}),ndpv.caps.includes("ndpv_client_role")||t.push({id:"email",text:$.email}),this.setState({tabs:t,currentTab:a,path:this.props.path})};getData=()=>{const e=this.props.path,t=("client"==e?"contact":e)+"s";s.A.getS(t,this.props.id).then((t=>{this.setState({data:t.data.data}),"lead"!=e&&this.getTaxonomies()}))};getTaxonomies=()=>{let e;switch(this.props.path){case"deal":e="deal_stage,tag";break;case"project":e="project_status,tag";break;case"order":e="order_status"}s.A.get("taxonomies","taxonomy="+e).then((e=>{if(e.data.success){const t=e.data.data;this.setState({deal_stage:t.deal_stage||[],tags:t.tag||[],project_status:t.project_status||[],order_status:t.order_status||[]})}}))};addTabItem=e=>{let t=this.state.tabs;t.some((t=>t.id===e.id))||t.push(e)};setActiveTab(e,t){e.preventDefault(),this.setState({currentTab:t})}handleFindLevel=(e,t)=>{};handleProbabilityChange=e=>{let t={...this.state.data};const a=e.target;t.probability=a.value,this.setState({data:t},(()=>{this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{let e={};t.probability&&(e.probability=t.probability,e.change_prob=!0),s.A.edit("deals",this.props.id,e)}),300)}))};handleStageChange=e=>{let t={...this.state.data};if("won"==e||"lost"==e){let a=this.state.deal_stage.find((t=>t.type===e));t.stage_id=a,this.setState({data:t},(()=>{let e={};t.stage_id&&(e.stage_id=t.stage_id.id,e.change_tax=!0),s.A.edit("deals",this.props.id,e)}))}else t.stage_id=e,this.setState({data:t})};handleProjectStatusChange=e=>{let t={...this.state.data};if("completed"==e){let a=this.state.project_status.find((t=>t.type===e));t.status_id=a,this.setState({data:t},(()=>{let e={};t.status_id&&(e.change_tax=!0,e.status_id=t.status_id.id),s.A.edit("projects",this.props.id,e)}))}else t.status_id=e,this.setState({data:t})};handleOrderStatusChange=e=>{let t={...this.state.data};if("completed"==e){let a=this.state.order_status.find((t=>t.type===e));t.status_id=a,this.setState({data:t},(()=>{let e={};t.status_id&&(e.change_tax=!0,e.status_id=t.status_id.id),s.A.edit("orders",this.props.id,e)}))}else t.status_id=e,this.setState({data:t})};handleRequestStatusChange=e=>{let t={...this.state.data};"accepted"==e.type?this.setState({projectModal:!0,projectModalType:"move"}):(t.status_id=e,this.setState({data:t}))};personEdit=e=>{this.setState({submitPreloader:!0}),s.A.edit("persons",e.id,e).then((e=>{e.data.success?(this.setState({contactModal:!1,submitPreloader:!1}),x.oR.success(ndpv.i18n.aUpd),this.getData()):e.data.data.forEach((function(e,t,a){this.setState({submitPreloader:!1}),x.oR.error(e)}))}))};orgEdit=e=>{this.setState({submitPreloader:!0}),s.A.edit("organizations",e.id,e).then((e=>{e.data.success?(this.setState({contactModal:!1,submitPreloader:!1}),x.oR.success(ndpv.i18n.aUpd),this.getData()):e.data.data.forEach((function(e,t,a){this.setState({submitPreloader:!1}),x.oR.error(e)}))}))};deleteEntry=(e,t)=>{confirm(ndpv.i18n.aConf)&&s.A.del(e+"s",t).then((t=>{t.data.success?(x.oR.success(ndpv.i18n.aDel),this.props.navigate(`/${e}`)):t.data.data.forEach((function(e,t,a){x.oR.error(e)}))}))};getIntervalType=e=>{switch(e.recurring.interval_type){case"week":return $.wkly;case"month":return $.mth;case"year":return $.yrly}return""};render(){const{tabs:e=[],currentTab:t}=this.state,{path:a}=this.props,s=this.state.data,i=s.package;let c=ndpv.assetImgUri+"avatar.png";s.person&&s.person.img?c=s.person.img.src:s.org&&s.org.logo&&(c=s.org.logo.src),null==s.org&&(s.org={});const u=z.includes("ndpv_client_role");return(0,l.createElement)("div",{className:"ndpv-components"},(0,l.createElement)("nav",{className:"pv-breadcrumb"},(0,l.createElement)("ul",{className:""},(0,l.createElement)("li",null,(0,l.createElement)("a",{href:"#",className:""},$.home)),(0,l.createElement)("li",null,(0,l.createElement)("svg",{width:5,height:10,viewBox:"0 0 5 10",fill:"none"},(0,l.createElement)("path",{d:"M0.5 1.25L4.25 5L0.5 8.75",stroke:"#718096",strokeLinecap:"round",strokeLinejoin:"round"}))),(0,l.createElement)("li",null,"lead"==a&&(0,l.createElement)(S.k2,{to:"/lead"},$.lead),"deal"==a&&(0,l.createElement)(S.k2,{to:"/deal"},$.deal),"client"==a&&(0,l.createElement)(S.k2,{to:"/client"},$.client),"order"==a&&(0,l.createElement)(S.k2,{to:"/order"},$.order),"request"==a&&(0,l.createElement)(S.k2,{to:"/request"},$.req),"project"==a&&(0,l.createElement)(S.k2,{to:"/project"},$.project),"contact"==a&&(0,l.createElement)(S.k2,{to:"/contact/"},$.ct)),(0,l.createElement)("li",null,(0,l.createElement)("svg",{width:5,height:10,viewBox:"0 0 5 10",fill:"none"},(0,l.createElement)("path",{d:"M0.5 1.25L4.25 5L0.5 8.75",stroke:"#718096",strokeLinecap:"round",strokeLinejoin:"round"}))),(0,l.createElement)("li",{className:"pv-active"},"lead"==a&&(0,l.createElement)(l.Fragment,null,s.person?s.person.first_name:s.org.name),("deal"==a||"project"==a)&&s.title,"client"==a&&(0,l.createElement)(l.Fragment,null,s.person?s.person.first_name:s.org.name),"contact"==a&&(0,l.createElement)(l.Fragment,null,s.person?s.person.first_name:s.org.name),"order"==a&&(0,l.createElement)(l.Fragment,null,i&&i.title),("request"==a||"project"==a)&&s.title))),"lead"==a&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"pv-list-single-head"},(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md-6"},(0,l.createElement)("div",{className:"pv-list-content"},(0,l.createElement)("img",{src:c,alt:"logo",className:"logo"}),(0,l.createElement)("div",{className:"pv-lead-address"},(0,l.createElement)("h3",{className:""},s.person?s.person.first_name:s.org.name,(0,l.createElement)("button",{className:"pv-btn pv-edit-btn pv-btn-small pv-bg-stroke pv-bg-shadow",onClick:()=>this.setState({leadModal:!0})},$.edit)),(0,l.createElement)("address",null,s.person?s.person.email:s.org.email,(0,l.createElement)("br",null),s.person&&s.org&&(0,l.createElement)(l.Fragment,null,$.org,": ",s.org.name,(0,l.createElement)("br",null)),$.budget,":"," ",s.budget&&(0,r.Gl)(s.budget,s.currency))))),(0,l.createElement)("div",{className:"col-md-6"},(0,l.createElement)("div",{className:"pv-list-single-button-content"},(0,l.createElement)("div",{className:"pv-select"},(0,l.createElement)("label",null,$.lead," ",$.level,":"),s.id&&(0,l.createElement)(d.A,{id:s.id,data:s.level_id,taxonomy:"lead_level",title:$.level,color:!0})),(0,l.createElement)("div",{className:"pv-buttons pv-text-right"},(0,l.createElement)("button",{className:"pv-btn pv-btn-medium pv-bg-blue pv-bg-hover-blue pv-color-white pv-bg-shadow",onClick:()=>this.setState({dealModal:!0,dealModalType:"move"})},(0,l.createElement)("svg",{width:14,height:12,viewBox:"0 0 12 15",fill:"none"},(0,l.createElement)("path",{d:"M2.5 8H13.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.createElement)("path",{d:"M8 2.5V13.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),$.addTo," ",$.deal_pipeline),(0,l.createElement)(m,{id:s.id,module:"lead",edit:()=>this.setState({leadModal:!0}),del:this.deleteEntry})))))),(0,l.createElement)("div",{className:"pv-tag-content"},(0,l.createElement)("ul",null,(0,l.createElement)("li",null,(0,l.createElement)("label",{htmlFor:""},$.tag,": "),s.id&&(0,l.createElement)(d.A,{id:s.id,data:s.tags,taxonomy:"tag",title:$.tag,small:!0,multi:!0})),(0,l.createElement)("li",null,(0,l.createElement)("label",{htmlFor:""},$.source,": "),s.id&&(0,l.createElement)(d.A,{id:s.id,data:s.source_id,taxonomy:"lead_source",title:$.source,small:!0,color:!0,hide_bg:!0}))))),"deal"==a&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"pv-list-single-head pv-list-single-head-two"},(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md-6"},(0,l.createElement)("div",{className:"pv-list-content"},(0,l.createElement)("h3",{className:""},s.title,(0,l.createElement)("button",{className:"pv-btn pv-edit-btn pv-btn-small pv-bg-stroke pv-bg-shadow",onClick:()=>this.setState({dealModal:!0})},$.edit)),(0,l.createElement)("div",{className:"pv-avatar-content"},(0,l.createElement)("img",{src:c,alt:"avatar"}),(0,l.createElement)("div",{className:"pv-avatar-text"},(0,l.createElement)("h5",{style:{fontSize:12}},s.person?s.person.first_name:s.org.name),(0,l.createElement)("p",{style:{fontSize:12}},s.person?(0,l.createElement)(l.Fragment,null,(s.person.region||s.person.country)&&(0,l.createElement)(l.Fragment,null,s.person.region&&s.person.country?s.person.region+", ":""," ",(0,r.Fi)(s.person.country))):(0,l.createElement)(l.Fragment,null,(s.org.region||s.org.country)&&(0,l.createElement)(l.Fragment,null,s.org.region&&s.org.country?s.org.region+", ":""," ",(0,r.Fi)(s.org.country)))))),!wage.length&&(0,l.createElement)("div",{className:"pv-range"},(0,l.createElement)("span",null,s.probability,"%"),(0,l.createElement)("label",{htmlFor:"field-probability"},$.proba),(0,l.createElement)("input",{id:"field-probability",type:"range",min:"1",max:"100",name:"probability",value:s.probability,style:{background:`linear-gradient(to right, #3264fe ${s.probability/100*100}%, #ccd6ff ${s.probability/100*100}%)`},onChange:this.handleProbabilityChange})))),(0,l.createElement)("div",{className:"col-md-6"},(0,l.createElement)("div",{className:"pv-list-single-button-content"},(0,l.createElement)("div",{className:"pv-select"},(0,l.createElement)("label",null,$.deal_stage,":"),s.id&&s.stage_id&&(0,l.createElement)(d.A,{key:s.stage_id.id,id:s.id,data:s.stage_id,onChange:this.handleStageChange,taxonomy:"deal_stage",title:$.stage,color:!0})),(0,l.createElement)("div",{className:"pv-buttons pv-text-right"},(0,l.createElement)("button",{className:"pv-btn pv-btn-medium pv-bg-blue pv-bg-hover-blue pv-color-white pv-bg-shadow",onClick:()=>this.setState({projectModal:!0,projectModalType:"move"})},(0,l.createElement)("svg",{width:15,height:15,viewBox:"0 0 16 16",fill:"none"},(0,l.createElement)("path",{d:"M2.5 8H13.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.createElement)("path",{d:"M8 2.5V13.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),$.move," ",$.to," ",$.project),s.stage_id&&(0,l.createElement)(l.Fragment,null,("won"==s.stage_id.type||""==s.stage_id.type)&&(0,l.createElement)("button",{className:"pv-btn pv-btn-medium pv-bg-stroke pv-bg-shadow",style:{padding:"9px 15px !important"},onClick:()=>this.handleStageChange("won")},(0,l.createElement)("img",{className:"pv-mr-5",src:ndpv.assetImgUri+"happy.png",alt:"won"}),$.won),("lost"==s.stage_id.type||""==s.stage_id.type)&&(0,l.createElement)("button",{className:"pv-btn pv-btn-medium pv-bg-stroke pv-bg-shadow",style:{padding:"9px 15px !important"},onClick:()=>this.handleStageChange("lost")},(0,l.createElement)("img",{className:"pv-mr-5",src:ndpv.assetImgUri+"sad.png",alt:"sad"}),$.lost)),(0,l.createElement)(m,{id:s.id,module:"deal",edit:()=>this.setState({dealModal:!0}),del:this.deleteEntry,padding:1})))))),(0,l.createElement)("div",{className:"pv-tag-content"},(0,l.createElement)("ul",null,(0,l.createElement)("li",{className:"pv-budget"},(0,l.createElement)("label",{htmlFor:""},$.budget,":"),(0,l.createElement)("span",null,s.budget&&(0,r.Gl)(s.budget,s.currency))),(0,l.createElement)("li",null,(0,l.createElement)("label",{htmlFor:""},$.tag,": "),s.id&&(0,l.createElement)(d.A,{id:s.id,data:s.tags,taxonomy:"tag",title:$.tag,small:!0,multi:!0}))))),"order"==a&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"pv-list-single-head pv-list-single-head-two"},(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md-6"},(0,l.createElement)("div",{className:"pv-list-content"},(0,l.createElement)("h3",{className:""},i&&i.title),(0,l.createElement)("div",{className:"pv-avatar-content"},(0,l.createElement)("img",{src:c,alt:"avatar"}),(0,l.createElement)("div",{className:"pv-avatar-text"},(0,l.createElement)("h5",{style:{fontSize:12}},s.person?s.person.first_name:s.org.name),(0,l.createElement)("p",{style:{fontSize:12}},s.person?(0,l.createElement)(l.Fragment,null,(s.person.region||s.person.country)&&(0,l.createElement)(l.Fragment,null,s.person.region&&s.person.country?s.person.region+", ":""," ",(0,r.Fi)(s.person.country))):(0,l.createElement)(l.Fragment,null,(s.org.region||s.org.country)&&(0,l.createElement)(l.Fragment,null,s.org.region&&s.org.country?s.org.region+", ":""," ",(0,r.Fi)(s.org.country)))))))),(0,l.createElement)("div",{className:"col-md-6"},(0,l.createElement)("div",{className:"pv-list-single-button-content"},(0,l.createElement)("div",{className:"pv-select"},(0,l.createElement)("label",null,$.orderStatus,": ",u&&s.id&&s.status_id&&(0,l.createElement)(l.Fragment,null,s.status_id&&(0,l.createElement)(l.Fragment,null,s.status_id.color&&s.status_id.bg_color&&(0,l.createElement)("span",{className:"pv-badge",style:{backgroundColor:s.status_id.bg_color,color:s.status_id.color}},(0,l.createElement)("svg",{width:6,height:6,viewBox:"0 0 6 6",fill:"none"},(0,l.createElement)("circle",{cx:3,cy:3,r:3,fill:s.status_id.color})),s.status_id.label),(!s.status_id.color||!s.status_id.bg_color)&&(0,l.createElement)("span",{className:"pv-badge"},s.status_id.label)))),!u&&s.id&&s.status_id&&(0,l.createElement)(d.A,{key:s.status_id.id,id:s.id,data:s.status_id,taxonomy:"order_status",onChange:this.handleOrderStatusChange,title:$.status,color:!0})),(0,l.createElement)("div",{className:"pv-buttons pv-text-right"},!u&&s.status_id&&"completed"!=s.status_id.type&&(0,l.createElement)("button",{className:"pv-btn pv-btn-medium pv-bg-blue pv-bg-hover-blue pv-color-white pv-bg-shadow",onClick:()=>this.handleOrderStatusChange("completed")},$.mark," ",$.comp)))))),(0,l.createElement)("div",{className:"pv-tag-content"},(0,l.createElement)("ul",null,(0,l.createElement)("li",null,(0,l.createElement)("label",{htmlFor:""},$.order," ",$.date,":"),(0,l.createElement)("span",{className:"pv-date"},s.date&&s.date)),(0,l.createElement)("li",null,(0,l.createElement)("label",{htmlFor:""},$.price,":"),(0,l.createElement)("span",{style:{color:"#5d5d5d"}},i&&i.price&&i.currency?(0,r.Gl)(i.price,i.currency):"")),(0,l.createElement)("li",null,(0,l.createElement)("label",{htmlFor:""},$.packageType,":"),(0,l.createElement)("span",{style:{color:"#5d5d5d"}},i&&(i.is_recurring?$.recur:$.onetime))),i&&i.is_recurring&&(0,l.createElement)("li",null,(0,l.createElement)("label",{htmlFor:""},$.recurPeriod,":"),(0,l.createElement)("span",{style:{color:"#5d5d5d"}},i&&this.getIntervalType(i)))))),"request"==a&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"pv-list-single-head pv-list-single-head-two"},(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md-6"},(0,l.createElement)("div",{className:"pv-list-content"},(0,l.createElement)("h3",{className:""},s.title),(0,l.createElement)("div",{className:"pv-avatar-content"},(0,l.createElement)("img",{src:c,alt:"avatar"}),(0,l.createElement)("div",{className:"pv-avatar-text"},(0,l.createElement)("h5",{style:{fontSize:12}},s.person?s.person.first_name:s.org.name),(0,l.createElement)("p",{style:{fontSize:12}},s.person?(0,l.createElement)(l.Fragment,null,(s.person.region||s.person.country)&&(0,l.createElement)(l.Fragment,null,s.person.region&&s.person.country?s.person.region+", ":""," ",(0,r.Fi)(s.person.country))):(0,l.createElement)(l.Fragment,null,(s.org.region||s.org.country)&&(0,l.createElement)(l.Fragment,null,s.org.region&&s.org.country?s.org.region+", ":""," ",(0,r.Fi)(s.org.country)))))))),(0,l.createElement)("div",{className:"col-md-6"},(0,l.createElement)("div",{className:"pv-list-single-button-content"},(0,l.createElement)("div",{className:"pv-select"},(0,l.createElement)("label",null,$.reqStatus,": ",u&&s.id&&s.status_id&&(0,l.createElement)(l.Fragment,null,s.status_id&&(0,l.createElement)(l.Fragment,null,s.status_id.color&&s.status_id.bg_color&&(0,l.createElement)("span",{className:"pv-badge",style:{backgroundColor:s.status_id.bg_color,color:s.status_id.color}},(0,l.createElement)("svg",{width:6,height:6,viewBox:"0 0 6 6",fill:"none"},(0,l.createElement)("circle",{cx:3,cy:3,r:3,fill:s.status_id.color})),s.status_id.label),(!s.status_id.color||!s.status_id.bg_color)&&(0,l.createElement)("span",{className:"pv-badge"},s.status_id.label)))),!u&&s.id&&s.status_id&&(0,l.createElement)(d.A,{key:s.status_id.id,id:s.id,data:s.status_id,onChange:this.handleRequestStatusChange,onChangeValue:!0,taxonomy:"request_status",title:$.status,color:!0})),(0,l.createElement)("div",{className:"pv-buttons pv-text-right"},!u&&s.status_id&&"accepted"!=s.status_id.type&&(0,l.createElement)("button",{className:"pv-btn pv-btn-medium pv-bg-blue pv-bg-hover-blue pv-color-white pv-bg-shadow",onClick:()=>this.setState({projectModal:!0,projectModalType:"move"})},(0,l.createElement)("svg",{width:15,height:15,viewBox:"0 0 16 16",fill:"none"},(0,l.createElement)("path",{d:"M2.5 8H13.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.createElement)("path",{d:"M8 2.5V13.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),$.start," ",$.project)))))),(0,l.createElement)("div",{className:"pv-tag-content"},(0,l.createElement)("ul",null,(0,l.createElement)("li",{className:"pv-budget"},(0,l.createElement)("label",{htmlFor:""},$.package,":"),(0,l.createElement)("span",null,i&&i.title)),(0,l.createElement)("li",null)))),"project"==a&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"pv-list-single-head pv-list-single-head-two"},(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md-6"},(0,l.createElement)("div",{className:"pv-list-content"},(0,l.createElement)("h3",{className:""},s.title,u&&(0,l.createElement)("button",{className:"pv-btn pv-edit-btn pv-btn-small pv-bg-stroke pv-bg-shadow",onClick:()=>this.setState({projectModal:!0})},$.edit)),(0,l.createElement)("div",{className:"pv-avatar-content"},(0,l.createElement)("img",{src:c,alt:"avatar"}),(0,l.createElement)("div",{className:"pv-avatar-text"},(0,l.createElement)("h5",{style:{fontSize:12}},s.person?s.person.first_name:s.org.name),(0,l.createElement)("p",{style:{fontSize:12}},s.person?(0,l.createElement)(l.Fragment,null,(s.person.region||s.person.country)&&(0,l.createElement)(l.Fragment,null,s.person.region&&s.person.country?s.person.region+", ":""," ",(0,r.Fi)(s.person.country))):(0,l.createElement)(l.Fragment,null,(s.org.region||s.org.country)&&(0,l.createElement)(l.Fragment,null,s.org.region&&s.org.country?s.org.region+", ":""," ",(0,r.Fi)(s.org.country)))))))),(0,l.createElement)("div",{className:"col-md-6"},(0,l.createElement)("div",{className:"pv-list-single-button-content"},(0,l.createElement)("div",{className:"pv-select"},(0,l.createElement)("label",null,$.project," ",$.status,": ",u&&s.id&&s.status_id&&(0,l.createElement)(l.Fragment,null,s.status_id&&(0,l.createElement)(l.Fragment,null,s.status_id.color&&s.status_id.bg_color&&(0,l.createElement)("span",{className:"pv-badge",style:{backgroundColor:s.status_id.bg_color,color:s.status_id.color}},(0,l.createElement)("svg",{width:6,height:6,viewBox:"0 0 6 6",fill:"none"},(0,l.createElement)("circle",{cx:3,cy:3,r:3,fill:s.status_id.color})),s.status_id.label),(!s.status_id.color||!s.status_id.bg_color)&&(0,l.createElement)("span",{className:"pv-badge"},s.status_id.label)))),!u&&s.id&&s.status_id&&(0,l.createElement)(d.A,{key:s.status_id.id,id:s.id,data:s.status_id,taxonomy:"project_status",onChange:this.handleProjectStatusChange,title:$.status,color:!0})),(0,l.createElement)("div",{className:"pv-buttons pv-text-right"},!u&&s.status_id&&"completed"!=s.status_id.type&&(0,l.createElement)("button",{className:"pv-btn pv-btn-medium pv-bg-blue pv-bg-hover-blue pv-color-white pv-bg-shadow",onClick:()=>this.handleProjectStatusChange("completed")},$.mark," ",$.comp),!u&&(0,l.createElement)(m,{id:s.id,module:"project",edit:()=>this.setState({projectModal:!0}),del:this.deleteEntry,padding:1})))))),(0,l.createElement)("div",{className:"pv-tag-content"},(0,l.createElement)("ul",null,!u&&(0,l.createElement)("li",null,(0,l.createElement)("label",{htmlFor:""},$.tag,": "),s.id&&(0,l.createElement)(d.A,{id:s.id,data:s.tags,taxonomy:"tag",title:$.tag,small:!0,multi:!0})),(0,l.createElement)("li",null,(0,l.createElement)("label",{htmlFor:""},$.start," ",$.date,":"),(0,l.createElement)("span",{className:"pv-date"},s.start_date&&(0,l.createElement)(w(),{format:"YYYY-MM-DD"},s.start_date))),(0,l.createElement)("li",null,(0,l.createElement)("label",{htmlFor:""},$.due_date,":"),(0,l.createElement)("span",{className:"pv-date"},s.due_date&&(0,l.createElement)(w(),{format:"YYYY-MM-DD"},s.due_date))),(0,l.createElement)("li",null))),!wage.length&&(0,l.createElement)("div",{className:"pv-cards pv-mt-25"},(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md-6 col-lg"},(0,l.createElement)("div",{className:"pv-cards-content"},(0,l.createElement)("span",{className:"",style:{background:"rgba(76, 111, 255, 0.12)"}},(0,l.createElement)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},(0,l.createElement)("path",{d:"M12 6.75V8.25",stroke:"#4C6FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.createElement)("path",{d:"M12 15.75V17.25",stroke:"#4C6FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.createElement)("path",{d:"M12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z",stroke:"#4C6FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.createElement)("path",{d:"M9.75 15.75H13.125C13.6223 15.75 14.0992 15.5525 14.4508 15.2008C14.8025 14.8492 15 14.3723 15 13.875C15 13.3777 14.8025 12.9008 14.4508 12.5492C14.0992 12.1975 13.6223 12 13.125 12H10.875C10.3777 12 9.90081 11.8025 9.54917 11.4508C9.19754 11.0992 9 10.6223 9 10.125C9 9.62772 9.19754 9.15081 9.54917 8.79917C9.90081 8.44754 10.3777 8.25 10.875 8.25H14.25",stroke:"#4C6FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),(0,l.createElement)("p",{className:""},$.total," ",$.budget),(0,l.createElement)("h4",null,s.budget&&(0,r.Gl)(s.budget,s.currency)))),(0,l.createElement)("div",{className:"col-md-6 col-lg"},(0,l.createElement)("div",{className:"pv-cards-content"},(0,l.createElement)("span",{className:"",style:{background:"#f1faf1"}},(0,l.createElement)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},(0,l.createElement)("path",{d:"M3.75 10.7531V5.25C3.75 5.05109 3.82902 4.86032 3.96967 4.71967C4.11032 4.57902 4.30109 4.5 4.5 4.5H19.5C19.6989 4.5 19.8897 4.57902 20.0303 4.71967C20.171 4.86032 20.25 5.05109 20.25 5.25V10.7531C20.25 18.6281 13.5656 21.2344 12.2344 21.675C12.0831 21.731 11.9169 21.731 11.7656 21.675C10.4344 21.2344 3.75 18.6281 3.75 10.7531Z",stroke:"#78C377",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.createElement)("path",{d:"M16.125 9.75L10.6219 15L7.875 12.375",stroke:"#78C377",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),(0,l.createElement)("p",{className:""},$.paid," ",$.amt),(0,l.createElement)("h4",null,s.invoice&&s.invoice.paid))),(0,l.createElement)("div",{className:"col-md-6 col-lg"},(0,l.createElement)("div",{className:"pv-cards-content"},(0,l.createElement)("span",{className:"",style:{background:"#faf0f5"}},(0,l.createElement)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},(0,l.createElement)("path",{d:"M3.75 10.7531V5.25C3.75 5.05109 3.82902 4.86032 3.96967 4.71967C4.11032 4.57902 4.30109 4.5 4.5 4.5H19.5C19.6989 4.5 19.8897 4.57902 20.0303 4.71967C20.171 4.86032 20.25 5.05109 20.25 5.25V10.7531C20.25 18.6281 13.5656 21.2344 12.2344 21.675C12.0831 21.731 11.9169 21.731 11.7656 21.675C10.4344 21.2344 3.75 18.6281 3.75 10.7531Z",stroke:"#C2769F",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.createElement)("path",{d:"M12 9V12.75",stroke:"#C2769F",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.createElement)("path",{d:"M12 17.25C12.6213 17.25 13.125 16.7463 13.125 16.125C13.125 15.5037 12.6213 15 12 15C11.3787 15 10.875 15.5037 10.875 16.125C10.875 16.7463 11.3787 17.25 12 17.25Z",fill:"#C2769F"}))),(0,l.createElement)("p",{className:""},$.due," ",$.amt),(0,l.createElement)("h4",null,s.invoice&&s.invoice.due))),(0,l.createElement)("div",{className:"col-md-6 col-lg"},(0,l.createElement)("div",{className:"pv-cards-content"},(0,l.createElement)("span",{className:"",style:{background:"#f0faf9"}},(0,l.createElement)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},(0,l.createElement)("path",{d:"M7.125 9.75H16.875",stroke:"#76C2B7",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.createElement)("path",{d:"M7.125 12.75H16.875",stroke:"#76C2B7",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.createElement)("path",{d:"M3 19.5V5.25C3 5.05109 3.07902 4.86032 3.21967 4.71967C3.36032 4.57902 3.55109 4.5 3.75 4.5H20.25C20.4489 4.5 20.6397 4.57902 20.7803 4.71967C20.921 4.86032 21 5.05109 21 5.25V19.5L18 18L15 19.5L12 18L9 19.5L6 18L3 19.5Z",stroke:"#76C2B7",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),(0,l.createElement)("p",{className:""},$.total," ",$.inv),(0,l.createElement)("h4",null,s.invoice&&s.invoice.number)))))),("contact"==a||"client"==a)&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"pv-list-single-head"},(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md-6"},(0,l.createElement)("div",{className:"pv-list-content"},(0,l.createElement)("img",{src:c,alt:"logo",className:"logo"}),(0,l.createElement)("div",{className:"pv-lead-address"},(0,l.createElement)("h3",{className:""},s.person?s.person.first_name:s.org.name,(0,l.createElement)("button",{className:"pv-btn pv-edit-btn pv-btn-small pv-bg-stroke pv-bg-shadow",onClick:()=>this.setState({contactModal:!0})},$.edit)),(0,l.createElement)("address",null,s.person?s.person.email:s.org.email,(0,l.createElement)("br",null),s.person&&s.org&&(0,l.createElement)(l.Fragment,null,$.org,": ",s.org.name,(0,l.createElement)("br",null)))))),(0,l.createElement)("div",{className:"col-md-6"},(0,l.createElement)("div",{className:"pv-list-single-button-content"},(0,l.createElement)("div",{className:"pv-select"},(0,l.createElement)("label",null,$.status,":"),s.id&&(0,l.createElement)(d.A,{id:s.id,data:s.status_id,taxonomy:"contact_status",title:$.status,color:!0})),(0,l.createElement)(m,{id:s.id,module:"contact",edit:()=>this.setState({contactModal:!0}),del:this.deleteEntry,class:"pv-float-right"}))))),(0,l.createElement)("div",{className:"pv-tag-content"},(0,l.createElement)("ul",null,(0,l.createElement)("li",null,(0,l.createElement)("label",{htmlFor:""},$.tag,": "),s.id&&(0,l.createElement)(d.A,{id:s.id,taxonomy:"tag",title:$.tag,small:!0,multi:!0})),(0,l.createElement)("li",null,$.project,": ",s.project),(0,l.createElement)("li",null,$.deal,": ",s.deal)))),this.state.leadModal&&(0,l.createElement)(C.A,{data:s,custom_field:s.custom_field,modalType:"edit",close:()=>this.setState({leadModal:!1}),reload:()=>this.getData()}),this.state.dealModal&&(0,l.createElement)(y.A,{data:s,custom_field:s.custom_field,modalType:this.state.dealModalType,close:()=>this.setState({dealModal:!1}),reload:()=>{"deal"!=a&&this.addTabItem({id:"estimate",text:$.est}),this.getData()}}),this.state.projectModal&&(0,l.createElement)(_.A,{data:s,path:a,custom_field:s.custom_field,modalType:this.state.projectModalType,close:()=>this.setState({projectModal:!1}),reload:()=>{"project"!=a&&this.addTabItem({id:"invoice",text:$.inv}),this.getData()}}),this.state.contactModal&&(s.person?(0,l.createElement)(h.A,{single:!0,data:s.person,modalType:"edit",submitPreloader:this.state.submitPreloader,handleSubmit:this.personEdit,close:()=>this.setState({contactModal:!1}),reload:()=>this.getData()}):(0,l.createElement)(f,{single:!0,data:s.org,modalType:"edit",submitPreloader:this.state.submitPreloader,handleSubmit:this.orgEdit,close:()=>this.setState({contactModal:!1}),reload:()=>this.getData()})),(0,l.createElement)("div",{className:"row pv-mt-25"},(0,l.createElement)("div",{className:"col-lg-9"},(0,l.createElement)("div",{className:"pv-horizontal-tab",style:{border:"1px solid rgba(221, 221, 221, 0.6588235294)"}},(0,l.createElement)("ul",{className:"pv-tabs"},e.map(((e,a)=>(0,l.createElement)("li",{className:"pv-tab "+(t==e.id?"pv-active":""),key:a,onClick:t=>this.setActiveTab(t,e.id)},e.text," ","email"==e.id&&(0,l.createElement)(o.A,null))))),(0,l.createElement)("div",{className:"pv-tab-content",style:{padding:!wage.length&&"discussion"==t&&"project"==a&&s.tab_id?0:30}},(0,l.createElement)(l.Suspense,{fallback:(0,l.createElement)(p.A,null)},"request"==t&&s.id&&(0,l.createElement)(P,{module_id:s.id,package_id:i.id,data:s,parent:a}),"task"==t&&s.tab_id&&(0,l.createElement)(F,{tab_id:s.tab_id}),!wage.length&&"discussion"==t&&"project"==a&&s.tab_id&&(0,l.createElement)(A,{tab_id:s.tab_id,path:a}),"note"==t&&s.tab_id&&(0,l.createElement)(L,{tab_id:s.tab_id}),"file"==t&&s.tab_id&&(0,l.createElement)(D,{tab_id:s.tab_id}),("estimate"==t||"invoice"==t)&&s.id&&(0,l.createElement)(M,{module_id:s.id,path:t,client_mod:"client"==a,parent:a}),"project"==t&&s.id&&(0,l.createElement)(T,{module_id:s.id,data:s,parent:a}),"deal"==t&&s.id&&(0,l.createElement)(R,{module_id:s.id,data:s,parent:a}),"email"==t&&s.id&&(0,l.createElement)(B,{module_id:s.id,data:s,parent:a}))))),(0,l.createElement)("div",{className:"col-lg-3 pv-lead-right-content"},"order"==a&&!wage.length&&s.tab_id&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("div",{className:"pv-widget pv-info-box"},(0,l.createElement)("h3",{className:"pv-widget-title"},$.packageReqLimit),i&&i.max_req&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("p",{style:{marginBottom:5,color:"#4A5568"}},$.packageReqLimitInA," ",this.getIntervalType(i)),(0,l.createElement)("span",{style:{fontSize:16,color:"#000"}},s.max_req,"/",i.max_req)),i&&i.max_req_at_a_time&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("p",{style:{marginBottom:5,color:"#4A5568"}},$.packageReqLimitAtA),(0,l.createElement)("span",{style:{fontSize:16,color:"#000"}},s.max_req_at_a_time,"/",i.max_req_at_a_time)))),!wage.length&&s.tab_id&&!u&&(0,l.createElement)(l.Suspense,{fallback:(0,l.createElement)(p.A,null)},(0,l.createElement)(j,{tab_id:s.tab_id})),(0,l.createElement)("div",{className:"pv-accordion-wrapper "+(wage.length||!s.tab_id||u?"":"pv-mt-15")},(0,l.createElement)("ul",null,(0,l.createElement)("li",null,(0,l.createElement)("input",{type:"checkbox",defaultChecked:"checked"}),(0,l.createElement)("i",null),(0,l.createElement)("h3",{className:"pv-title-small"},$.addiInfo),(0,l.createElement)("div",{className:"pv-info-box"},(0,l.createElement)("address",null,(s.person&&s.person.mobile||s.org&&s.org.mobile)&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("span",null,$.mob,":"),s.person?s.person.mobile:s.org.mobile),(s.person&&s.person.web||s.org&&s.org.web)&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("span",null,$.web,":"),s.person?s.person.web:s.org.web),(s.person&&(s.person.address||s.person.region||s.person.country)||s.org&&(s.org.address||s.org.region||s.org.country))&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("span",null,$.addr,":"),s.person?s.person.address:s.org.address,s.person&&s.person.address||s.org&&s.org.address?(0,l.createElement)("br",null):"",s.person?(0,l.createElement)(l.Fragment,null,(s.person.region||s.person.country)&&(0,l.createElement)(l.Fragment,null,s.person.region&&s.person.country?`${s.person.region}, `:"",(0,r.Fi)(s.person.country))):(0,l.createElement)(l.Fragment,null,(s.org.region||s.org.country)&&(0,l.createElement)(l.Fragment,null,s.org.region&&s.org.country?`${s.org.region}, `:"",(0,r.Fi)(s.org.country))))),(0,l.createElement)("div",{className:"pv-desc-content"},s.desc&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("h5",null,$.desc,":"),(0,l.createElement)("p",{style:{marginTop:0},dangerouslySetInnerHTML:{__html:s.desc}})),s.custom_field&&s.custom_field.map(((e,t)=>(0,l.createElement)(n().Fragment,{key:t},s[e.slug]&&(0,l.createElement)("h5",null,e.label,":"),"date"==e.type&&s[e.slug]?(0,l.createElement)("p",null,(0,l.createElement)(w(),{format:ndpv.date_format},s[e.slug])):(0,l.createElement)("p",{style:{marginTop:0},dangerouslySetInnerHTML:{__html:s[e.slug]}}))))))))))))}}function q(){const{id:e}=(0,k.g)(),t=(0,k.zy)(),a=t.pathname.slice(0,t.pathname.lastIndexOf("/"));let n=["lead","deal","order","request","project","client","contact"].find((e=>a.includes(e)))||"";const s=(0,k.Zp)();return(0,l.createElement)(H,{id:e,path:n,navigate:s})}},56323:(e,t,a)=>{"use strict";a.d(t,{A:()=>y});var l=a(51609),n=a(7364),s=a(21241),r=a(56303),o=a(46129),i=a(43065),c=a(24706),m=a(58322),d=a(57505),p=a(56564),h=a(53417),u=a(36478);const g=(0,l.lazy)((()=>Promise.all([a.e(1294),a.e(3566)]).then(a.bind(a,38043)))),{i18n:v,caps:E}=ndpv,b=E.includes("ndpv_client_role");class f extends l.Component{constructor(e){if(super(e),this.initState={id:null,title:"",first_name:"",org_name:"",person_id:null,org_id:null,email:"",mobile:"",country:"",region:"",address:"",city:"",zip:"",deal_id:"",request_id:"",status_id:"",budget:"",currency:"USD",start_date:null,due_date:null,tags:[],desc:"",date:!1},this.props.parentData){this.fromClient=!0;const{person:e,org:a}=this.props.parentData,l=(0,p.rL)(e,a);var t;Object.keys(l).length>0&&(this.initState.first_name=l.first_name,this.initState.email=l.email,this.initState.mobile=l.mobile,this.initState.org_name=null!==(t=l.name)&&void 0!==t?t:l.org_name)}this.state={submitPreloader:!1,form:this.initState,custom_field:!1,stages:[],tags:[]},this.selectCountry=this.selectCountry.bind(this)}componentDidMount(){if(this.props.custom_field){let e={};this.props.custom_field.map(((t,a)=>{e[t.id]=""}));const t={...this.state.form,...e};this.setState({form:t,custom_field:!0})}this.editData()}componentDidUpdate(){this.editData()}editData=()=>{if("edit"==this.props.modalType||"move"==this.props.modalType){if(this.state.form.id!=this.props.data.id){let e={...this.props.data};"move"==this.props.modalType&&(this.props.path&&"request"==this.props.path?e.request_id=e.id:e.deal_id=e.id),e.first_name=e.person?e.person.first_name:"",e.person?(e.person_id=e.person?e.person.id:null,e.email=e.person?e.person.email:"",e.mobile=e.person?e.person.mobile:"",e.web=e.person?e.person.web:"",e.country=e.person?e.person.country:"",e.region=e.person?e.person.region:"",e.address=e.person?e.person.address:"",e.city=e.person?e.person.city:"",e.zip=e.person?e.person.zip:""):(e.email=e.org?e.org.email:"",e.mobile=e.org?e.org.mobile:"",e.web=e.org?e.org.web:"",e.country=e.org?e.org.country:"",e.region=e.org?e.org.region:"",e.address=e.org?e.org.address:"",e.city=e.org?e.org.city:"",e.zip=e.org?e.org.zip:""),e.org_name=e.org?e.org.name:"",e.org&&(e.org_id=e.org?e.org.id:null),e.hasOwnProperty("start_date")&&e.start_date&&(e.start_date=new Date(e.start_date)),e.hasOwnProperty("due_date")&&e.due_date&&(e.due_date=new Date(e.due_date)),this.setState({form:e})}}else null!=this.state.form.id&&this.setState({form:this.initState})};handleChange=e=>{const t=e.target,a=t.name,l="checkbox"===t.type?t.checked:t.value;this.setState({form:{...this.state.form,[a]:l}})};selectCountry(e){this.setState({form:{...this.state.form,country:e}})}handleCFChange=e=>{const{name:t,value:a}=e.target;this.setState({form:{...this.state.form,[t]:a}})};currencyChange=e=>{this.setState({form:{...this.state.form,currency:e}})};handleStatusChange=e=>{this.setState({form:{...this.state.form,status_id:e}})};handleTagChange=e=>{this.setState({form:{...this.state.form,tags:e}})};handleSubmit=e=>{e.preventDefault();let t={...this.state.form};if(t.status_id&&(t.status_id=t.status_id.id),t.tags&&t.tags.length){let e=t.tags.map((function(e){return e.id}));t.tags=e}if(b)return t.project_req=!0,this.setState({submitPreloader:!0}),void r.A.add("deals",t).then((e=>{this.setState({submitPreloader:!1}),e.data.success?(s.oR.success(ndpv.i18n.aAdd),this.props.close(),this.props.project_req("board")):e.data.data.forEach((function(e){s.oR.error(e)}))}));this.props.reload?(this.setState({submitPreloader:!0}),"move"==this.props.modalType?r.A.add("projects",t).then((e=>{if(this.setState({submitPreloader:!1}),e.data.success){s.oR.success(ndpv.i18n.aProM);let t=e.data.data;this.props.close(),this.props.navigate(`/project/${t}`),(0,p.QF)(),this.props.reload()}else e.data.data.forEach((function(e){s.oR.error(e)}))})):r.A.edit("projects",t.id,t).then((e=>{this.setState({submitPreloader:!1}),e.data.success?(this.props.close(),this.props.reload()):e.data.data.forEach((function(e,t,a){s.oR.error(e)}))}))):this.props.handleSubmit(t)};handleContactChange=(e,t)=>{let a={...this.state.form};"person"==t?a.first_name=e:a.org_name=e,this.setState({form:a})};handleContactSelect=(e,t)=>{let a={...this.state.form};if(!e)return"person"==t?a.person_id=null:a.org_id=null,void this.setState({form:a});"person"==t?(a.first_name=e.first_name,a.person_id=e?e.id:null,a.email=e?e.email:"",a.mobile=e?e.mobile:"",a.web=e?e.web:"",a.country=e?e.country:"",a.region=e?e.region:"",a.address=e?e.address:"",a.img=e?e.img:""):(a.org_name=e.name,a.org_id=e?e.id:null),this.setState({form:a})};onDateChange=(e,t=null)=>{let a={...this.state.form};"date"==t?a.start_date=e:a.due_date=e,this.setState({form:a})};render(){const e=this.state.form;let t="";const a=this.props.modalType;"new"==a?t=v.new:"edit"==a?t=v.edit:"move"==a&&(t=v.moveto);const n=b||this.props.reload?this.state.submitPreloader:this.props.submitPreloader;return(0,l.createElement)("div",{className:"pv-overlay pv-show"},(0,l.createElement)("div",{className:"pv-modal-content"},(0,l.createElement)("div",{className:"pv-modal-header pv-gradient"},(0,l.createElement)("span",{className:"pv-close",onClick:()=>this.props.close()},(0,l.createElement)(i.FB,null)),(0,l.createElement)("h2",{className:"pv-modal-title"},b?v.new+" "+v.project+" "+v.req:t+" "+v.project),(0,l.createElement)("p",null,sprintf(v.formDesc,t,b?v.project+" "+v.req:v.project))),(0,l.createElement)(u._H,{submitPreloader:n,submitHandler:this.handleSubmit,close:this.props.close},(0,l.createElement)(u.sf,{formStyleClass:"pv-form-style-one"},(0,l.createElement)("div",{className:"row"},(0,l.createElement)(h.EY,{label:v.title,id:"field-title",type:"text",name:"title",wrapperClassName:"col-md",value:e.title,onChange:this.handleChange,validation:{required:{value:!0}}})),!b&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)(o.A,{first_name:e.first_name,org_name:e.org_name,fromClient:this.fromClient,onChange:this.handleContactChange,onSelect:this.handleContactSelect}),(0,l.createElement)("div",{className:"row"},(0,l.createElement)(h.EY,{label:v.email,id:"form-email",type:"email",name:"email",wrapperClassName:"col-lg",disabled:this.fromClient,value:e.email,onChange:this.handleChange,validation:{required:{value:!0},email:{value:!0}}}),(0,l.createElement)("div",{className:"col-lg"},(0,l.createElement)("label",{htmlFor:"form-mobile"},v.mob),(0,l.createElement)("input",{id:"form-mobile",type:"text",name:"mobile",disabled:this.fromClient,value:e.mobile,onChange:this.handleChange})))),!b&&(0,l.createElement)(h.pV,{data:e,selectCountry:this.selectCountry,handleChange:this.handleChange}),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-budget"},v.budget),(0,l.createElement)("input",{id:"field-budget",type:"number",name:"budget",value:e.budget,onChange:this.handleChange})),(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-currency"},v.cur),(0,l.createElement)(m.A,{key:e.currency,onChange:this.currencyChange,value:e.currency,form:!0}))),!b&&(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-status_id"},v.status),(0,l.createElement)(c.A,{selectedFirst:!0,modalType:a,data:e.status_id,taxonomy:"project_status",title:v.status,onChange:this.handleStatusChange,formTag:!1,color:!0}))),!b&&(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-start_date"},v.start_date),(0,l.createElement)("div",{className:"pv-field-date"},(0,l.createElement)(g,{date:e.start_date,label:v.start_date,type:"date",onDateChange:this.onDateChange}))),(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-start_date"},v.due_date),(0,l.createElement)("div",{className:"pv-field-date"},(0,l.createElement)(g,{date:e.due_date,label:v.due_date,type:"due_date",onDateChange:this.onDateChange})))),!b&&(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("label",{htmlFor:"field-tags"},v.tag),(0,l.createElement)("div",{className:"pi-field-multi"},(0,l.createElement)(c.A,{onChange:this.handleTagChange,data:e.tags,taxonomy:"tag",title:v.tag,formTag:!1,multi:!0})))),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col"},(0,l.createElement)("label",{htmlFor:"field-desc"},v.desc),(0,l.createElement)("textarea",{id:"form-desc",rows:2,name:"desc",value:e.desc.replace(/<br \/>/gi,""),onChange:this.handleChange}))),!b&&this.state.custom_field&&(0,l.createElement)(d.A,{mod:"project",type:a,form:e,onChange:this.handleCFChange})))))}}const y=(0,n.A)(f)},56564:(e,t,a)=>{"use strict";a.d(t,{Fi:()=>s,Gl:()=>n,QF:()=>r,rL:()=>o});var l=a(81083);const n=(e,t="USD",a="en")=>{try{return new Intl.NumberFormat(a,{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:2}).format(e)}catch(t){return e}},s=(e="")=>{if(e){let t=l.T9.find(((t,a)=>{if(t[1]===e)return!0}));if(t)return t[0]}},r=()=>{let e=window.location.hash,t=document.querySelectorAll("#toplevel_page_ndpv ul > li");for(let a=0,l=t.length;a<l;a++){const l=t[a].querySelector("a");e=e.replace(/[0-9]|\/+$/g,""),e&&l&&l.getAttribute("href").includes(e)?t[a].classList.add("current"):(t[a].classList.remove("current"),!e&&l&&"admin.php?page=ndpv#"===l.getAttribute("href")&&t[a].classList.add("current"))}},o=(...e)=>{const t={};return e.forEach((e=>{for(const a in e)e.hasOwnProperty(a)&&("first_name"!==a&&void 0!==e[a]&&null!==e[a]&&""!==e[a]?t[a]=e[a]:t.hasOwnProperty(a)||(t[a]=e[a]))})),t}},7364:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var l=a(51609),n=a(47767);const s=e=>t=>{const a=(0,n.Zp)();return(0,l.createElement)(e,{navigate:a,...t})}},29328:e=>{e.exports={AED:"د.إ",AFN:"؋",ALL:"L",AMD:"֏",ANG:"ƒ",AOA:"Kz",ARS:"$",AUD:"$",AWG:"ƒ",AZN:"₼",BAM:"KM",BBD:"$",BDT:"৳",BGN:"лв",BHD:".د.ب",BIF:"FBu",BMD:"$",BND:"$",BOB:"$b",BOV:"BOV",BRL:"R$",BSD:"$",BTC:"₿",BTN:"Nu.",BWP:"P",BYN:"Br",BYR:"Br",BZD:"BZ$",CAD:"$",CDF:"FC",CHE:"CHE",CHF:"CHF",CHW:"CHW",CLF:"CLF",CLP:"$",CNH:"¥",CNY:"¥",COP:"$",COU:"COU",CRC:"₡",CUC:"$",CUP:"₱",CVE:"$",CZK:"Kč",DJF:"Fdj",DKK:"kr",DOP:"RD$",DZD:"دج",EEK:"kr",EGP:"£",ERN:"Nfk",ETB:"Br",ETH:"Ξ",EUR:"€",FJD:"$",FKP:"£",GBP:"£",GEL:"₾",GGP:"£",GHC:"₵",GHS:"GH₵",GIP:"£",GMD:"D",GNF:"FG",GTQ:"Q",GYD:"$",HKD:"$",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"₪",IMP:"£",INR:"₹",IQD:"ع.د",IRR:"﷼",ISK:"kr",JEP:"£",JMD:"J$",JOD:"JD",JPY:"¥",KES:"KSh",KGS:"лв",KHR:"៛",KMF:"CF",KPW:"₩",KRW:"₩",KWD:"KD",KYD:"$",KZT:"₸",LAK:"₭",LBP:"£",LKR:"₨",LRD:"$",LSL:"M",LTC:"Ł",LTL:"Lt",LVL:"Ls",LYD:"LD",MAD:"MAD",MDL:"lei",MGA:"Ar",MKD:"ден",MMK:"K",MNT:"₮",MOP:"MOP$",MRO:"UM",MRU:"UM",MUR:"₨",MVR:"Rf",MWK:"MK",MXN:"$",MXV:"MXV",MYR:"RM",MZN:"MT",NAD:"$",NGN:"₦",NIO:"C$",NOK:"kr",NPR:"₨",NZD:"$",OMR:"﷼",PAB:"B/.",PEN:"S/.",PGK:"K",PHP:"₱",PKR:"₨",PLN:"zł",PYG:"Gs",QAR:"﷼",RMB:"￥",RON:"lei",RSD:"Дин.",RUB:"₽",RWF:"R₣",SAR:"﷼",SBD:"$",SCR:"₨",SDG:"ج.س.",SEK:"kr",SGD:"S$",SHP:"£",SLL:"Le",SOS:"S",SRD:"$",SSP:"£",STD:"Db",STN:"Db",SVC:"$",SYP:"£",SZL:"E",THB:"฿",TJS:"SM",TMT:"T",TND:"د.ت",TOP:"T$",TRL:"₤",TRY:"₺",TTD:"TT$",TVD:"$",TWD:"NT$",TZS:"TSh",UAH:"₴",UGX:"USh",USD:"$",UYI:"UYI",UYU:"$U",UYW:"UYW",UZS:"лв",VEF:"Bs",VES:"Bs.S",VND:"₫",VUV:"VT",WST:"WS$",XAF:"FCFA",XBT:"Ƀ",XCD:"$",XOF:"CFA",XPF:"₣",XSU:"Sucre",XUA:"XUA",YER:"﷼",ZAR:"R",ZMW:"ZK",ZWD:"Z$",ZWL:"$"}}}]);