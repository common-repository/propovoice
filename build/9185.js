"use strict";(globalThis.webpackChunkpropovoice=globalThis.webpackChunkpropovoice||[]).push([[9185],{31528:(e,t,a)=>{a.d(t,{H:()=>l,W:()=>r});var n=a(37577);function l(e,t){(0,n.h)((()=>{!function(e,t){var a={name:e.name,mimeType:"image/*"},n=new FormData;n.append("metadata",new Blob([JSON.stringify(a)],{type:"application/json"})),n.append("file",e),o("post","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart&fields=id",n,s,[t])}(e,t)}))}async function r(e){await(0,n.h)((async()=>{var t=await window.gapi.auth.getToken().access_token;await fetch(`https://www.googleapis.com/drive/v2/files/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}}).then((e=>console.log(e)))}))}function o(e,t,a,n,l=[]){var r=window.gapi.auth.getToken().access_token,o=new XMLHttpRequest;o.open(e,t),o.setRequestHeader("Authorization","Bearer "+r),o.responseType="json",o.onload=e=>{l.push(e),n.apply(this,l)},o.send(a)}function s(e,t){const a=t.target.response.id;e((e=>({...e,url:`https://drive.google.com/uc?export=view&id=${a}`}))),console.log("File uploaded successfully"),o("post",`https://www.googleapis.com/drive/v3/files/${a}/permissions`,new Blob([JSON.stringify({role:"reader",type:"anyone"})],{type:"application/json"}),i,[a])}function i(e){console.log(`The file id ${e} is public now!!!`)}},37577:(e,t,a)=>{a.d(t,{O:()=>c,h:()=>u});var n=a(56303),l=a(21241);let r,o=!1,s=!1;const i=(e,t,a)=>{const n=document.createElement("script");n.async=!0,n.defer=!0,n.src=t,n.id=e,n.onload=a,document.body.appendChild(n)},c=async()=>n.A.get("settings","tab=google_api_oauth2").then((e=>{if(!e.data.success||""===e.data.data.client_id||""===e.data.data.api_key)throw l.oR.error("Please setup Google Client ID and Api key in Settings!"),new Error("Please setup Google Client ID and Api key in Settings!");localStorage.setItem("g_client_id",e.data.data.client_id),localStorage.setItem("g_api_key",e.data.data.api_key)}));function d(){window.gapi.load("client:auth2",p)}async function p(){const e=localStorage.getItem("g_api_key");await window.gapi.client.init({apiKey:e,discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"]}),o=!0}function m(){const e=localStorage.getItem("g_client_id");r=google.accounts.oauth2.initTokenClient({client_id:e,scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file",callback:""}),s=!0}const h=e=>new Promise((t=>setTimeout(t,e)));async function u(e){await c(),i("gapi","https://apis.google.com/js/api.js",d),i("gsi","https://accounts.google.com/gsi/client",m),await h(500),r.callback=async t=>{if(void 0!==t.error)throw t;await e()},null===window.gapi.client.getToken()?await r.requestAccessToken({prompt:"consent"}):await r.requestAccessToken({prompt:""})}},74335:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(51609),l=a(7834),r=a(43065),o=a(21241),s=a(56303);const i=e=>{const t=(0,n.useRef)(),[a,i]=(0,n.useState)(!1),c=(0,n.useCallback)((()=>i(!1)),[]);(0,l.A)(t,c);const{row:d,project:p,boardView:m}=e,{i18n:h,caps:u}=ndpv,g=u.includes("ndpv_client_role");let v=!0;return p&&g&&m&&(v=!1),(0,n.createElement)("div",{className:"pv-action-content"},(0,n.createElement)("button",{className:a?"pv-active":"",onClick:()=>i((e=>!e)),style:{padding:"0 5px"}},(0,n.createElement)(r.ff,null)),a&&(0,n.createElement)("div",{className:"pv-dropdown-content pv-show",ref:t},v&&e.handleOverview&&(0,n.createElement)("a",{onClick:()=>{i(!1),e.handleOverview(d.id)}},h.ov),!g&&e.editEntry&&(0,n.createElement)("a",{onClick:()=>{i(!1),e.editEntry("edit",d)}},h.edit),!g&&(0,n.createElement)("a",{onClick:()=>{if(i(!1),d.file&&d.url){const t=new URL(d.url),a=new URLSearchParams(t.search).get("id");e.deleteEntry("singleDrive",[d.id,a])}else e.deleteEntry("single",d.id)}},h.del),e.resendPassword&&e.resendPassword.show&&(0,n.createElement)("a",{onClick:()=>{i(!1),((e,t)=>{let a={id:e,from:t,type:"resend-password"};s.A.add("actions",a,"pro").then((e=>{e.data.success?o.oR.success("Password resent"):e.data.data.forEach((function(e){o.oR.error(e)}))}))})(d.id,e.resendPassword.from)}},"Resend Password")))}},64027:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(51609);const l=e=>{const t=e=>(0,n.createElement)("button",{key:e.slug,className:"pv-btn pv-btn-small pv-bg-stroke pv-bg-shadow pv-bg-hover-shadow",onClick:()=>e.handleClick(e.type)},e.label);return(0,n.createElement)("div",{className:"pv-table-action pv-mb-10"},(0,n.createElement)("div",{className:"pv-checkbox-field pv-mt-6"},(0,n.createElement)("span",{style:{marginLeft:0}},e.length," ",ndpv.i18n.iselec," ")),(0,n.createElement)("div",{className:"pv-small-button-group"},e.path&&e.actions&&e.actions[e.path].map((e=>t(e))),e.actions&&e.actions.common.map((e=>t(e))),!e.actions&&t({slug:"delete",type:"selected",label:ndpv.i18n.del,handleClick:e.deleteEntry})))}},41251:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(51609);const l=e=>(0,n.createElement)("nav",{className:"pv-breadcrumb"},(0,n.createElement)("ul",{className:""},(0,n.createElement)("li",null,(0,n.createElement)("a",{href:"#",className:""},ndpv.i18n.home)),(0,n.createElement)("li",null,(0,n.createElement)("svg",{width:5,height:10,viewBox:"0 0 5 10",fill:"none"},(0,n.createElement)("path",{d:"M0.5 1.25L4.25 5L0.5 8.75",stroke:"#718096",strokeLinecap:"round",strokeLinejoin:"round"}))),(0,n.createElement)("li",{className:"pv-active"},"Lead"==e.title?ndpv.i18n.lead:"Deal Pipeline"==e.title?ndpv.i18n.deal_pipeline:"Estimate"==e.title?ndpv.i18n.est:"Invoice"==e.title?ndpv.i18n.inv:"Client"==e.title?ndpv.i18n.client:"Project"==e.title?ndpv.i18n.project:"Task"==e.title?ndpv.i18n.task:"Contact Book"==e.title?ndpv.i18n.ct_book:"Settings"==e.title?ndpv.i18n.settings:e.title)))},22803:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(51609),l=a(17604);const r=e=>{const{title:t,clickHandler:a,isClient:r,boardView:o,searchVal:s,logo:i=""}=e,{i18n:c,caps:d}=ndpv,p=e.mod?e.mod:"";let m=c.created,h=c.notAdd;return"package"==p&&d.includes("ndpv_client_role")&&(h=c.noResClient,m=""),(0,n.createElement)("div",{className:"pv-empty-content pv-text-center"},(0,n.createElement)("svg",{width:"77",height:"76",viewBox:"0 0 77 76",fill:"none"},(0,n.createElement)("path",{d:"M61.8594 1.30469V14.8447H75.3985L61.8594 1.30469Z",fill:"#4C6FFF",fillOpacity:"0.5"}),(0,n.createElement)("path",{d:"M59.6328 19.2969C58.4032 19.2969 57.4062 18.3 57.4062 17.0703V0H25.4922C21.809 0 18.8125 2.99651 18.8125 6.67969V31.571C19.5461 31.5045 20.2884 31.4688 21.0391 31.4688C28.6284 31.4688 35.4222 34.9386 39.9182 40.375H64.0859C65.3156 40.375 66.3125 41.3719 66.3125 42.6016C66.3125 43.8312 65.3156 44.8281 64.0859 44.8281H42.8517C44.2434 47.5439 45.1409 50.5526 45.429 53.7344H64.0859C65.3156 53.7344 66.3125 54.7313 66.3125 55.9609C66.3125 57.1906 65.3156 58.1875 64.0859 58.1875H45.429C44.7631 65.5409 40.8342 71.9664 35.1047 76H70.0234C73.7066 76 76.7031 73.0035 76.7031 69.3203V19.2969H59.6328ZM64.0859 31.4688H31.4297C30.2 31.4688 29.2031 30.4718 29.2031 29.2422C29.2031 28.0125 30.2 27.0156 31.4297 27.0156H64.0859C65.3156 27.0156 66.3125 28.0125 66.3125 29.2422C66.3125 30.4718 65.3156 31.4688 64.0859 31.4688Z",fill:"#4C6FFF"}),(0,n.createElement)("circle",{cx:"20",cy:"56",r:"20",fill:"#A5B7FF"}),(0,n.createElement)("path",{d:"M17.9091 67.6136V45.1136H21.7273V67.6136H17.9091ZM8.56818 58.2727V54.4545H31.0682V58.2727H8.56818Z",fill:"white"})),!s.length&&(0,n.createElement)("h2",{className:"pv-empty-title"},r?o?c.no_req_project:c.no_project:(0,l.sprintf)(h,"lead"==p||"client"==p||"person"==p||"org"==p||"team"==p?c.added:m,t)),s.length>0&&(0,n.createElement)("h2",{className:"pv-empty-title"},(0,l.sprintf)(c.noRes,t)),!d.includes("ndpv_client_role")&&"order"!=p&&(0,n.createElement)("button",{className:"pv-btn pv-bg-blue pv-bg-hover-blue",onClick:()=>a("new")},(0,n.createElement)("svg",{width:14,height:12,viewBox:"0 0 12 15",fill:"none"},(0,n.createElement)("path",{d:"M2.5 8H13.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.createElement)("path",{d:"M8 2.5V13.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),"lead"==p||"client"==p||"person"==p||"org"==p||"team"==p?c.let_start_adding:c.let_start_creating))}},7280:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(51609),l=a(49764),r=a.n(l);const o=e=>(0,n.createElement)("div",{className:"pv-pagination-content"},(0,n.createElement)(r(),{previousClassName:"pv-previous",nextClassName:"pv-next",disabledClassName:"pv-disabled",previousLabel:(0,n.createElement)("svg",{width:9,height:14,viewBox:"0 0 9 14",fill:"none"},(0,n.createElement)("path",{d:"M7.5 12.833L1.667 7 7.5 1.167",stroke:"#4C6FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),nextLabel:(0,n.createElement)("svg",{width:9,height:14,viewBox:"0 0 9 14",fill:"none"},(0,n.createElement)("path",{d:"M1.5 12.833L7.333 7 1.5 1.167",stroke:"#4C6FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),breakLabel:(0,n.createElement)("svg",{width:15,height:15,viewBox:"0 0 24 24",fill:"none"},(0,n.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 12a2 2 0 10-4 0 2 2 0 004 0zM14 12a2 2 0 10-4 0 2 2 0 004 0zM21 12a2 2 0 10-4 0 2 2 0 004 0z",fill:"#718096"})),breakClassName:"break",forcePage:e.forcePage,pageCount:e.pageCount,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:e.onPageChange,containerClassName:"pv-pagination",activeClassName:"pv-active"}))},9519:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(51609),l=a(43516);const r=e=>{const{rows:t=5}=e;return(0,n.createElement)(l.Ay,{viewBox:"0 0 1500 "+60*t,...e},new Array(t).fill(" ").map(((e,a)=>{const l=e=>t>1?e+60*a:e;return(0,n.createElement)(n.Fragment,{key:a},(0,n.createElement)("rect",{x:"20",y:`${l(20)}`,rx:"4",ry:"4",width:"40",height:"20"}),(0,n.createElement)("rect",{x:"100",y:`${l(20)}`,rx:"10",ry:"4",width:"600",height:"20"}),(0,n.createElement)("rect",{x:"750",y:`${l(20)}`,rx:"10",ry:"4",width:"600",height:"20"}),(0,n.createElement)("rect",{x:"1450",y:`${l(20)}`,rx:"4",ry:"4",width:"20",height:"20"}),(0,n.createElement)("rect",{y:`${l(59)}`,x:"10",ry:"10",width:"1500",height:"1"}))})))}},93947:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var n=a(51609),l=a(41251),r=a(9519),o=a(7280),s=a(7834),i=a(68951),c=a(56564),d=a(47767);const p=(0,a(58751).A)((function(e){const t=(0,n.useRef)(),[a,l]=(0,n.useState)(null),r=(0,n.useCallback)((()=>l(null)),[]);(0,s.A)(t,r);const[o,p]=(0,n.useState)({}),m=e=>{l(a==e?null:e)};(0,n.useEffect)((()=>{p(e.data)}),[e.data]);const h=(0,d.Zp)(),u=ndpv.i18n;return(0,n.createElement)("div",{className:"pv-board"},(0,n.createElement)(i.JY,{onDragEnd:t=>((e,t,a,n)=>{if(!t.destination)return;const{source:l,destination:r}=t;if(l.droppableId!==r.droppableId){const t=a[l.droppableId],o=a[r.droppableId],s=[...t.items],i=[...o.items],[c]=s.splice(l.index,1);i.splice(r.index,0,c),n({...a,[l.droppableId]:{...t,items:s},[r.droppableId]:{...o,items:i}}),e("projects",parseInt(a[l.droppableId].items[l.index].id),{status_id:parseInt(o.id),reorder:i.map((function(e){return parseInt(e.id)}))})}else{const t=a[l.droppableId],o=[...t.items],[s]=o.splice(l.index,1);o.splice(r.index,0,s),n({...a,[l.droppableId]:{...t,items:o}});let i=o.map((function(e){return parseInt(e.id)}));e("projects",parseInt(a[l.droppableId].items[l.index].id),{reorder:i})}})(e.update,t,o,p)},Object.entries(o).map((([l,r],o)=>(0,n.createElement)("div",{className:"pv-board-column",key:l},(0,n.createElement)("div",{className:"pv-board-column-title pv-bg-shadow",style:{borderColor:r.color,color:r.color}},(0,n.createElement)("h4",{className:""},r.name),(0,n.createElement)("div",{className:"pv-action-content"},(0,n.createElement)("button",{className:l==a?"pv-active":"",onClick:()=>m(l)},(0,n.createElement)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},(0,n.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 12C7 10.8954 6.10457 10 5 10C3.89543 10 3 10.8954 3 12C3 13.1046 3.89543 14 5 14C6.10457 14 7 13.1046 7 12Z",fill:"#718096"}),(0,n.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14C13.1046 14 14 13.1046 14 12Z",fill:"#718096"}),(0,n.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 12C21 10.8954 20.1046 10 19 10C17.8954 10 17 10.8954 17 12C17 13.1046 17.8954 14 19 14C20.1046 14 21 13.1046 21 12Z",fill:"#718096"}))),l==a&&(0,n.createElement)("div",{className:"pv-dropdown-content pv-show",ref:t},(0,n.createElement)("a",{onClick:()=>{e.taxForm("edit",r),m(l)}},u.edit)))),(0,n.createElement)(i.gL,{droppableId:l,key:l},((t,a)=>(0,n.createElement)("div",{...t.droppableProps,ref:t.innerRef,className:"pv-board-content"},r.items.map(((e,t)=>{let a=ndpv.assetImgUri+"avatar.png";return e.person&&e.person.img?a=e.person.img.src:e.org&&e.org.img&&(a=e.org.img.src),(0,n.createElement)(i.sx,{key:e.id,draggableId:e.id,index:t},((t,l)=>{return(0,n.createElement)("div",{onClick:()=>{return t=e.id,void h(`/project/${t}`);var t},ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,className:"pv-board-column-item pv-bg-shadow"},(0,n.createElement)("div",{className:"pv-board-item-top"},(0,n.createElement)("h4",null,(o=e.title).length>28?`${o.substring(0,28)}... `:o),e.budget&&(0,n.createElement)("span",null,(0,c.Gl)(e.budget,e.currency))),(0,n.createElement)("div",{className:"pv-avatar-content"},(0,n.createElement)("img",{src:a,alt:"avatar"}),(0,n.createElement)("div",{className:"pv-avatar-text"},(0,n.createElement)("h5",null,e.person?e.person.first_name:e.org.name," "),(0,n.createElement)("p",null,e.person?(0,n.createElement)(n.Fragment,null,(e.person.region||e.person.country)&&(0,n.createElement)(n.Fragment,null,e.person.region&&e.person.country?e.person.region+", ":""," ",(0,c.Fi)(e.person.country))):(0,n.createElement)(n.Fragment,null,(e.org.region||e.org.country)&&(0,n.createElement)(n.Fragment,null,e.org.region&&e.org.country?e.org.region+", ":""," ",(0,c.Fi)(e.org.country)))),"won"==r.type&&(0,n.createElement)("span",{className:"pv-badge",style:{backgroundColor:"#DDFFDE",color:"#0BA24B"}},"Won"),"lost"==r.type&&(0,n.createElement)("span",{className:"pv-badge",style:{backgroundColor:"#FFDEEB",color:"#FF267F"}},"Lost"))));var o}))})),t.placeholder,0==o&&(0,n.createElement)("button",{className:"pv-btn pv-btn-medium pv-bg-stroke pv-bg-shadow pv-bg-hover-shadow",onClick:()=>e.new("new")},(0,n.createElement)("svg",{width:14,height:12,viewBox:"0 0 12 15",fill:"none"},(0,n.createElement)("path",{d:"M2.5 8H13.5",stroke:"#4A5568",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.createElement)("path",{d:"M8 2.5V13.5",stroke:"#4A5568",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),u.new," ",u.project)))))))))}));var m=a(19642),h=a(64027),u=a(56323),g=a(93300),v=a.n(g),E=a(74335),w=a(43065);const{i18n:b,caps:k}=ndpv,f=k.includes("ndpv_client_role"),y=e=>(0,n.createElement)("thead",null,(0,n.createElement)("tr",null,(0,n.createElement)("th",null,!f&&(0,n.createElement)("input",{type:"checkbox",checked:e.checkedBoxes.data.length===e.checkedBoxes.totalRow,onChange:t=>e.checkedBoxes.handle(t,"all")})),(0,n.createElement)("th",null,b.project," ",b.title),!f&&(0,n.createElement)("th",null,(0,n.createElement)(w.Ps,null),b.client),(0,n.createElement)("th",null,(0,n.createElement)(w.i3,null),b.start," ",b.date),(0,n.createElement)("th",null,(0,n.createElement)(w.i3,null),b.due_date),(0,n.createElement)("th",null,(0,n.createElement)(w.i3,null),b.budget),(0,n.createElement)("th",null,(0,n.createElement)(w.vw,null),b.status),!f&&(0,n.createElement)("th",null,b.aut),(0,n.createElement)("th",null,b.action))),C=e=>{const t=(0,d.Zp)(),a=a=>{f&&e.boardView||t(`/project/${a}`)};let l=e.tableData.map(((t,l)=>{const r=-1!==e.checkedBoxes.data.indexOf(t.id);return(0,n.createElement)("tr",{key:l},(0,n.createElement)("td",null,!f&&(0,n.createElement)("input",{type:"checkbox",value:t.id,checked:r,onChange:a=>e.checkedBoxes.handle(a,"single",t.id)})),(0,n.createElement)("td",{onClick:()=>a(t.id),className:"pv-cursor-pointer"},(0,n.createElement)("span",{className:"pv-list-title",style:{maxWidth:"210px",display:"inline-block"}},t.title)),!f&&(0,n.createElement)("td",{onClick:()=>a(t.id),className:"pv-cursor-pointer",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"400px"}},(t.person||t.org)&&(0,n.createElement)(n.Fragment,null,t.person?t.person.email:t.org.email)),(0,n.createElement)("td",{onClick:()=>a(t.id),className:"pv-cursor-pointer"},t.start_date&&(0,n.createElement)(v(),{format:"YYYY-MM-DD"},t.start_date)),(0,n.createElement)("td",{onClick:()=>a(t.id),className:"pv-cursor-pointer"},t.due_date&&(0,n.createElement)(v(),{format:"YYYY-MM-DD"},t.due_date)),(0,n.createElement)("td",{onClick:()=>a(t.id),className:"pv-cursor-pointer"},t.budget&&t.currency?(0,c.Gl)(t.budget,t.currency):""),(0,n.createElement)("td",null,t.status_id&&(0,n.createElement)(n.Fragment,null,t.status_id.color&&t.status_id.bg_color&&(0,n.createElement)("span",{className:"pv-badge",style:{backgroundColor:t.status_id.bg_color,color:t.status_id.color}},(0,n.createElement)("svg",{width:6,height:6,viewBox:"0 0 6 6",fill:"none"},(0,n.createElement)("circle",{cx:3,cy:3,r:3,fill:t.status_id.color})),t.status_id.label),(!t.status_id.color||!t.status_id.bg_color)&&(0,n.createElement)("span",{className:"pv-badge"},t.status_id.label))),!f&&(0,n.createElement)("td",{onClick:()=>a(t.id),className:"pv-cursor-pointer"},t.author),(0,n.createElement)("td",{className:"pv-action"},(!f||!e.boardView)&&(0,n.createElement)(E.A,{project:!0,boardView:e.boardView,row:t,handleOverview:a,editEntry:e.editEntry,deleteEntry:e.deleteEntry})))}));return(0,n.createElement)("tbody",null,l)},_=e=>{const{tableData:t,editEntry:a,checkedBoxes:l,deleteEntry:r,boardView:o}=e;return(0,n.createElement)(n.Fragment,null,t.length>0&&(0,n.createElement)("div",{className:"pv-table-wrap"},(0,n.createElement)("table",{className:"pv-table pv-table-four"},(0,n.createElement)(y,{checkedBoxes:l}),(0,n.createElement)(C,{tableData:t,editEntry:a,checkedBoxes:l,deleteEntry:r,boardView:o}))))};class x extends n.Component{constructor(e){super(e),this.state={form:{text:"",level:"",tag:""},searchModal:!1},this.timeout=0}handleChange=e=>{const{name:t,value:a}=e.target;this.setState({form:{...this.state.form,[t]:a}},(()=>{"text"==t?(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{let e={...this.state.form};this.props.boardView?this.props.isClient&&(e.table_view=!0,e.project_req=!0):e.table_view=!0,this.props.handleSubmit(e)}),300)):this.props.handleSubmit(this.state.form)}))};render(){const{title:e,boardView:t,showing:a,showItem:l,total:r,isClient:o,module_id:s}=this.props,i="#4A5568",c="#A0AEC0",d=ndpv.i18n;return(0,n.createElement)("div",{className:"pv-search-bar"},!s&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)("button",{className:"pv-btn pv-btn-icon pv-bg-hover-shadow",onClick:()=>this.props.viewChange("table"),style:{marginLeft:0,marginRight:10},title:o?d.project:d.tbl_view},o?(0,n.createElement)("span",{style:{color:t?c:i}},d.project):(0,n.createElement)("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none"},(0,n.createElement)("path",{d:"M7.5 5H16.875",stroke:t?c:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.createElement)("path",{d:"M7.5 10H16.875",stroke:t?c:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.createElement)("path",{d:"M7.5 15H16.875",stroke:t?c:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.createElement)("path",{d:"M3.125 5H4.375",stroke:t?c:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.createElement)("path",{d:"M3.125 10H4.375",stroke:t?c:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.createElement)("path",{d:"M3.125 15H4.375",stroke:t?c:i,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))),(0,n.createElement)("button",{className:"pv-btn pv-btn-icon pv-bg-hover-shadow pv-mr-10",onClick:()=>this.props.viewChange("board"),style:{marginLeft:0},title:o?d.req_project:d.board_view},o?(0,n.createElement)("span",{style:{color:t?i:c}},d.req_project):(0,n.createElement)("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none"},(0,n.createElement)("path",{d:"M3.125 4.375h13.75v9.375a.624.624 0 01-.625.625h-3.125a.624.624 0 01-.625-.625v-1.875h-5v4.375a.625.625 0 01-.625.625H3.75a.625.625 0 01-.625-.625V4.375zM7.5 9.375H3.125M7.5 4.375v7.5M12.5 9.375h4.375M12.5 4.375v7.5",stroke:t?i:c,strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round"})))),(0,n.createElement)("div",{className:"pv-search-box pv-medium-search-bar"},(0,n.createElement)(w.vj,null),(0,n.createElement)("input",{type:"text",className:"pv-search-input",placeholder:d.search+" "+e,name:"text",value:this.state.form.text,onChange:this.handleChange})),(0,n.createElement)("div",{className:"pv-total-list"},(0,n.createElement)("p",null,d.show," ",(0,n.createElement)("select",{onChange:l},(0,n.createElement)("option",{value:"10"},"10"),(0,n.createElement)("option",{value:"20"},"20"),(0,n.createElement)("option",{value:"30"},"30"),(0,n.createElement)("option",{value:"50"},"50"),(0,n.createElement)("option",{value:"99"},"99"),(0,n.createElement)("option",{value:"99999"},d.all)),e," ",this.props.boardView?d.per+" "+d.stage:(0,n.createElement)(n.Fragment,null,d.from," ",(0,n.createElement)("span",null,r)))))}}var L=a(22803),N=a(25928);const S=(0,a(9435).A)((e=>{const[t,a]=(0,n.useState)(!1),[s,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[g,v]=(0,n.useState)("new"),E={id:null,label:"",color:"",bg_color:"",icon:null},[w,b]=(0,n.useState)(E),k=(e="new",t=null)=>{if("new"==e&&wage.length>0)(0,N.A)();else if(d(!0),v(e),"new"==e)b(E);else{const e={id:t.id,label:t.name,color:t.color,bg_color:t.bg_color,icon:null};b(e)}},{i18n:f,caps:y}=ndpv,C=y.includes("ndpv_client_role");(0,n.useEffect)((()=>{let t={table_view:!0};return e.dashboard&&(t.dashboard=!0),e.getLists(t),()=>{e.onLoad&&e.onLoad(!1)}}),[]);const S=(t="")=>{if(wage.length>0&&"board"==t&&!C)return void(0,N.A)();a(!0);let n,l=!1,r={table_view:!0};"board"==t?(n=!0,C?r={table_view:!0,project_req:!0}:(l=!0,r={})):C&&(r={table_view:!0}),e.getLists(r).then((t=>{i(n),e.onLoad(l),a(!1)}))},A=(t,a)=>{s?e.deleteEntry(t,a):e.deleteEntry(t,a,null,{table_view:!0})},{title:M,lists:P,extra:j,checkedBoxes:F,searchVal:B}=e.state;let V=!1;e.module_id||!s||C||(V=!0);let R=!1;return e.module_id?R=!0:!e.module_id&&s||!C?!e.module_id&&s&&C?R=!0:e.module_id||s||C||(R=!0):R=!0,(0,n.createElement)("div",{className:"ndpv-components"},!e.module_id&&!e.dashboard&&(0,n.createElement)(l.A,{title:M}),e.state.formModal&&(0,n.createElement)(u.A,{parentData:e.data,custom_field:j.custom_field,handleSubmit:t=>{s?e.handleSubmit(t):e.handleSubmit(t,e.state.formModalType,{table_view:!0})},modalType:e.state.formModalType,data:e.state.list,submitPreloader:e.state.submitPreloader,close:e.closeForm,boardView:s,project_req:S}),c&&(0,n.createElement)(m.A,{...e,taxonomy:"project_status",title:f.status,reload:()=>{s?e.getLists():e.getLists({table_view:!0})},modalType:g,data:w,color:!0,close:()=>d(!1)}),!e.dashboard&&(0,n.createElement)("div",{className:"row"},(0,n.createElement)("div",{className:"col"},(0,n.createElement)("h2",{className:"pv-page-title"},ndpv.i18n.project)),(0,n.createElement)("div",{className:"col"},(0,n.createElement)("div",{className:"pv-list-single-button-content"},!C&&(0,n.createElement)("button",{className:"pv-btn pv-btn-medium pv-bg-stroke pv-bg-hover-shadow",onClick:()=>k("new")},(0,n.createElement)("svg",{width:14,height:12,viewBox:"0 0 12 15",fill:"none"},(0,n.createElement)("path",{d:"M2.5 8H13.5",stroke:"#4A5568",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.createElement)("path",{d:"M8 2.5V13.5",stroke:"#4A5568",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),f.add," ",f.status),(0,n.createElement)("button",{className:"pv-btn pv-btn-medium pv-bg-blue pv-bg-hover-blue pv-bg-shadow pv-color-white",onClick:()=>e.openForm("new")},(0,n.createElement)("svg",{width:14,height:12,viewBox:"0 0 12 15",fill:"none"},(0,n.createElement)("path",{d:"M2.5 8H13.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.createElement)("path",{d:"M8 2.5V13.5",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),C?f.send+" "+f.req:f.add+" "+M)))),!e.dashboard&&(0,n.createElement)(x,{isClient:C,module_id:e.module_id,title:M,showing:P.length,showItem:t=>{s?e.showItem(t):e.showItem(t,{table_view:!0})},total:e.state.total,handleSubmit:e.getLists,boardView:s,viewChange:S}),F.length>0&&(0,n.createElement)(h.A,{length:F.length,uncheckAll:e.uncheckAll,deleteEntry:A}),e.state.empty&&!e.dashboard&&(0,n.createElement)(L.A,{title:M,searchVal:B,clickHandler:()=>e.openForm("new"),isClient:C,boardView:s}),e.state.preloader||t?(0,n.createElement)(r.A,null):(0,n.createElement)(n.Fragment,null,V&&(0,n.createElement)(p,{new:e.openForm,data:P,taxForm:k}),R&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(_,{tableData:P,searchVal:B,boardView:s,editEntry:e.openForm,checkedBoxes:{data:F,handle:e.handleCheckbox,totalRow:P.length},deleteEntry:A}),e.state.totalPage>1&&(0,n.createElement)(o.A,{forcePage:e.state.currentPage-1,pageCount:e.state.totalPage,onPageChange:t=>e.handlePageClick(t,{table_view:!0})}))))}),"project",ndpv.i18n.project)},58751:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(51609),l=a(57536),r=a(60235);const o=(e,t="")=>{let a=r.y0+t;return class extends n.Component{constructor(e){super(e)}getAll=(e=null,t="")=>(e&&(a=r.y0+e),l.A.get(`${a}/?${t}`,r.Sh));get=(e=null,t)=>(e&&(a=r.y0+e),l.A.get(`${a}/${t}`,r.Sh));create=(e=null,t)=>(e&&(a=r.y0+e),l.A.post(a,t,r.Sh));update=(e=null,t,n)=>(e&&(a=r.y0+e),l.A.put(`${a}/${t}`,n,r.Sh));remove=(e=null,t)=>(e&&(a=r.y0+e),l.A.delete(`${a}/${t}`,r.Sh));findByArg=(e=null,t="")=>(e&&(a=r.y0+e),l.A.get(`${a}?title=${t}`,r.Sh));render(){return(0,n.createElement)(e,{...this.props,getAll:this.getAll,get:this.get,create:this.create,update:this.update,remove:this.remove,findByArg:this.findByArg})}}}},9435:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(51609),l=a(21241),r=a(31528),o=a(57536),s=a(60235);const i=(e,t,a,i="",c=!1)=>{i||(i=t+"s");const d=(c?s.BB:s.y0)+i;return class extends n.Component{constructor(e){super(e),this.state={title:a,empty:!1,submitPreloader:!1,preloader:!0,formModal:!1,searchModal:!1,formModalType:"new",list:{id:null},extra:{},lists:[],checkedBoxes:[],offset:0,perPage:10,total:1,totalPage:1,currentPage:1,searchVal:""},this.timeout=0}componentDidMount(){}getLists=(e=null)=>{let t={page:this.state.currentPage,per_page:this.state.perPage};this.props.tab_id&&(t.tab_id=this.props.tab_id),this.props.dashboard&&(t.dashboard=this.props.dashboard),this.props.module_id&&(t.module_id=this.props.module_id),e&&(e=Object.entries(e).reduce(((e,[t,a])=>a?(e[t]=a,e):e),{}),t={...t,...e});let a=new URLSearchParams(t).toString();const n=o.A.get(`${d}/?${a}`,s.Sh);return n.then((e=>{let t=e.data.data.result,a=e.data.data.total,n=!t.length,l={};e.data.data.hasOwnProperty("extra")&&(l=e.data.data.extra),this.setState({lists:t,extra:l,preloader:!1,empty:n,total:a,totalPage:Math.ceil(a/this.state.perPage)})})),n};handleSearch=e=>{const{value:t}=e.target;this.setState({searchVal:t},(()=>{this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.getLists({s:this.state.searchVal})}),300)}))};showItem=(e,t=null)=>{const{value:a}=e.target;this.setState({perPage:a},(()=>{this.getLists(t)}))};handleSubmit=(e,t=null,a=null)=>{let n=this.state.formModalType;t&&(n=t),this.setState({submitPreloader:!0}),"new"==n?o.A.post(d,e,s.Sh).then((e=>{e.data.success?(this.setState({formModal:!1,submitPreloader:!1}),l.oR.success(ndpv.i18n.aAdd),this.getLists(a)):(this.setState({submitPreloader:!1}),e.data.data.forEach((e=>{l.oR.error(e)})))})):o.A.put(`${d}/${e.id}`,e,s.Sh).then((e=>{e.data.success?(this.setState({formModal:!1,submitPreloader:!1}),l.oR.success(ndpv.i18n.aUpd),this.getLists(a)):(this.setState({submitPreloader:!1}),e.data.data.forEach((e=>{l.oR.error(e)})))}))};deleteEntry=async(e,t,a=null,n=null)=>{if(confirm(ndpv.i18n.aConf)){"singleDrive"==e&&(await(0,r.W)(t[1]),t=t[0]);let a="single"==e||"singleDrive"==e?t:this.state.checkedBoxes.toString();o.A.delete(`${d}/${a}`,s.Sh).then((t=>{t.data.success?(l.oR.success(ndpv.i18n.aDel),"single"!=e&&this.setState({checkedBoxes:[]}),this.getLists(n)):t.data.data.forEach((e=>{l.oR.error(e)}))}))}};openForm=(e="new",t=null)=>{"new"==e?this.setState({formModal:!0,formModalType:"new"}):(t.hasOwnProperty("start_date")&&t.start_date&&(t.start_date=new Date(t.start_date)),t.hasOwnProperty("due_date")&&t.due_date&&(t.due_date=new Date(t.due_date)),this.setState({formModal:!0,formModalType:"edit",list:t}))};closeForm=(e="new")=>{"new"==e?this.setState({formModal:!1}):this.setState({searchModal:!1})};handleCheckbox=(e,t,a=null)=>{let n=this.state.checkedBoxes;if("single"==t)e.target.checked?(n.push(a),this.setState({checkedBoxes:n})):(n.splice(n.indexOf(a),1),this.setState({checkedBoxes:n}));else if(e.target.checked){let e=[];this.state.lists.map((t=>{e.push(t.id)})),this.setState({checkedBoxes:e})}else this.setState({checkedBoxes:[]})};handlePageClick=(e,t=null)=>{const a=e.selected+1,n=a*this.state.perPage;this.setState({currentPage:a,offset:n},(()=>{this.getLists(t)}))};render(){return(0,n.createElement)(e,{...this.props,state:this.state,openForm:this.openForm,closeForm:this.closeForm,showItem:this.showItem,getLists:this.getLists,handleCheckbox:this.handleCheckbox,uncheckAll:()=>this.setState({checkedBoxes:[]}),handleSubmit:this.handleSubmit,handleSearch:this.handleSearch,handlePageClick:this.handlePageClick,deleteEntry:this.deleteEntry})}}}}}]);