"use strict";(globalThis.webpackChunkpropovoice=globalThis.webpackChunkpropovoice||[]).push([[5187],{18235:(e,t,a)=>{a.d(t,{A:()=>r});var l=a(51609),n=a.n(l),i=(a(75199),a(67741),a(16075),a(77726),a(55775),a(78002));class s extends l.Component{constructor(e){super(e),this.state={loaded:!1,value:"",content:""},this.editorRef=n().createRef()}handleEditorChange=(e,t)=>{this.props.readOnly||this.setState({content:e},(()=>{null==this.props.index?this.props.changeHandler(this.state.content):this.props.changeHandler(this.props.index,this.state.content)}))};componentDidUpdate(){0==this.state.loaded&&this.props.value&&this.setState({loaded:!0,content:this.props.value})}render=()=>{const{content:e}=this.state;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.K,{onInit:(e,t)=>this.editorRef.current=t,init:{readonly:this.props.readOnly,skin:!1,branding:!1,content_css:!1,height:150,menubar:!1,plugins:["lists"],content_style:"@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap');.mce-content-body {font-family: 'Inter';fontSize = '10';font-style: normal;font-weight: 400;}",toolbar:"undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist"},value:e,onEditorChange:this.handleEditorChange}))}}const r=s},25187:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var l=a(51609),n=a(53417),i=a(36478),s=a(92536),r=a(56303),o=a(25928),c=a(18235),d=a(21241);const m=function(){return(0,l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",viewBox:"0 0 20 20"},(0,l.createElement)("path",{fill:"#718096",fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}))},u={display:"flex",justifyContent:"end",gap:"20px"},p={cursor:"pointer"};function v({setVisibility:e,module_id:t,data:a,parent:v}){var h,E;const[g,b]=(0,l.useState)({to:a.person.email,subject:"",message:"",postId:t,attachments:{}}),[f,y]=(0,l.useState)([]),[w,C]=(0,l.useState)(!1),[x,S]=(0,l.useState)(!1),[N,j]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{r.A.add("custom-email-templates").then((e=>{y(e.data)}))}),[]),(0,l.createElement)("div",null,(0,l.createElement)(i._H,{submitPreloader:!1,submitHandler:()=>{wage.length>0?(0,o.A)():r.A.add("send-email",g).then((t=>{t.data.success?(d.oR.success("Email sent"),e(!1),window.dispatchEvent(new Event("emailSent"))):d.oR.error("Unable to send email")})).catch((e=>{d.oR.error("Someting went wrong")}))},submitLabel:"Send",isPro:!0,close:!1},(0,l.createElement)(i.sf,{formStyleClass:"pv-form-style-one"},(0,l.createElement)("div",{className:"row"},(0,l.createElement)(n.EY,{label:"To",disabled:!0,id:"field-to",type:"email",name:"email-to",wrapperClassName:"col-md",value:g.to,onChange:e=>b({...g,to:e.target.value}),validation:{required:{value:!0}}})),(0,l.createElement)("div",{style:u},(0,l.createElement)("div",{onClick:()=>C(!0),style:p},"Add CC"),(0,l.createElement)("div",{onClick:()=>S(!0),style:p},"Add Bcc")),w&&(0,l.createElement)("div",{className:"row"},(0,l.createElement)(n.EY,{label:"CC",id:"field-cc",type:"text",name:"email-cc",wrapperClassName:"col-md",value:null!==(h=g.cc)&&void 0!==h?h:"",onChange:e=>b({...g,cc:e.target.value}),validation:{required:{value:!0}}})),x&&(0,l.createElement)("div",{className:"row"},(0,l.createElement)(n.EY,{label:"Bcc",id:"field-bcc",type:"text",name:"email-bcc",wrapperClassName:"col-md",value:null!==(E=g.bcc)&&void 0!==E?E:"",onChange:e=>b({...g,bcc:e.target.value}),validation:{required:{value:!0}}})),(0,l.createElement)("div",{className:"row"},(0,l.createElement)(n.EY,{label:"Subject",id:"field-subject",type:"text",name:"email-subject",wrapperClassName:"col-md",value:g.subject,onChange:e=>b({...g,subject:e.target.value}),validation:{required:{value:!0}}})),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col-md"},(0,l.createElement)("div",{style:{display:"flex",justifyContent:"space-between"}},(0,l.createElement)("div",null,(0,l.createElement)("label",{htmlFor:"field-message"},"Message ")),(0,l.createElement)("div",{onClick:()=>j(!N),style:{display:"flex",position:"relative",cursor:"pointer"}},(0,l.createElement)("div",null,"Select Email Template"),(0,l.createElement)(m,null),N&&(0,l.createElement)("div",{style:{right:"0px"},className:"pv-dropdown-content pv-show"},f.map(((e,n)=>(0,l.createElement)("a",{onClick:l=>{((e,l)=>{e.preventDefault(),b({to:a.person.email,subject:l.subject,message:l.message,postId:t})})(l,e)},key:n,href:"#"},(0,l.createElement)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"}},(0,l.createElement)("div",null,(0,l.createElement)("div",{style:{fontWeight:"500",fontSize:"12px"}},e.name))))))))),(0,l.createElement)(c.A,{key:10,value:g.message,index:10,changeHandler:(e,t=null)=>{b({...g,message:t})}}))),(0,l.createElement)("div",{className:"row"},(0,l.createElement)("div",{className:"col"},(0,l.createElement)("label",{htmlFor:"field-img"},ndpv.i18n.atch),(0,l.createElement)(s.A,{data:g.file,changeHandler:e=>{null!==e&&b({...g,file:e,attachments:{...g.attachments,id:e.id,[e.name]:e.src}})}}))))))}const h=(0,l.lazy)((()=>a.e(9605).then(a.bind(a,39605)))),E={color:" #2D3748",fontFamily:"Inter",fontSize:"16px",fontStyle:"normal",fontWeight:500,lineHeight:"14px"},g={display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #E2E8F0",paddingBottom:"31px"};function b({module_id:e,data:t,parent:a}){const[n,i]=(0,l.useState)(!1);return(0,l.createElement)("div",{style:g},(0,l.createElement)(h,{title:"New Email",setVisibility:i,visibility:n},(0,l.createElement)("div",null,(0,l.createElement)(v,{setVisibility:i,module_id:e,data:t,parent:a}))),(0,l.createElement)("div",{style:E},"Sent Mail"),(0,l.createElement)("div",null,(0,l.createElement)("button",{onClick:()=>i(!0),className:"pv-btn pv-btn-medium pv-bg-blue pv-bg-hover-blue pv-color-white pv-bg-shadow"},"New Mail")))}}}]);