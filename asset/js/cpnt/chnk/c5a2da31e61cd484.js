(self.webpackChunkpropovoice=self.webpackChunkpropovoice||[]).push([[137],{75267:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var a=n(49764),r=n.n(a),s=n(74848);const i=function(e){return(0,s.jsx)("div",{className:"pv-pagination-content",children:(0,s.jsx)(r(),{previousClassName:"pv-previous",nextClassName:"pv-next",disabledClassName:"pv-disabled",previousLabel:(0,s.jsx)("svg",{width:9,height:14,viewBox:"0 0 9 14",fill:"none",children:(0,s.jsx)("path",{d:"M7.5 12.833L1.667 7 7.5 1.167",stroke:"#4C6FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),nextLabel:(0,s.jsx)("svg",{width:9,height:14,viewBox:"0 0 9 14",fill:"none",children:(0,s.jsx)("path",{d:"M1.5 12.833L7.333 7 1.5 1.167",stroke:"#4C6FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),breakLabel:(0,s.jsx)("svg",{width:15,height:15,viewBox:"0 0 24 24",fill:"none",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 12a2 2 0 10-4 0 2 2 0 004 0zM14 12a2 2 0 10-4 0 2 2 0 004 0zM21 12a2 2 0 10-4 0 2 2 0 004 0z",fill:"#718096"})}),breakClassName:"break",forcePage:e.forcePage,pageCount:e.pageCount,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:e.onPageChange,containerClassName:"pv-pagination",activeClassName:"pv-active"})})}},62518:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>D});var a=n(96540),r=n(10366),s=n(75267),i=n(23029),o=n(92901),l=n(56822),c=n(53954),p=n(9417),d=n(85501),u=n(64467),h=n(19203),v=n(68735),f=n(80407),m=n(74848);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,u.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t=(0,c.A)(t),(0,l.A)(e,j()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}const y=function(e){function t(e){var n;return(0,i.A)(this,t),n=x(this,t,[e]),(0,u.A)((0,p.A)(n),"handleChange",(function(e){var t=e.target,a=t.name,r="checkbox"===t.type?t.checked:t.value;n.setState({form:b(b({},n.state.form),{},(0,u.A)({},a,r))})})),(0,u.A)((0,p.A)(n),"handleSubmit",(function(e){if(e.preventDefault(),wage.length>0)(0,v.A)();else{var t=e.nativeEvent.submitter,a=b({},n.state.form);a.attach_ids.length>0&&(a.attach_ids=a.attach_ids.map((function(e){return e.id}))),a.receiver_type=t&&"ndpv-client"===t.id?1:2,n.props.handleSubmit(a,"new"),n.setState({form:{id:null,tab_id:n.props.tab_id,text:"",receiver_type:null,attach_ids:[]}})}})),(0,u.A)((0,p.A)(n),"handleAttachChange",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=b({},n.state.form);if(t){var r=a.attach_ids.filter((function(t){return t.id!==e}));a.attach_ids=r}else a.attach_ids.push(e);n.setState({form:a})})),n.initState={id:null,tab_id:n.props.tab_id,text:"",receiver_type:null,attach_ids:[]},n.state={form:n.initState},n}return(0,d.A)(t,e),(0,o.A)(t,[{key:"render",value:function(){var e=this,t=ndpv,n=t.i18n,a=t.caps,r=this.state.form.attach_ids,s=this.props.path,i=a.includes("ndpv_client_role"),o=this.props.taskMod;return(0,m.jsx)("div",{className:"pv-chat-history",style:{padding:20},children:(0,m.jsxs)("form",{onSubmit:this.handleSubmit,className:"pv-textarea",children:[(0,m.jsx)("textarea",{id:"field-text",type:"text",required:!0,name:"text",value:this.state.form.text,placeholder:o?n.write_comment:n.write_msg,onChange:this.handleChange,onKeyPress:function(t){"Enter"===t.key&&e.handleSubmit(t)},rows:2}),(0,m.jsxs)("div",{className:"pv-button-content",children:[(0,m.jsx)(h.A,{data:r,changeHandler:this.handleAttachChange,multiple:!0,clipOnly:!0},r),(0,m.jsxs)("div",{className:"pv-button",children:[!i&&"project"==s&&(0,m.jsx)("button",{type:"submit",id:"ndpv-team",className:"pv-btn pv-btn-medium pv-bg-stroke pv-bg-hover-shadow pv-mr-10",children:n.send_team}),"project"==s&&(0,m.jsx)("button",{type:"submit",id:"ndpv-client",className:"pv-btn pv-btn-medium pv-bg-blue pv-bg-hover-blue pv-color-white pv-bg-shadow",children:i?n.send:n.reply_client}),!i&&"project"!=s&&(0,m.jsxs)("button",{type:"submit",id:"ndpv-team",className:"pv-btn pv-btn-medium pv-bg-blue pv-bg-hover-blue pv-color-white pv-bg-shadow",children:[o?n.comment:n.send," ",(0,m.jsx)(f.A,{blueBtn:!0})]})]})]})]})})}}]),t}(a.Component);var w=n(65128);n(17604);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,u.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t=(0,c.A)(t),(0,l.A)(e,A()?Reflect.construct(t,n||[],(0,c.A)(e).constructor):t.apply(e,n))}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}var S=function(e){function t(e){var n;return(0,i.A)(this,t),n=N(this,t,[e]),(0,u.A)((0,p.A)(n),"handleChange",(function(e){var t=e.target,a=t.name,r=t.value;n.setState({form:_(_({},n.state.form),{},(0,u.A)({},a,r))})})),(0,u.A)((0,p.A)(n),"editData",(function(){"edit"==n.props.modalType?n.state.form.id!=n.props.data.id&&n.setState({form:n.props.data}):null!=n.state.form.id&&n.setState({form:n.initialState})})),(0,u.A)((0,p.A)(n),"handleSubmit",(function(e){e.preventDefault();var t=_({},n.state.form);n.props.handleSubmit(t),n.setState({form:n.initialState})})),n.initialState={id:null,tab_id:n.props.tab_id,text:""},n.state={form:n.initialState},n}return(0,d.A)(t,e),(0,o.A)(t,[{key:"componentDidMount",value:function(){this.editData()}},{key:"componentDidUpdate",value:function(){this.editData()}},{key:"render",value:function(){var e=this,t=this.state.form,n=ndpv.i18n,a=this.props.taskMod,r=a?n.edit_comment:n.edit_msg;return(0,m.jsx)("div",{className:"pv-overlay pv-show",children:(0,m.jsxs)("div",{className:"pv-modal-content",children:[(0,m.jsxs)("div",{className:"pv-modal-header pv-gradient",children:[(0,m.jsx)("span",{className:"pv-close",onClick:function(){return e.props.close()},children:(0,m.jsx)(w.OM,{})}),(0,m.jsxs)("h2",{className:"pv-modal-title",children:[r," "]})]}),(0,m.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,m.jsx)("div",{className:"pv-content",children:(0,m.jsx)("div",{className:"pv-form-style-one",children:(0,m.jsx)("div",{className:"row",children:(0,m.jsxs)("div",{className:"col",children:[(0,m.jsx)("label",{htmlFor:"form-text",children:a?n.comment:n.msg}),(0,m.jsx)("textarea",{id:"form-text",required:!0,name:"text",value:t.text,onChange:this.handleChange})]})})})}),(0,m.jsx)("div",{className:"pv-modal-footer",children:(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col",children:(0,m.jsx)("button",{type:"reset",className:"pv-btn pv-text-hover-blue",onClick:function(){return e.props.close()},children:n.cancel})}),(0,m.jsx)("div",{className:"col",children:(0,m.jsx)("button",{type:"submit",className:"pv-btn pv-bg-blue pv-bg-hover-blue pv-btn-big pv-float-right pv-color-white",children:n.upd})})]})})]})]})})}}]),t}(a.Component);const O=S;var C=n(21364),E=n(51945),P=function(e){var t=(0,a.useRef)(null);(0,a.useEffect)((function(){t.current.scrollTop=t.current.scrollHeight}),[e.tableData]);var n=ndpv.caps.includes("ndpv_client_role"),r=e.tableData.map((function(t,r){return(0,m.jsxs)("li",{children:[t.date_format&&(0,m.jsx)("p",{children:(0,m.jsx)("span",{className:"pv-message-data-time",children:t.date_format})}),(0,m.jsxs)("div",{className:"pv-message-data",children:[(0,m.jsxs)("div",{className:"pv-time-content",children:[(0,m.jsx)("span",{className:"pv-time",children:t.date_ago}),t.canEdit&&(0,m.jsx)(C.A,{row:t,editEntry:e.editEntry,deleteEntry:e.deleteEntry})]}),(0,m.jsx)("img",{src:ndpv.assetImgUri+"avatar.png",alt:"avatar"}),(0,m.jsxs)("div",{className:"pv-about",children:[(0,m.jsxs)("div",{className:"pv-name",children:[t.name,(0,m.jsx)("span",{className:"pv-badge pv-ml",style:{background:"ndpv_client_role"==t.role?"#39D68A":"#25A8FF",marginLeft:5},children:t.role_title})]}),(0,m.jsx)("div",{className:"pv-message",style:(s=t.role,i=!1,n||"ndpv_client_role"==s||(i=!0),n&&"ndpv_client_role"==s&&(i=!0),i?{background:"transparent",padding:0}:{}),children:t.text}),(0,m.jsx)("div",{className:"pv-msg-attach",children:(0,m.jsx)("ul",{children:t.attachs.map((function(e,t){return(0,m.jsxs)(a.Fragment,{children:["pdf"==e.type&&(0,m.jsx)("li",{className:"pv-attach-pdf",children:(0,m.jsxs)("a",{href:e.url,target:"_blank",children:[(0,m.jsx)("span",{className:"pv-pdf-icon",children:(0,m.jsxs)("svg",{width:12,height:14,viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,m.jsx)("path",{d:"M8.023 4.102a.958.958 0 01-.957-.957V0H2.172C1.342 0 .668.675.668 1.504v10.992c0 .83.675 1.504 1.504 1.504h7.656c.83 0 1.504-.675 1.504-1.504V4.102H8.023zM2.91 9.844H4.9a.41.41 0 010 .82H2.91a.41.41 0 010-.82zM2.5 8.066a.41.41 0 01.41-.41h6.016a.41.41 0 010 .82H2.91a.41.41 0 01-.41-.41zM8.926 5.47a.41.41 0 010 .82H2.91a.41.41 0 010-.82h6.016z",fill:"#718096"}),(0,m.jsx)("path",{d:"M7.887 3.144c0 .076.061.137.136.137h3.126a1.499 1.499 0 00-.287-.375L8.225.41A1.508 1.508 0 007.887.17v2.974z",fill:"#718096"})]})}),(0,m.jsx)("span",{className:"pv-pdf-name",children:e.name}),(0,m.jsx)("span",{className:"pv-download-pdf",children:(0,m.jsx)("svg",{width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsx)("path",{d:"M1 10v1.5A1.5 1.5 0 002.5 13h9a1.5 1.5 0 001.5-1.5V10m-3-3l-3 3m0 0L4 7m3 3V1",stroke:"#718096",strokeWidth:1.2,strokeLinecap:"round",strokeLinejoin:"round"})})})]})}),"pdf"!=e.type&&(0,m.jsx)("li",{children:(0,m.jsx)("div",{style:{width:100,display:"inline-block"},children:(0,m.jsx)(E.A,{small:e.url,large:e.url})})})]},t)}))})})]})]})]},r);var s,i})),s=e.taskMod;return(0,m.jsx)("div",{ref:t,className:"pv-chat-history",style:s?{}:{maxHeight:450,overflowY:"auto",padding:30,paddingBottom:0},children:(0,m.jsx)("ul",{children:r})})};const M=function(e){var t=e.tableData,n=e.editEntry,a=e.checkedBoxes,r=e.deleteEntry,s=e.taskMod,i=e.scrollBottom;return(0,m.jsx)(m.Fragment,{children:t.length>0&&(0,m.jsx)(P,{tableData:t,editEntry:n,checkedBoxes:a,deleteEntry:r,taskMod:s,scrollBottom:i})})};const D=(0,n(40469).A)((function(e){var t=(0,a.useRef)(null),n=e.state,i=n.lists,o=n.checkedBoxes,l=n.searchVal;(0,a.useEffect)((function(){if(!wage.length){e.getLists(),t.current.scrollTop=t.current.scrollHeight;var n=setInterval((function(){e.getLists()}),15e3);return function(){return clearInterval(n)}}}),[]),(0,a.useEffect)((function(){t.current.scrollTop=t.current.scrollHeight}),[i]);var c=e.taskMod,p={};return c&&(p={marginTop:"15px",background:"#fff",padding:"20px",flex:"1",overflow:"auto"}),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{ref:t,style:p,children:[e.state.formModal&&(0,m.jsx)(O,{tab_id:e.tab_id,handleSubmit:e.handleSubmit,modalType:e.state.formModalType,data:e.state.list,close:e.closeForm,taskMod:c}),c&&(wage.length>0||!e.state.preloader&&!(i.length>0))&&(0,m.jsx)("p",{style:{color:"#718096"},children:ndpv.i18n.no_comment}),!wage.length&&(0,m.jsx)(m.Fragment,{children:e.state.preloader?(0,m.jsx)(r.A,{}):(0,m.jsx)(M,{tableData:i,searchVal:l,editEntry:e.openForm,checkedBoxes:{data:o,handle:e.handleCheckbox},deleteEntry:e.deleteEntry,taskMod:c})}),(0,m.jsx)("div",{className:"pv-pagination-content-two",children:e.state.totalPage>1&&(0,m.jsx)(s.A,{forcePage:e.state.currentPage-1,pageCount:e.state.totalPage,onPageChange:e.handlePageClick})})]}),(0,m.jsx)(y,{handleSubmit:function(t,n){e.handleSubmit(t,n)},tab_id:e.tab_id,path:e.path,taskMod:c})]})}),"message","Messages","",!0)},17604:(e,t,n)=>{var a;!function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function s(e){return function(e,t){var n,a,i,o,l,c,p,d,u,h=1,v=e.length,f="";for(a=0;a<v;a++)if("string"==typeof e[a])f+=e[a];else if("object"==typeof e[a]){if((o=e[a]).keys)for(n=t[h],i=0;i<o.keys.length;i++){if(null==n)throw new Error(s('[sprintf] Cannot access property "%s" of undefined value "%s"',o.keys[i],o.keys[i-1]));n=n[o.keys[i]]}else n=o.param_no?t[o.param_no]:t[h++];if(r.not_type.test(o.type)&&r.not_primitive.test(o.type)&&n instanceof Function&&(n=n()),r.numeric_arg.test(o.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(s("[sprintf] expecting number but found %T",n));switch(r.number.test(o.type)&&(d=n>=0),o.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,o.width?parseInt(o.width):0);break;case"e":n=o.precision?parseFloat(n).toExponential(o.precision):parseFloat(n).toExponential();break;case"f":n=o.precision?parseFloat(n).toFixed(o.precision):parseFloat(n);break;case"g":n=o.precision?String(Number(n.toPrecision(o.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=o.precision?n.substring(0,o.precision):n;break;case"t":n=String(!!n),n=o.precision?n.substring(0,o.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=o.precision?n.substring(0,o.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=o.precision?n.substring(0,o.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}r.json.test(o.type)?f+=n:(!r.number.test(o.type)||d&&!o.sign?u="":(u=d?"+":"-",n=n.toString().replace(r.sign,"")),c=o.pad_char?"0"===o.pad_char?"0":o.pad_char.charAt(1):" ",p=o.width-(u+n).length,l=o.width&&p>0?c.repeat(p):"",f+=o.align?u+n+l:"0"===c?u+l+n:l+u+n)}return f}(function(e){if(o[e])return o[e];var t,n=e,a=[],s=0;for(;n;){if(null!==(t=r.text.exec(n)))a.push(t[0]);else if(null!==(t=r.modulo.exec(n)))a.push("%");else{if(null===(t=r.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){s|=1;var i=[],l=t[2],c=[];if(null===(c=r.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(i.push(c[1]);""!==(l=l.substring(c[0].length));)if(null!==(c=r.key_access.exec(l)))i.push(c[1]);else{if(null===(c=r.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");i.push(c[1])}t[2]=i}else s|=2;if(3===s)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");a.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return o[e]=a}(e),arguments)}function i(e,t){return s.apply(null,[e].concat(t||[]))}var o=Object.create(null);t.sprintf=s,t.vsprintf=i,"undefined"!=typeof window&&(window.sprintf=s,window.vsprintf=i,void 0===(a=function(){return{sprintf:s,vsprintf:i}}.call(t,n,t,e))||(e.exports=a))}()}}]);