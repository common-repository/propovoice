"use strict";(self.webpackChunkpropovoice=self.webpackChunkpropovoice||[]).push([[243],{50243:(t,n,e)=>{e.r(n),e.d(n,{default:()=>l});var s=e(89394),a=e(3453),i=e(96540),r=e(21241),o=e(74717),d=e(67885),c=e(74848);const l=function(t){var n=(0,i.useRef)(),e=(0,i.useState)([]),l=(0,a.A)(e,2),p=l[0],u=l[1],v=(0,i.useState)([]),h=(0,a.A)(v,2),f=h[0],m=h[1],x=(0,i.useState)(!1),b=(0,a.A)(x,2),g=b[0],j=b[1],k=(0,i.useCallback)((function(){return j(!1)}),[]);(0,o.A)(n,k),(0,i.useEffect)((function(){L(),w()}),[]);var L=function(){var n=t.parent_tab_id?t.parent_tab_id:t.tab_id;d.A.get("staffs","tab_id="+n,"pro").then((function(t){t.data.success&&u(t.data.data.result)}))},w=function(){d.A.getS("staffs",t.tab_id,"pro").then((function(t){t.data.success&&m(t.data.data.result)}))},C=function(t){t.preventDefault(),j(!g)},N=function(n){if(confirm(ndpv.i18n.aConf)){var e={};e.tab_id=parseInt(t.tab_id),e.user_id=parseInt(n);var s=f.filter((function(t){return t.id!==n}));m(s),d.A.del("staffs",n+"/"+t.tab_id,"pro").then((function(t){t.data.success?r.oR.success(ndpv.i18n.aDel):t.data.data.forEach((function(t){r.oR.error(t)}))}))}},_=ndpv,A=_.i18n,y=(_.caps,t.avatarGroup);return(0,c.jsxs)("div",{className:t.inForm?"pv-tag-content":"pv-widget pv-info-box",style:t.inForm?{padding:0,border:0}:{marginBottom:8},children:[(0,c.jsxs)("div",{className:"pv-action-content",ref:n,children:[t.inForm&&(0,c.jsxs)(c.Fragment,{children:[!y&&(0,c.jsx)("label",{htmlFor:"form-asign",children:"Team:"}),(0,c.jsxs)("button",{className:"pv-btn pv-btn-medium pv-bg-stroke",style:{margin:y?"0 10px 0 0":"0 10px",width:"auto",border:"1px solid rgba(221, 221, 221, 0.6588235294)"},onClick:function(t){return C(t)},children:[A.assign,(0,c.jsx)("svg",{width:10,height:6,style:{marginLeft:"10px"},className:"pv-mr-0",viewBox:"0 0 10 6",fill:"none",children:(0,c.jsx)("path",{d:"M5.00001 3.78145L8.30001 0.481445L9.24268 1.42411L5.00001 5.66678L0.757342 1.42411L1.70001 0.481445L5.00001 3.78145Z",fill:"#4A5568"})})]})]}),!t.inForm&&(0,c.jsxs)("h3",{className:"pv-widget-title",children:[A.team,(0,c.jsxs)("button",{className:"pv-btn pv-btn-small pv-bg-stroke pv-bg-hover-shadow pv-mb-20",style:{width:"auto",border:"1px solid rgba(221, 221, 221, 0.6588235294)"},onClick:function(t){return C(t)},children:[A.assign,(0,c.jsx)("svg",{width:10,height:6,style:{marginLeft:"10px"},className:"pv-mr-0",viewBox:"0 0 10 6",fill:"none",children:(0,c.jsx)("path",{d:"M5.00001 3.78145L8.30001 0.481445L9.24268 1.42411L5.00001 5.66678L0.757342 1.42411L1.70001 0.481445L5.00001 3.78145Z",fill:"#4A5568"})})]})]}),g&&(0,c.jsx)("div",{className:"pv-dropdown-content pv-show",style:{left:0},children:p&&p.map((function(n,e){return(0,c.jsx)("a",{onClick:function(){return e=n,(a={}).tab_id=parseInt(t.tab_id),a.user_id=parseInt(e.id),j(!1),void(f.some((function(t){return t.id==e.id}))||(m([].concat((0,s.A)(f),[e])),d.A.add("staffs",a,"pro").then((function(t){t.data.success?r.oR.success(ndpv.i18n.aAdd):t.data.data.forEach((function(t){r.oR.error(t)}))}))));var e,a},children:n.name},e)}))})]}),f&&f.map((function(n,e){return t.inForm?(0,c.jsxs)("span",{style:{marginRight:10,fontSize:12},className:"pv-badge",children:[n.name," ",(0,c.jsx)("b",{onClick:function(){return N(n.id)},style:{padding:"9px 7px"},children:"X"})]},e):(0,c.jsx)("div",{className:"pv-persons-content",children:(0,c.jsxs)("div",{className:"pv-avatar-content pv-p-0",children:[(0,c.jsx)("img",{src:n.img,alt:"avatar"}),(0,c.jsxs)("div",{className:"pv-avatar-text",children:[(0,c.jsx)("h5",{children:n.name}),!1]}),(0,c.jsx)("div",{className:"pv-action-content",children:(0,c.jsx)("button",{onClick:function(){return N(n.id)},children:(0,c.jsx)("span",{className:"pv-action-btn pv-bg-stroke pv-bg-shadow",children:(0,c.jsxs)("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",children:[(0,c.jsx)("path",{d:"M13.5 3.5H2.5",stroke:"#CBD5E0",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,c.jsx)("path",{d:"M5.5 1.5H10.5",stroke:"#CBD5E0",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,c.jsx)("path",{d:"M12.5 3.5V13C12.5 13.1326 12.4473 13.2598 12.3536 13.3536C12.2598 13.4473 12.1326 13.5 12 13.5H4C3.86739 13.5 3.74021 13.4473 3.64645 13.3536C3.55268 13.2598 3.5 13.1326 3.5 13V3.5",stroke:"#CBD5E0",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})})})]})},e)}))]})}}}]);